(function(F,k){typeof exports=="object"&&typeof module<"u"?k(exports):typeof define=="function"&&define.amd?define(["exports"],k):(F=typeof globalThis<"u"?globalThis:F||self,k(F["@nhost/hasura-storage-js"]={}))})(this,function(F){"use strict";var qi=Object.defineProperty;var Vi=(F,k,Z)=>k in F?qi(F,k,{enumerable:!0,configurable:!0,writable:!0,value:Z}):F[k]=Z;var at=(F,k,Z)=>(Vi(F,typeof k!="symbol"?k+"":k,Z),Z);function k(t,e){return function(){return t.apply(e,arguments)}}const{toString:Z}=Object.prototype,{getPrototypeOf:ne}=Object,ie=(t=>e=>{const r=Z.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),X=t=>(t=t.toLowerCase(),e=>ie(e)===t),Lt=t=>e=>typeof e===t,{isArray:ut}=Array,gt=Lt("undefined");function Gr(t){return t!==null&&!gt(t)&&t.constructor!==null&&!gt(t.constructor)&&ot(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const De=X("ArrayBuffer");function Yr(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&De(t.buffer),e}const Qr=Lt("string"),ot=Lt("function"),je=Lt("number"),oe=t=>t!==null&&typeof t=="object",Zr=t=>t===!0||t===!1,Ft=t=>{if(ie(t)!=="object")return!1;const e=ne(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},tn=X("Date"),en=X("File"),rn=X("Blob"),nn=X("FileList"),on=t=>oe(t)&&ot(t.pipe),sn=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Z.call(t)===e||ot(t.toString)&&t.toString()===e)},an=X("URLSearchParams"),un=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function St(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ut(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let a;for(n=0;n<s;n++)a=o[n],e.call(null,t[a],a,t)}}function Ue(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Le=typeof self>"u"?typeof global>"u"?globalThis:global:self,Fe=t=>!gt(t)&&t!==Le;function se(){const{caseless:t}=Fe(this)&&this||{},e={},r=(n,i)=>{const o=t&&Ue(e,i)||i;Ft(e[o])&&Ft(n)?e[o]=se(e[o],n):Ft(n)?e[o]=se({},n):ut(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&St(arguments[n],r);return e}const cn=(t,e,r,{allOwnKeys:n}={})=>(St(e,(i,o)=>{r&&ot(i)?t[o]=k(i,r):t[o]=i},{allOwnKeys:n}),t),ln=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),fn=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},dn=(t,e,r,n)=>{let i,o,s;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],(!n||n(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=r!==!1&&ne(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},hn=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},pn=t=>{if(!t)return null;if(ut(t))return t;let e=t.length;if(!je(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},yn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ne(Uint8Array)),vn=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},mn=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},gn=X("HTMLFormElement"),Sn=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Ce=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),wn=X("RegExp"),Ie=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};St(r,(i,o)=>{e(i,o,t)!==!1&&(n[o]=i)}),Object.defineProperties(t,n)},f={isArray:ut,isArrayBuffer:De,isBuffer:Gr,isFormData:sn,isArrayBufferView:Yr,isString:Qr,isNumber:je,isBoolean:Zr,isObject:oe,isPlainObject:Ft,isUndefined:gt,isDate:tn,isFile:en,isBlob:rn,isRegExp:wn,isFunction:ot,isStream:on,isURLSearchParams:an,isTypedArray:yn,isFileList:nn,forEach:St,merge:se,extend:cn,trim:un,stripBOM:ln,inherits:fn,toFlatObject:dn,kindOf:ie,kindOfTest:X,endsWith:hn,toArray:pn,forEachEntry:vn,matchAll:mn,isHTMLForm:gn,hasOwnProperty:Ce,hasOwnProp:Ce,reduceDescriptors:Ie,freezeMethods:t=>{Ie(t,(e,r)=>{if(ot(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!ot(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(t,e)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return ut(t)?n(t):n(String(t).split(e)),r},toCamelCase:Sn,noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:Ue,global:Le,isContextDefined:Fe,toJSONObject:t=>{const e=new Array(10),r=(n,i)=>{if(oe(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const o=ut(n)?[]:{};return St(n,(s,a)=>{const c=r(s,i+1);!gt(c)&&(o[a]=c)}),e[i]=void 0,o}}return n};return r(t,0)}};function O(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}f.inherits(O,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const _e=O.prototype,Me={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Me[t]={value:t}}),Object.defineProperties(O,Me),Object.defineProperty(_e,"isAxiosError",{value:!0}),O.from=(t,e,r,n,i,o)=>{const s=Object.create(_e);return f.toFlatObject(t,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),O.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};var Be=typeof self=="object"?self.FormData:window.FormData;function ae(t){return f.isPlainObject(t)||f.isArray(t)}function ke(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function $e(t,e,r){return t?t.concat(e).map(function(i,o){return i=ke(i),!r&&o?"["+i+"]":i}).join(r?".":""):e}function En(t){return f.isArray(t)&&!t.some(ae)}const bn=f.toFlatObject(f,{},null,function(e){return/^is[A-Z]/.test(e)});function On(t){return t&&f.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function Ct(t,e,r){if(!f.isObject(t))throw new TypeError("target must be an object");e=e||new(Be||FormData),r=f.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,S){return!f.isUndefined(S[p])});const n=r.metaTokens,i=r.visitor||l,o=r.dots,s=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&On(e);if(!f.isFunction(i))throw new TypeError("visitor must be a function");function u(d){if(d===null)return"";if(f.isDate(d))return d.toISOString();if(!c&&f.isBlob(d))throw new O("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(d)||f.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function l(d,p,S){let b=d;if(d&&!S&&typeof d=="object"){if(f.endsWith(p,"{}"))p=n?p:p.slice(0,-2),d=JSON.stringify(d);else if(f.isArray(d)&&En(d)||f.isFileList(d)||f.endsWith(p,"[]")&&(b=f.toArray(d)))return p=ke(p),b.forEach(function(E,N){!(f.isUndefined(E)||E===null)&&e.append(s===!0?$e([p],N,o):s===null?p:p+"[]",u(E))}),!1}return ae(d)?!0:(e.append($e(S,p,o),u(d)),!1)}const h=[],y=Object.assign(bn,{defaultVisitor:l,convertValue:u,isVisitable:ae});function v(d,p){if(!f.isUndefined(d)){if(h.indexOf(d)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(d),f.forEach(d,function(b,g){(!(f.isUndefined(b)||b===null)&&i.call(e,b,f.isString(g)?g.trim():g,p,y))===!0&&v(b,p?p.concat(g):[g])}),h.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return v(t),e}function He(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ue(t,e){this._pairs=[],t&&Ct(t,this,e)}const ze=ue.prototype;ze.append=function(e,r){this._pairs.push([e,r])},ze.toString=function(e){const r=e?function(n){return e.call(this,n,He)}:He;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function An(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Je(t,e,r){if(!e)return t;const n=r&&r.encode||An,i=r&&r.serialize;let o;if(i?o=i(e,r):o=f.isURLSearchParams(e)?e.toString():new ue(e,r).toString(n),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class xn{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){f.forEach(this.handlers,function(n){n!==null&&e(n)})}}const qe=xn,Ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tn=typeof URLSearchParams<"u"?URLSearchParams:ue,Rn=FormData,Pn=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),G={isBrowser:!0,classes:{URLSearchParams:Tn,FormData:Rn,Blob},isStandardBrowserEnv:Pn,protocols:["http","https","file","blob","url","data"]};function Nn(t,e){return Ct(t,new G.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return G.isNode&&f.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Dn(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function jn(t){const e={},r=Object.keys(t);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}function Ke(t){function e(r,n,i,o){let s=r[o++];const a=Number.isFinite(+s),c=o>=r.length;return s=!s&&f.isArray(i)?i.length:s,c?(f.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a):((!i[s]||!f.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],o)&&f.isArray(i[s])&&(i[s]=jn(i[s])),!a)}if(f.isFormData(t)&&f.isFunction(t.entries)){const r={};return f.forEachEntry(t,(n,i)=>{e(Dn(n),i,r,0)}),r}return null}const Un={"Content-Type":void 0};function Ln(t,e,r){if(f.isString(t))try{return(e||JSON.parse)(t),f.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const It={transitional:Ve,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=f.isObject(e);if(o&&f.isHTMLForm(e)&&(e=new FormData(e)),f.isFormData(e))return i&&i?JSON.stringify(Ke(e)):e;if(f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e))return e;if(f.isArrayBufferView(e))return e.buffer;if(f.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Nn(e,this.formSerializer).toString();if((a=f.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ct(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),Ln(e)):e}],transformResponse:[function(e){const r=this.transitional||It.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&f.isString(e)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?O.from(a,O.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:G.classes.FormData,Blob:G.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};f.forEach(["delete","get","head"],function(e){It.headers[e]={}}),f.forEach(["post","put","patch"],function(e){It.headers[e]=f.merge(Un)});const ce=It,Fn=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cn=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&Fn[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},We=Symbol("internals");function wt(t){return t&&String(t).trim().toLowerCase()}function _t(t){return t===!1||t==null?t:f.isArray(t)?t.map(_t):String(t)}function In(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function _n(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function Xe(t,e,r,n){if(f.isFunction(n))return n.call(this,e,r);if(!!f.isString(e)){if(f.isString(n))return e.indexOf(n)!==-1;if(f.isRegExp(n))return n.test(e)}}function Mn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Bn(t,e){const r=f.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,o,s){return this[n].call(this,e,i,o,s)},configurable:!0})})}class Mt{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function o(a,c,u){const l=wt(c);if(!l)throw new Error("header name must be a non-empty string");const h=f.findKey(i,l);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=_t(a))}const s=(a,c)=>f.forEach(a,(u,l)=>o(u,l,c));return f.isPlainObject(e)||e instanceof this.constructor?s(e,r):f.isString(e)&&(e=e.trim())&&!_n(e)?s(Cn(e),r):e!=null&&o(r,e,n),this}get(e,r){if(e=wt(e),e){const n=f.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return In(i);if(f.isFunction(r))return r.call(this,i,n);if(f.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=wt(e),e){const n=f.findKey(this,e);return!!(n&&(!r||Xe(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function o(s){if(s=wt(s),s){const a=f.findKey(n,s);a&&(!r||Xe(n,n[a],a,r))&&(delete n[a],i=!0)}}return f.isArray(e)?e.forEach(o):o(e),i}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,n={};return f.forEach(this,(i,o)=>{const s=f.findKey(n,o);if(s){r[s]=_t(i),delete r[o];return}const a=e?Mn(o):String(o).trim();a!==o&&delete r[o],r[a]=_t(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return f.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&f.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[We]=this[We]={accessors:{}}).accessors,i=this.prototype;function o(s){const a=wt(s);n[a]||(Bn(i,s),n[a]=!0)}return f.isArray(e)?e.forEach(o):o(e),this}}Mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),f.freezeMethods(Mt.prototype),f.freezeMethods(Mt);const Y=Mt;function le(t,e){const r=this||ce,n=e||r,i=Y.from(n.headers);let o=n.data;return f.forEach(t,function(a){o=a.call(r,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function Ge(t){return!!(t&&t.__CANCEL__)}function Et(t,e,r){O.call(this,t==null?"canceled":t,O.ERR_CANCELED,e,r),this.name="CanceledError"}f.inherits(Et,O,{__CANCEL__:!0});const kn=null;function $n(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new O("Request failed with status code "+r.status,[O.ERR_BAD_REQUEST,O.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Hn=G.isStandardBrowserEnv?function(){return{write:function(r,n,i,o,s,a){const c=[];c.push(r+"="+encodeURIComponent(n)),f.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),f.isString(o)&&c.push("path="+o),f.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function zn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Jn(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Ye(t,e){return t&&!zn(e)?Jn(t,e):e}const qn=G.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(o){let s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){const a=f.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Vn(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Kn(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,o=0,s;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[o];s||(s=u),r[i]=c,n[i]=u;let h=o,y=0;for(;h!==i;)y+=r[h++],h=h%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),u-s<e)return;const v=l&&u-l;return v?Math.round(y*1e3/v):void 0}}function Qe(t,e){let r=0;const n=Kn(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,c=n(a),u=o<=s;r=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const Bt={http:kn,xhr:typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){let i=t.data;const o=Y.from(t.headers).normalize(),s=t.responseType;let a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}f.isFormData(i)&&G.isStandardBrowserEnv&&o.setContentType(!1);let u=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",d=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(v+":"+d))}const l=Ye(t.baseURL,t.url);u.open(t.method.toUpperCase(),Je(l,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const v=Y.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),p={data:!s||s==="text"||s==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:v,config:t,request:u};$n(function(b){r(b),c()},function(b){n(b),c()},p),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(n(new O("Request aborted",O.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new O("Network Error",O.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let d=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const p=t.transitional||Ve;t.timeoutErrorMessage&&(d=t.timeoutErrorMessage),n(new O(d,p.clarifyTimeoutError?O.ETIMEDOUT:O.ECONNABORTED,t,u)),u=null},G.isStandardBrowserEnv){const v=(t.withCredentials||qn(l))&&t.xsrfCookieName&&Hn.read(t.xsrfCookieName);v&&o.set(t.xsrfHeaderName,v)}i===void 0&&o.setContentType(null),"setRequestHeader"in u&&f.forEach(o.toJSON(),function(d,p){u.setRequestHeader(p,d)}),f.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),s&&s!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Qe(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Qe(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=v=>{!u||(n(!v||v.type?new Et(null,t,u):v),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const y=Vn(l);if(y&&G.protocols.indexOf(y)===-1){n(new O("Unsupported protocol "+y+":",O.ERR_BAD_REQUEST,t));return}u.send(i||null)})}};f.forEach(Bt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Wn={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=f.isString(r)?Bt[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new O(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(f.hasOwnProp(Bt,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!f.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Bt};function fe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Et}function Ze(t){return fe(t),t.headers=Y.from(t.headers),t.data=le.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Wn.getAdapter(t.adapter||ce.adapter)(t).then(function(n){return fe(t),n.data=le.call(t,t.transformResponse,n),n.headers=Y.from(n.headers),n},function(n){return Ge(n)||(fe(t),n&&n.response&&(n.response.data=le.call(t,t.transformResponse,n.response),n.response.headers=Y.from(n.response.headers))),Promise.reject(n)})}const tr=t=>t instanceof Y?t.toJSON():t;function bt(t,e){e=e||{};const r={};function n(u,l,h){return f.isPlainObject(u)&&f.isPlainObject(l)?f.merge.call({caseless:h},u,l):f.isPlainObject(l)?f.merge({},l):f.isArray(l)?l.slice():l}function i(u,l,h){if(f.isUndefined(l)){if(!f.isUndefined(u))return n(void 0,u,h)}else return n(u,l,h)}function o(u,l){if(!f.isUndefined(l))return n(void 0,l)}function s(u,l){if(f.isUndefined(l)){if(!f.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,h){if(h in e)return n(u,l);if(h in t)return n(void 0,u)}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(u,l)=>i(tr(u),tr(l),!0)};return f.forEach(Object.keys(t).concat(Object.keys(e)),function(l){const h=c[l]||i,y=h(t[l],e[l],l);f.isUndefined(y)&&h!==a||(r[l]=y)}),r}const er="1.2.0",de={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{de[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const rr={};de.transitional=function(e,r,n){function i(o,s){return"[Axios v"+er+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return(o,s,a)=>{if(e===!1)throw new O(i(s," has been removed"+(r?" in "+r:"")),O.ERR_DEPRECATED);return r&&!rr[s]&&(rr[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function Xn(t,e,r){if(typeof t!="object")throw new O("options must be an object",O.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const o=n[i],s=e[o];if(s){const a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new O("option "+o+" must be "+c,O.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new O("Unknown option "+o,O.ERR_BAD_OPTION)}}const he={assertOptions:Xn,validators:de},tt=he.validators;class kt{constructor(e){this.defaults=e,this.interceptors={request:new qe,response:new qe}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=bt(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&he.assertOptions(n,{silentJSONParsing:tt.transitional(tt.boolean),forcedJSONParsing:tt.transitional(tt.boolean),clarifyTimeoutError:tt.transitional(tt.boolean)},!1),i!==void 0&&he.assertOptions(i,{encode:tt.function,serialize:tt.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s;s=o&&f.merge(o.common,o[r.method]),s&&f.forEach(["delete","get","head","post","put","patch","common"],d=>{delete o[d]}),r.headers=Y.concat(s,o);const a=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let l,h=0,y;if(!c){const d=[Ze.bind(this),void 0];for(d.unshift.apply(d,a),d.push.apply(d,u),y=d.length,l=Promise.resolve(r);h<y;)l=l.then(d[h++],d[h++]);return l}y=a.length;let v=r;for(h=0;h<y;){const d=a[h++],p=a[h++];try{v=d(v)}catch(S){p.call(this,S);break}}try{l=Ze.call(this,v)}catch(d){return Promise.reject(d)}for(h=0,y=u.length;h<y;)l=l.then(u[h++],u[h++]);return l}getUri(e){e=bt(this.defaults,e);const r=Ye(e.baseURL,e.url);return Je(r,e.params,e.paramsSerializer)}}f.forEach(["delete","get","head","options"],function(e){kt.prototype[e]=function(r,n){return this.request(bt(n||{},{method:e,url:r,data:(n||{}).data}))}}),f.forEach(["post","put","patch"],function(e){function r(n){return function(o,s,a){return this.request(bt(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}kt.prototype[e]=r(),kt.prototype[e+"Form"]=r(!0)});const $t=kt;class pe{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(a=>{n.subscribe(a),o=a}).then(i);return s.cancel=function(){n.unsubscribe(o)},s},e(function(o,s,a){n.reason||(n.reason=new Et(o,s,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new pe(function(i){e=i}),cancel:e}}}const Gn=pe;function Yn(t){return function(r){return t.apply(null,r)}}function Qn(t){return f.isObject(t)&&t.isAxiosError===!0}function nr(t){const e=new $t(t),r=k($t.prototype.request,e);return f.extend(r,$t.prototype,e,{allOwnKeys:!0}),f.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return nr(bt(t,i))},r}const _=nr(ce);_.Axios=$t,_.CanceledError=Et,_.CancelToken=Gn,_.isCancel=Ge,_.VERSION=er,_.toFormData=Ct,_.AxiosError=O,_.Cancel=_.CanceledError,_.all=function(e){return Promise.all(e)},_.spread=Yn,_.isAxiosError=Qn,_.AxiosHeaders=Y,_.formToJSON=t=>Ke(f.isHTMLForm(t)?new FormData(t):t),_.default=_;const ir=_;class or{constructor({url:e}){at(this,"url");at(this,"httpClient");at(this,"accessToken");at(this,"adminSecret");this.url=e,this.httpClient=ir.create({baseURL:this.url})}async upload(e){const{formData:r}=e;try{return{fileMetadata:(await this.httpClient.post("/files",r,{headers:{...this.generateUploadHeaders(e),...this.generateAuthHeaders(),"Content-Type":"multipart/form-data"}})).data,error:null}}catch(n){return{fileMetadata:null,error:n}}}async getPresignedUrl(e){try{const{fileId:r}=e;return{presignedUrl:(await this.httpClient.get(`/files/${r}/presignedurl`,{headers:{...this.generateAuthHeaders()}})).data,error:null}}catch(r){return{presignedUrl:null,error:r}}}async delete(e){try{const{fileId:r}=e;return await this.httpClient.delete(`/files/${r}`,{headers:{...this.generateAuthHeaders()}}),{error:null}}catch(r){return{error:r}}}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateUploadHeaders(e){const{bucketId:r,name:n,id:i}=e,o={};return r&&(o["x-nhost-bucket-id"]=r),i&&(o["x-nhost-file-id"]=i),n&&(o["x-nhost-file-name"]=n),o}generateAuthHeaders(){return!this.adminSecret&&!this.accessToken?null:this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}}class Zn{constructor({url:e,adminSecret:r}){at(this,"url");at(this,"api");this.url=e,this.api=new or({url:e}),this.setAdminSecret(r)}async upload(e){let r;"file"in e?(r=new Be,r.append("file",e.file)):r=e.formData;const{fileMetadata:n,error:i}=await this.api.upload({...e,formData:r});return i?{fileMetadata:null,error:i}:n?{fileMetadata:n,error:null}:{fileMetadata:null,error:new Error("Invalid file returned")}}getUrl(e){return this.getPublicUrl(e)}getPublicUrl(e){const{fileId:r}=e;return`${this.url}/files/${r}`}async getPresignedUrl(e){const{presignedUrl:r,error:n}=await this.api.getPresignedUrl(e);return n?{presignedUrl:null,error:n}:r?{presignedUrl:r,error:null}:{presignedUrl:null,error:new Error("Invalid file id")}}async delete(e){const{error:r}=await this.api.delete(e);return r?{error:r}:{error:null}}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var m=function(){return m=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},m.apply(this,arguments)};function ye(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function P(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function R(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var T;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(T||(T={}));var et;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(et||(et={}));var ve=T.Start,me=T.Stop,ct=T.Raise,Ot=T.Send,sr=T.Cancel,ar=T.NullEvent,Ht=T.Assign,ti=T.After,ei=T.DoneState,ge=T.Log,ur=T.Init,zt=T.Invoke,ri=T.ErrorExecution,ni=T.ErrorPlatform,cr=T.ErrorCustom,Se=T.Update,lr=T.Choose,fr=T.Pure;const ii=Object.freeze(Object.defineProperty({__proto__:null,after:ti,assign:Ht,cancel:sr,choose:lr,doneState:ei,error:cr,errorExecution:ri,errorPlatform:ni,init:ur,invoke:zt,log:ge,nullEvent:ar,pure:fr,raise:ct,send:Ot,start:ve,stop:me,update:Se},Symbol.toStringTag,{value:"Module"}));var dr=".",hr={},we="xstate.guard",oi="",$=process.env.NODE_ENV==="production",Jt;function Ee(t,e,r){r===void 0&&(r=dr);var n=At(t,r),i=At(e,r);return x(i)?x(n)?i===n:!1:x(n)?n in i:Object.keys(n).every(function(o){return o in i?Ee(n[o],i[o]):!1})}function pr(t){try{return x(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function be(t,e){try{return Tt(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function si(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function At(t,e){if(si(t))return t.value;if(Tt(t))return qt(t);if(typeof t!="string")return t;var r=be(t,e);return qt(r)}function qt(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function xt(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var o=n[i];r[o]=e(t[o],o,t,i)}return r}function yr(t,e,r){var n,i,o={};try{for(var s=P(Object.keys(t)),a=s.next();!a.done;a=s.next()){var c=a.value,u=t[c];!r(u)||(o[c]=e(u,c,t))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}var ai=function(t){return function(e){var r,n,i=e;try{for(var o=P(t),s=o.next();!s.done;s=o.next()){var a=s.value;i=i[a]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}};function ui(t,e){return function(r){var n,i,o=r;try{for(var s=P(t),a=s.next();!a.done;a=s.next()){var c=a.value;o=o[e][c]}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}}function Vt(t){if(!t)return[[]];if(x(t))return[[t]];var e=j(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:Vt(t[r]).map(function(i){return[r].concat(i)})}));return e}function j(t){var e;return(e=[]).concat.apply(e,R([],A(t),!1))}function vr(t){return Tt(t)?t:[t]}function J(t){return t===void 0?[]:vr(t)}function mr(t,e,r){var n,i;if(L(t))return t(e,r.data);var o={};try{for(var s=P(Object.keys(t)),a=s.next();!a.done;a=s.next()){var c=a.value,u=t[c];L(u)?o[c]=u(e,r.data):o[c]=u}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function ci(t){return/^(done|error)\./.test(t)}function li(t,e){var r,n,i=A([[],[]],2),o=i[0],s=i[1];try{for(var a=P(t),c=a.next();!c.done;c=a.next()){var u=c.value;e(u)?o.push(u):s.push(u)}}catch(l){r={error:l}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return[o,s]}function gr(t,e){return xt(t.states,function(r,n){if(!!r){var i=(x(e)?void 0:e[n])||(r?r.current:void 0);if(!!i)return{current:i,states:gr(r,i)}}})}function fi(t,e){return{current:e,states:gr(t,e)}}function Sr(t,e,r,n){$||W(!!t,"Attempting to update undefined context");var i=t&&r.reduce(function(o,s){var a,c,u=s.assignment,l={state:n,action:s,_event:e},h={};if(L(u))h=u(o,e.data,l);else try{for(var y=P(Object.keys(u)),v=y.next();!v.done;v=y.next()){var d=v.value,p=u[d];h[d]=L(p)?p(o,e.data,l):p}}catch(S){a={error:S}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(a)throw a.error}}return Object.assign({},o,h)},t);return i}var W=function(){};$||(W=function(t,e){var r=t instanceof Error?t:void 0;if(!(!r&&t)&&console!==void 0){var n=["Warning: ".concat(e)];r&&n.push(r),console.warn.apply(console,n)}});function Tt(t){return Array.isArray(t)}function L(t){return typeof t=="function"}function x(t){return typeof t=="string"}function wr(t,e){if(!!t)return x(t)?{type:we,name:t,predicate:e?e[t]:void 0}:L(t)?{type:we,name:t.name,predicate:t}:t}var Er=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Jt={},Jt[Er]=function(){return this},Jt[Symbol.observable]=function(){return this};function st(t){return!!t&&"__xstatenode"in t}var di=function(){var t=0;return function(){return t++,t.toString(16)}}();function br(t,e){return x(t)||typeof t=="number"?m({type:t},e):t}function Rt(t,e){if(!x(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=br(t);return m({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function lt(t,e){var r=vr(e).map(function(n){return typeof n>"u"||typeof n=="string"||st(n)?{target:n,event:t}:m(m({},n),{event:t})});return r}function hi(t){if(!(t===void 0||t===oi))return J(t)}function Or(t,e,r,n,i){var o=t.options.guards,s={state:i,cond:e,_event:n};if(e.type===we)return((o==null?void 0:o[e.name])||e.predicate)(r,n.data,s);var a=o==null?void 0:o[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(r,n.data,s)}function pi(t){return typeof t=="string"?{type:t}:t}function Kt(t,e){return"".concat(t,":invocation[").concat(e,"]")}var Wt=Rt({type:ur});function Oe(t,e){return e&&e[t]||void 0}function ft(t,e){var r;if(x(t)||typeof t=="number"){var n=Oe(t,e);L(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(L(t))r={type:t.name||t.toString(),exec:t};else{var n=Oe(t.type,e);if(L(n))r=m(m({},t),{exec:n});else if(n){var i=n.type||t.type;r=m(m(m({},n),t),{type:i})}else r=t}return r}var rt=function(t,e){if(!t)return[];var r=Tt(t)?t:[t];return r.map(function(n){return ft(n,e)})};function Xt(t){var e=ft(t);return m(m({id:x(t)?t:e.id},e),{type:e.type})}function Ar(t){return x(t)?{type:ct,event:t}:nt(t,{to:et.Internal})}function xr(t){return{type:ct,_event:Rt(t.event)}}function nt(t,e){return{to:e?e.to:void 0,type:Ot,event:L(t)?t:br(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:L(t)?t.name:pr(t)}}function Tr(t,e,r,n){var i={_event:r},o=Rt(L(t.event)?t.event(e,r.data,i):t.event),s;if(x(t.delay)){var a=n&&n[t.delay];s=L(a)?a(e,r.data,i):a}else s=L(t.delay)?t.delay(e,r.data,i):t.delay;var c=L(t.to)?t.to(e,r.data,i):t.to;return m(m({},t),{to:c,_event:o,event:o.data,delay:s})}function Ae(t,e){return nt(t,m(m({},e),{to:et.Parent}))}function yi(t,e,r){return nt(e,m(m({},r),{to:t}))}function vi(){return Ae(Se)}function mi(t,e){return nt(t,m(m({},e),{to:function(r,n,i){var o=i._event;return o.origin}}))}var gi=function(t,e){return{context:t,event:e}};function Si(t,e){return t===void 0&&(t=gi),{type:ge,label:e,expr:t}}var Rr=function(t,e,r){return m(m({},t),{value:x(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},Pr=function(t){return{type:sr,sendId:t}};function Nr(t){var e=Xt(t);return{type:T.Start,activity:e,exec:void 0}}function Dr(t){var e=L(t)?t:Xt(t);return{type:T.Stop,activity:e,exec:void 0}}function jr(t,e,r){var n=L(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,o={type:T.Stop,activity:i};return o}var Ur=function(t){return{type:Ht,assignment:t}};function wi(t){return typeof t=="object"&&"type"in t}function Lr(t,e){var r=e?"#".concat(e):"";return"".concat(T.After,"(").concat(t,")").concat(r)}function Pt(t,e){var r="".concat(T.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Fr(t,e){var r="".concat(T.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Cr(t,e){var r="".concat(T.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Ei(t){return{type:T.Pure,get:t}}function bi(t,e){if(!$&&(!t||typeof t=="function")){var r=t;t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=typeof r=="function"?r.apply(void 0,R([],A(n),!1)):r;if(!o)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return o}}return nt(function(n,i){return i},m(m({},e),{to:t}))}function Oi(t,e){return Ae(function(r,n,i){return{type:cr,data:L(t)?t(r,n,i):t}},m(m({},e),{to:et.Parent}))}function Ai(t){return{type:T.Choose,conds:t}}var xi=function(t){var e,r,n=[];try{for(var i=P(t),o=i.next();!o.done;o=i.next())for(var s=o.value,a=0;a<s.length;){if(s[a].type===Ht){n.push(s[a]),s.splice(a,1);continue}a++}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function Gt(t,e,r,n,i,o,s){s===void 0&&(s=!1);var a=s?[]:xi(i),c=a.length?Sr(r,n,a,e):r,u=s?[r]:void 0,l=[];function h(d){var p;switch(d.type){case ct:return xr(d);case Ot:var S=Tr(d,c,n,t.options.delays);return $||W(!x(d.delay)||typeof S.delay=="number","No delay reference for delay expression '".concat(d.delay,"' was found on machine '").concat(t.id,"'")),o&&S.to!==et.Internal&&l.push(S),S;case ge:{var b=Rr(d,c,n);return o==null||o(b,c,n),b}case lr:{var g=d,E=(p=g.conds.find(function(V){var Q=wr(V.cond,t.options.guards);return!Q||Or(t,Q,c,n,o?void 0:e)}))===null||p===void 0?void 0:p.actions;if(!E)return[];var N=A(Gt(t,e,c,n,[rt(J(E),t.options.actions)],o,s),2),U=N[0],C=N[1];return c=C,u==null||u.push(c),U}case fr:{var E=d.get(c,n.data);if(!E)return[];var M=A(Gt(t,e,c,n,[rt(J(E),t.options.actions)],o,s),2),I=M[0],z=M[1];return c=z,u==null||u.push(c),I}case me:{var b=jr(d,c,n);return o==null||o(b,r,n),b}case Ht:{c=Sr(c,n,[d],o?void 0:e),u==null||u.push(c);break}default:var w=ft(d,t.options.actions),D=w.exec;if(o)o(w,c,n);else if(D&&u){var q=u.length-1;w=m(m({},w),{exec:function(V){for(var Q=[],yt=1;yt<arguments.length;yt++)Q[yt-1]=arguments[yt];D.apply(void 0,R([u[q]],A(Q),!1))}})}return w}}function y(d){var p,S,b=[];try{for(var g=P(d),E=g.next();!E.done;E=g.next()){var N=E.value,U=h(N);U&&(b=b.concat(U))}}catch(C){p={error:C}}finally{try{E&&!E.done&&(S=g.return)&&S.call(g)}finally{if(p)throw p.error}}return l.forEach(function(C){o(C,c,n)}),l.length=0,b}var v=j(i.map(y));return[v,c]}const Ti=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:ii,after:Lr,assign:Ur,cancel:Pr,choose:Ai,done:Pt,doneInvoke:Fr,error:Cr,escalate:Oi,forwardTo:bi,getActionFunction:Oe,initEvent:Wt,isActionObject:wi,log:Si,pure:Ei,raise:Ar,resolveActions:Gt,resolveLog:Rr,resolveRaise:xr,resolveSend:Tr,resolveStop:jr,respond:mi,send:nt,sendParent:Ae,sendTo:yi,sendUpdate:vi,start:Nr,stop:Dr,toActionObject:ft,toActionObjects:rt,toActivityDefinition:Xt},Symbol.toStringTag,{value:"Module"}));var Yt=[],Ri=function(t,e){Yt.push(t);var r=e(t);return Yt.pop(),r},Pi=function(t){return t(Yt[Yt.length-1])};function Ir(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Er]=function(){return this},e}function Ni(t,e,r,n){var i,o=pi(t.src),s=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[o.type],a=t.data?mr(t.data,r,n):void 0,c=s?_r(s,t.id,a):Ir(t.id);return c.meta=t,c}function _r(t,e,r){var n=Ir(e);if(n.deferred=!0,st(t)){var i=n.state=Ri(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}var Qt=function(t){return t.type==="atomic"||t.type==="final"};function Mr(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Nt(t){return Mr(t).filter(function(e){return e.type!=="history"})}function Br(t){var e=[t];return Qt(t)?e:e.concat(j(Nt(t).map(Br)))}function Dt(t,e){var r,n,i,o,s,a,c,u,l=new Set(t),h=xe(l),y=new Set(e);try{for(var v=P(y),d=v.next();!d.done;d=v.next())for(var p=d.value,S=p.parent;S&&!y.has(S);)y.add(S),S=S.parent}catch(z){r={error:z}}finally{try{d&&!d.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}var b=xe(y);try{for(var g=P(y),E=g.next();!E.done;E=g.next()){var p=E.value;if(p.type==="compound"&&(!b.get(p)||!b.get(p).length))h.get(p)?h.get(p).forEach(function(w){return y.add(w)}):p.initialStateNodes.forEach(function(w){return y.add(w)});else if(p.type==="parallel")try{for(var N=(s=void 0,P(Nt(p))),U=N.next();!U.done;U=N.next()){var C=U.value;y.has(C)||(y.add(C),h.get(C)?h.get(C).forEach(function(w){return y.add(w)}):C.initialStateNodes.forEach(function(w){return y.add(w)}))}}catch(w){s={error:w}}finally{try{U&&!U.done&&(a=N.return)&&a.call(N)}finally{if(s)throw s.error}}}}catch(z){i={error:z}}finally{try{E&&!E.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}try{for(var M=P(y),I=M.next();!I.done;I=M.next())for(var p=I.value,S=p.parent;S&&!y.has(S);)y.add(S),S=S.parent}catch(z){c={error:z}}finally{try{I&&!I.done&&(u=M.return)&&u.call(M)}finally{if(c)throw c.error}}return y}function kr(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(Qt(n))return n.key}else return{}}var i={};return r.forEach(function(o){i[o.key]=kr(o,e)}),i}function xe(t){var e,r,n=new Map;try{for(var i=P(t),o=i.next();!o.done;o=i.next()){var s=o.value;n.has(s)||n.set(s,[]),s.parent&&(n.has(s.parent)||n.set(s.parent,[]),n.get(s.parent).push(s))}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Di(t,e){var r=Dt([t],e);return kr(t,xe(r))}function jt(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function ji(t){return R([],A(new Set(j(R([],A(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Zt(t,e){return e.type==="compound"?Nt(e).some(function(r){return r.type==="final"&&jt(t,r)}):e.type==="parallel"?Nt(e).every(function(r){return Zt(t,r)}):!1}function Ui(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function $r(t){return new Set(j(t.map(function(e){return e.tags})))}function Hr(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(x(t)||x(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return Hr(t[i],e[i])})}var it=function(){function t(e){var r=this,n;this.actions=[],this.activities=hr,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||hr,this.meta=Ui(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return ji(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=Wt;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=Wt;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),x(e))return[e];var i=Object.keys(e);return i.concat.apply(i,R([],A(i.map(function(o){return n.toStrings(e[o],r).map(function(s){return o+r+s})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=ye(e,["configuration","transitions","tags","machine"]);return m(m({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return Ee(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;$&&W(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),zr={sync:!1,autoForward:!1},Jr;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Jr||(Jr={}));var Li=function(t){return x(t)?m(m({},zr),{name:t}):m(m(m({},zr),{name:di()}),t)};function Fi(t,e){var r=Li(e);return Pi(function(n){if(!$){var i=st(t)||L(t);W(!!n||i,'Attempted to spawn an Actor (ID: "'.concat(st(t)?t.id:"undefined",'") outside of a service. This will have no effect.'))}return n?n.spawn(t,r.name,r):_r(t,r.name)})}function Ci(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function te(t){return m(m({type:zt},t),{toJSON:function(){t.onDone,t.onError;var e=ye(t,["onDone","onError"]);return m(m({},e),{type:zt,src:Ci(t.src)})}})}var dt="",Te="#",Ut="*",ht={},pt=function(t){return t[0]===Te},Ii=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},_i=function(t,e,r){var n=r.slice(0,-1).some(function(o){return!("cond"in o)&&!("in"in o)&&(x(o.target)||st(o.target))}),i=e===dt?"the transient event":"event '".concat(e,"'");W(!n,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Mi=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var o=this,s;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Ii(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:dr),this.id=this.config.id||R([this.machine.key],A(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(s=this.config.schema)!==null&&s!==void 0?s:{},this.description=this.config.description,$||W(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?xt(this.config.states,function(u,l){var h,y=new t(u,{},void 0,{parent:o,key:l});return Object.assign(o.idMap,m((h={},h[y.id]=y,h),y.idMap)),y}):ht;var a=0;function c(u){var l,h;u.order=a++;try{for(var y=P(Mr(u)),v=y.next();!v.done;v=y.next()){var d=v.value;c(d)}}catch(p){l={error:p}}finally{try{v&&!v.done&&(h=y.return)&&h.call(y)}finally{if(l)throw l.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var l=u.event;return l===dt}):dt in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=J(this.config.entry||this.config.onEntry).map(function(u){return ft(u)}),this.onExit=J(this.config.exit||this.config.onExit).map(function(u){return ft(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=J(this.config.invoke).map(function(u,l){var h,y;if(st(u)){var v=Kt(o.id,l);return o.machine.options.services=m((h={},h[v]=u,h),o.machine.options.services),te({src:v,id:v})}else if(x(u.src)){var v=u.id||Kt(o.id,l);return te(m(m({},u),{id:v,src:u.src}))}else if(st(u.src)||L(u.src)){var v=u.id||Kt(o.id,l);return o.machine.options.services=m((y={},y[v]=u.src,y),o.machine.options.services),te(m(m({id:v},u),{src:v}))}else{var d=u.src;return te(m(m({id:Kt(o.id,l)},u),{src:d}))}}),this.activities=J(this.config.activities).concat(this.invoke).map(function(u){return Xt(u)}),this.transition=this.transition.bind(this),this.tags=J(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Br(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,o=n.activities,s=n.guards,a=n.services,c=n.delays;return new t(this.config,{actions:m(m({},i),e.actions),activities:m(m({},o),e.activities),guards:m(m({},s),e.guards),services:m(m({},a),e.services),delays:m(m({},c),e.delays)},r!=null?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return L(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:xt(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===dt,n=this.transitions.filter(function(i){var o=i.eventType===e;return r?o:o||i.eventType===Ut});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(o,s){var a=L(o)?"".concat(e.id,":delay[").concat(s,"]"):o,c=Lr(a,e.id);return e.onEntry.push(nt(c,{delay:o})),e.onExit.push(Pr(c)),c},i=Tt(r)?r.map(function(o,s){var a=n(o.delay,s);return m(m({},o),{event:a})}):j(Object.keys(r).map(function(o,s){var a=r[o],c=x(a)?{target:a}:a,u=isNaN(+o)?o:+o,l=n(u,s);return J(c).map(function(h){return m(m({},h),{event:l,delay:u})})}));return i.map(function(o){var s=o.delay;return m(m({},e.formatTransition(o)),{delay:s})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof it?e.value:At(e,this.delimiter);if(x(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((r={},r[i]=o,r)):[this,this.states[i]]}var s=Object.keys(i),a=[this];return a.push.apply(a,R([],A(j(s.map(function(c){return n.getStateNode(c).getStateNodes(i[c])}))),!1)),a},t.prototype.handles=function(e){var r=pr(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof it?e:it.create(e),n=Array.from(Dt([],this.getStateNodes(r.value)));return new it(m(m({},r),{value:this.resolve(r.value),configuration:n,done:Zt(n,this),tags:$r(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),o=i.next(r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),o=this.getStateNode(i[0]),s=o._transition(e[i[0]],r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionParallelNode=function(e,r,n){var i,o,s={};try{for(var a=P(Object.keys(e)),c=a.next();!c.done;c=a.next()){var u=c.value,l=e[u];if(!!l){var h=this.getStateNode(u),y=h._transition(l,r,n);y&&(s[u]=y)}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}var v=Object.keys(s).map(function(g){return s[g]}),d=j(v.map(function(g){return g.transitions})),p=v.some(function(g){return g.transitions.length>0});if(!p)return this.next(r,n);var S=j(v.map(function(g){return g.entrySet})),b=j(Object.keys(s).map(function(g){return s[g].configuration}));return{transitions:d,entrySet:S,exitSet:j(v.map(function(g){return g.exitSet})),configuration:b,source:r,actions:j(Object.keys(s).map(function(g){return s[g].actions}))}},t.prototype._transition=function(e,r,n){return x(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,Rt(r))},t.prototype.next=function(e,r){var n,i,o=this,s=r.name,a=[],c=[],u;try{for(var l=P(this.getCandidates(s)),h=l.next();!h.done;h=l.next()){var y=h.value,v=y.cond,d=y.in,p=e.context,S=d?x(d)&&pt(d)?e.matches(At(this.getStateNodeById(d).path,this.delimiter)):Ee(At(d,this.delimiter),ai(this.path.slice(0,-2))(e.value)):!0,b=!1;try{b=!v||Or(this.machine,v,p,r,e)}catch(U){throw new Error("Unable to evaluate guard '".concat(v.name||v.type,"' in transition for event '").concat(s,"' in state node '").concat(this.id,`':
`).concat(U.message))}if(b&&S){y.target!==void 0&&(c=y.target),a.push.apply(a,R([],A(y.actions),!1)),u=y;break}}}catch(U){n={error:U}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}if(!!u){if(!c.length)return{transitions:[u],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var g=j(c.map(function(U){return o.getRelativeStateNodes(U,e.historyValue)})),E=!!u.internal,N=[];return E||c.forEach(function(U){N.push.apply(N,R([],A(o.getExternalReentryNodes(U)),!1))}),{transitions:[u],entrySet:N,exitSet:E?[]:[this],configuration:g,source:e,actions:a}}},t.prototype.getExternalReentryNodes=function(e){for(var r=[],n=A(e.order>this.order?[e,this]:[this,e],2),i=n[0],o=n[1];i&&i!==o;)r.push(i),i=i.parent;return i!==o?[]:(r.push(o),r)},t.prototype.getActions=function(e,r,n,i,o,s,a){var c,u,l,h,y=this,v=Dt([],s?this.getStateNodes(s.value):[this]);try{for(var d=P(e),p=d.next();!p.done;p=d.next()){var S=p.value;(!jt(v,S)||jt(n.entrySet,S.parent))&&n.entrySet.push(S)}}catch(w){c={error:w}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}try{for(var b=P(v),g=b.next();!g.done;g=b.next()){var S=g.value;(!jt(e,S)||jt(n.exitSet,S.parent))&&n.exitSet.push(S)}}catch(w){l={error:w}}finally{try{g&&!g.done&&(h=b.return)&&h.call(b)}finally{if(l)throw l.error}}var E=j(n.entrySet.map(function(w){var D=[];if(w.type!=="final")return D;var q=w.parent;if(!q.parent)return D;D.push(Pt(w.id,w.doneData),Pt(q.id,w.doneData?mr(w.doneData,i,o):void 0));var V=q.parent;return V.type==="parallel"&&Nt(V).every(function(Q){return Zt(n.configuration,Q)})&&D.push(Pt(V.id)),D}));n.exitSet.sort(function(w,D){return D.order-w.order}),n.entrySet.sort(function(w,D){return w.order-D.order});var N=new Set(n.entrySet),U=new Set(n.exitSet),C=Array.from(N).map(function(w){var D=w.onEntry,q=w.activities.map(function(V){return Nr(V)});return rt(a?R(R([],A(D),!1),A(q),!1):R(R([],A(q),!1),A(D),!1),y.machine.options.actions)}).concat([E.map(Ar)]),M=Array.from(U).map(function(w){return rt(R(R([],A(w.onExit),!1),A(w.activities.map(function(D){return Dr(D)})),!1),y.machine.options.actions)}),I=M.concat([rt(n.actions,this.machine.options.actions)]).concat(C);if(r){var z=rt(j(R([],A(e),!1).sort(function(w,D){return D.order-w.order}).map(function(w){return w.onExit})),this.machine.options.actions).filter(function(w){return w.type!==ct&&(w.type!==Ot||!!w.to&&w.to!==et.Internal)});return I.concat([z])}return I},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var o=Rt(r),s;if(e instanceof it)s=n===void 0?e:this.resolveState(it.from(e,n));else{var a=x(e)?this.resolve(qt(this.getResolvedPath(e))):this.resolve(e),c=n!=null?n:this.machine.context;s=this.resolveState(it.from(a,c))}if(!$&&o.name===Ut)throw new Error("An event cannot have the wildcard type ('".concat(Ut,"')"));if(this.strict&&!this.events.includes(o.name)&&!ci(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var u=this._transition(s.value,s,o)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},l=Dt([],this.getStateNodes(s.value)),h=u.configuration.length?Dt(l,u.configuration):l;return u.configuration=R([],A(h),!1),this.resolveTransition(u,s,s.context,i,o)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var o,s=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(o=e.actions).unshift.apply(o,R([],A(s),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,o){var s,a,c,u,l=this;o===void 0&&(o=Wt);var h=e.configuration,y=!r||e.transitions.length>0,v=y?e.configuration:r?r.configuration:[],d=Zt(v,this),p=y?Di(this.machine,h):void 0,S=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,b=this.getActions(new Set(v),d,e,n,o,r,i),g=r?m({},r.activities):{};try{for(var E=P(b),N=E.next();!N.done;N=E.next()){var U=N.value;try{for(var C=(c=void 0,P(U)),M=C.next();!M.done;M=C.next()){var I=M.value;I.type===ve?g[I.activity.id||I.activity.type]=I:I.type===me&&(g[I.activity.id||I.activity.type]=!1)}}catch(B){c={error:B}}finally{try{M&&!M.done&&(u=C.return)&&u.call(C)}finally{if(c)throw c.error}}}}catch(B){s={error:B}}finally{try{N&&!N.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}var z=A(Gt(this,r,n,o,b,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),w=z[0],D=z[1],q=A(li(w,function(B){return B.type===ct||B.type===Ot&&B.to===et.Internal}),2),V=q[0],Q=q[1],yt=w.filter(function(B){var mt;return B.type===ve&&((mt=B.activity)===null||mt===void 0?void 0:mt.type)===zt}),Hi=yt.reduce(function(B,mt){return B[mt.activity.id]=Ni(mt.activity,l.machine,D,o),B},r?m({},r.children):{}),re=new it({value:p||r.value,context:D,_event:o,_sessionid:r?r._sessionid:null,historyValue:p?S?fi(S,p):void 0:r?r.historyValue:void 0,history:!p||e.source?r:void 0,actions:p?Q:[],activities:p?g:r?r.activities:{},events:[],configuration:v,transitions:e.transitions,children:Hi,done:d,tags:$r(v),machine:this}),Wr=n!==D;re.changed=o.name===Se||Wr;var vt=re.history;vt&&delete vt.history;var Xr=!d&&(this._transient||h.some(function(B){return B._transient}));if(!y&&(!Xr||o.name===dt))return re;var K=re;if(!d)for(Xr&&(K=this.resolveRaisedTransition(K,{type:ar},o,i));V.length;){var zi=V.shift();K=this.resolveRaisedTransition(K,zi._event,o,i)}var Ji=K.changed||(vt?!!K.actions.length||Wr||typeof vt.value!=typeof K.value||!Hr(K.value,vt.value):void 0);return K.changed=Ji,K.history=vt,K},t.prototype.getStateNode=function(e){if(pt(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=pt(e)?e.slice(Te.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&pt(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=be(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||ht;switch(this.type){case"parallel":return xt(this.initialStateValue,function(o,s){return o?n.getStateNode(s).resolve(e[s]||o):ht});case"compound":if(x(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?xt(e,function(o,s){return o?n.getStateNode(s).resolve(o):ht}):this.initialStateValue||{};default:return e||ht}},t.prototype.getResolvedPath=function(e){if(pt(e)){var r=this.machine.idMap[e.slice(Te.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return be(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=yr(this.states,function(n){return n.initialStateValue||ht},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=Qt(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:R([],A(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;x(r.target)?e=pt(r.target)?qt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Qt(this))return[this];if(this.type==="compound"&&!this.initial)return $||W(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=Vt(this.initialStateValue);return j(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=A(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var o=this.getStateNode(n);if(o.type==="history")return o.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:yr(this.states,function(r,n){if(!e)return r.historyValue();var i=x(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?j(Vt(i).map(function(s){return n.getFromRelativePath(s)})):n.initialStateNodes}var o=ui(n.path,"states")(e).current;return x(o)?[n.getStateNode(o)]:j(Vt(o).map(function(s){return r.history==="deep"?n.getFromRelativePath(s):[n.states[s[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=j(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var o=this.states,s=new Set(this.ownEvents);if(o)try{for(var a=P(Object.keys(o)),c=a.next();!c.done;c=a.next()){var u=c.value,l=o[u];if(l.states)try{for(var h=(n=void 0,P(l.events)),y=h.next();!y.done;y=h.next()){var v=y.value;s.add("".concat(v))}}catch(d){n={error:d}}finally{try{y&&!y.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!x(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var o=i?r.key+n:n;if(r.parent)try{var s=r.parent.getStateNodeByPath(o);return s}catch(a){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(a.message))}else return r.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var r=this,n=hi(e.target),i="internal"in e?e.internal:n?n.some(function(c){return x(c)&&c[0]===r.delimiter}):!0,o=this.machine.options.guards,s=this.resolveTarget(n),a=m(m({},e),{actions:rt(J(e.actions)),cond:wr(e.cond,o),target:s,source:this,internal:i,eventType:e.event,toJSON:function(){return m(m({},a),{target:a.target?a.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return a},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,s=Ut,a=o[s],c=a===void 0?[]:a,u=ye(o,[typeof s=="symbol"?s:s+""]);i=j(Object.keys(u).map(function(g){!$&&g===dt&&W(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var E=lt(g,u[g]);return $||_i(n,g,E),E}).concat(lt(Ut,c)))}var l=this.config.always?lt("",this.config.always):[],h=this.config.onDone?lt(String(Pt(this.id)),this.config.onDone):[];$||W(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var y=j(this.invoke.map(function(g){var E=[];return g.onDone&&E.push.apply(E,R([],A(lt(String(Fr(g.id)),g.onDone)),!1)),g.onError&&E.push.apply(E,R([],A(lt(String(Cr(g.id)),g.onError)),!1)),E})),v=this.after,d=j(R(R(R(R([],A(h),!1),A(y),!1),A(i),!1),A(l),!1).map(function(g){return J(g).map(function(E){return n.formatTransition(E)})}));try{for(var p=P(v),S=p.next();!S.done;S=p.next()){var b=S.value;d.push(b)}}catch(g){e={error:g}}finally{try{S&&!S.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}return d},t}(),qr=!1;function Vr(t,e){return!$&&!t.predictableActionArguments&&!qr&&(qr=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new Mi(t,e)}var H=Ur,Re=nt;const Pe={progress:null,loaded:0,error:null},Kr=()=>Vr({predictableActionArguments:!0,schema:{context:{},events:{}},tsTypes:{},context:{...Pe},initial:"idle",on:{DESTROY:{actions:"sendDestroy",target:"stopped"}},states:{idle:{on:{ADD:{actions:"addFile"},UPLOAD:{cond:"hasFile",target:"uploading"}}},uploading:{entry:"resetProgress",on:{UPLOAD_PROGRESS:{actions:["incrementProgress","sendProgress"]},UPLOAD_DONE:"uploaded",UPLOAD_ERROR:"error",CANCEL:"idle"},invoke:{src:"uploadFile"}},uploaded:{entry:["setFileMetadata","sendDone"]},error:{entry:["setError","sendError"]},stopped:{type:"final"}}},{guards:{hasFile:(t,e)=>!!t.file||!!e.file},actions:{incrementProgress:H({loaded:(t,{loaded:e})=>e,progress:(t,{progress:e})=>e}),setFileMetadata:H({id:(t,{id:e})=>e,bucketId:(t,{bucketId:e})=>e,progress:t=>100}),setError:H({error:(t,{error:e})=>e}),sendProgress:()=>{},sendError:()=>{},sendDestroy:()=>{},sendDone:()=>{},resetProgress:H({progress:t=>null,loaded:t=>0}),addFile:H({file:(t,{file:e})=>e,bucketId:(t,{bucketId:e})=>e,id:(t,{id:e})=>e})},services:{uploadFile:(t,e)=>r=>{const n={"Content-Type":"multipart/form-data"},i=e.id||t.id;i&&(n["x-nhost-file-id"]=i);const o=e.bucketId||t.bucketId;o&&(n["x-nhost-bucket-id"]=o);const s=e.file||t.file;n["x-nhost-file-name"]=e.name||s.name;const a=new FormData;a.append("file",s),e.adminSecret&&(n["x-hasura-admin-secret"]=e.adminSecret),e.accessToken&&(n.Authorization=`Bearer ${e.accessToken}`);let c=0;const u=new AbortController;return ir.post(e.url+"/files",a,{headers:n,signal:u.signal,onUploadProgress:l=>{const h=l.total?Math.round(l.loaded*s.size/l.total):0,y=h-c;c=h,r({type:"UPLOAD_PROGRESS",progress:l.total?Math.round(h*100/l.total):0,loaded:h,additions:y})}}).then(({data:{id:l,bucketId:h}})=>{r({type:"UPLOAD_DONE",id:l,bucketId:h})}).catch(({response:l,message:h})=>{var y,v,d,p,S;r({type:"UPLOAD_ERROR",error:{status:(y=l==null?void 0:l.status)!=null?y:0,message:((d=(v=l==null?void 0:l.data)==null?void 0:v.error)==null?void 0:d.message)||h,error:((S=(p=l==null?void 0:l.data)==null?void 0:p.error)==null?void 0:S.message)||h}})}),()=>{u.abort()}}}}),{pure:Ne,sendParent:ee}=Ti,Bi=()=>Vr({id:"files-list",schema:{context:{},events:{}},tsTypes:{},predictableActionArguments:!0,context:{progress:null,files:[],loaded:0,total:0},initial:"idle",on:{UPLOAD:{cond:"hasFileToDownload",actions:"addItem",target:"uploading"},ADD:{actions:"addItem"},REMOVE:{actions:"removeItem"}},states:{idle:{entry:["resetProgress","resetLoaded","resetTotal"],on:{CLEAR:{actions:"clearList",target:"idle"}}},uploading:{entry:["upload","startProgress","resetLoaded","resetTotal"],on:{UPLOAD_PROGRESS:{actions:["incrementProgress"]},UPLOAD_DONE:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],UPLOAD_ERROR:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],CANCEL:{actions:"cancel",target:"idle"}}},uploaded:{entry:"setUploaded",on:{CLEAR:{actions:"clearList",target:"idle"}}},error:{on:{CLEAR:{actions:"clearList",target:"idle"}}}}},{guards:{hasFileToDownload:(t,e)=>t.files.some(r=>r.getSnapshot().matches("idle"))||!!e.files,isAllUploaded:t=>t.files.every(e=>{var r;return(r=e.getSnapshot())==null?void 0:r.matches("uploaded")}),isAllUploadedOrError:t=>t.files.every(e=>{const r=e.getSnapshot();return(r==null?void 0:r.matches("error"))||(r==null?void 0:r.matches("uploaded"))})},actions:{incrementProgress:H((t,e)=>{const r=t.loaded+e.additions,n=Math.round(r*100/t.total);return{...t,loaded:r,progress:n}}),setUploaded:H({progress:t=>100,loaded:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetTotal:H({total:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>!e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetLoaded:H({loaded:t=>0}),startProgress:H({progress:t=>0}),resetProgress:H({progress:t=>null}),addItem:H((t,{files:e,bucketId:r})=>{const n=e?Array.isArray(e)?e:"length"in e?Array.from(e):[e]:[],i=t.total+n.reduce((s,a)=>s+a.size,0),o=Math.round(t.loaded*100/i);return{files:[...t.files,...n.map(s=>Fi(Kr().withConfig({actions:{sendProgress:ee((a,{additions:c})=>({type:"UPLOAD_PROGRESS",additions:c})),sendDone:ee("UPLOAD_DONE"),sendError:ee("UPLOAD_ERROR"),sendDestroy:ee("REMOVE")}}).withContext({...Pe,file:s,bucketId:r}),{sync:!0}))],total:i,loaded:t.loaded,progress:o}}),removeItem:H({files:t=>t.files.filter(e=>{var n,i;const r=(n=e.getSnapshot())==null?void 0:n.matches("stopped");return r&&((i=e.stop)==null||i.call(e)),!r})}),clearList:Ne(t=>t.files.map(e=>Re({type:"DESTROY"},{to:e.id}))),upload:Ne((t,e)=>t.files.map(r=>Re(e,{to:r.id}))),cancel:Ne(t=>t.files.map(e=>Re({type:"CANCEL"},{to:e.id})))}}),ki=async(t,e,r)=>new Promise(n=>{e.send({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,...r}),e.subscribe(i=>{var o;i.matches("error")?n({error:i.context.error,isError:!0,isUploaded:!1}):i.matches("uploaded")&&n({error:null,isError:!1,isUploaded:!0,id:i.context.id,bucketId:i.context.id,name:(o=i.context.file)==null?void 0:o.name})})}),$i=async(t,e,r)=>new Promise(n=>{e.send({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,bucketId:r==null?void 0:r.bucketId,files:r==null?void 0:r.files}),e.onTransition(i=>{i.matches("error")?n({errors:i.context.files.filter(o=>{var s;return(s=o.getSnapshot())==null?void 0:s.context.error}),isError:!0,files:[]}):i.matches("uploaded")&&n({errors:[],isError:!1,files:i.context.files})})});F.HasuraStorageApi=or,F.HasuraStorageClient=Zn,F.INITIAL_FILE_CONTEXT=Pe,F.createFileUploadMachine=Kr,F.createMultipleFilesUploadMachine=Bi,F.uploadFilePromise=ki,F.uploadMultipleFilesPromise=$i,Object.defineProperties(F,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=hasura-storage-js.umd.js.map
