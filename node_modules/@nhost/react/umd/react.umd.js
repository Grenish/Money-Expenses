(function(I,D){typeof exports=="object"&&typeof module<"u"?D(exports,require("react"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","react/jsx-runtime"],D):(I=typeof globalThis<"u"?globalThis:I||self,D(I["@nhost/react"]={},I.React,I._jsx))})(this,function(I,D,it){"use strict";const Gs=t=>t&&typeof t=="object"&&"default"in t?t:{default:t};function Hs(t){if(t&&t.__esModule)return t;const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const Ot=Gs(D),qs=Hs(D);function Sr(t){this.message=t}Sr.prototype=new Error,Sr.prototype.name="InvalidCharacterError";var In=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Sr("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,o="";n=e.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?o+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function Js(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(In(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return In(e)}}function At(t){this.message=t}function Rn(t,e){if(typeof t!="string")throw new At("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(Js(t.split(".")[r]))}catch(n){throw new At("Invalid token specified: "+n.message)}}At.prototype=new Error,At.prototype.name="InvalidTokenError";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var w=function(){return w=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},w.apply(this,arguments)};function Er(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function C(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function $(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var M;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(M||(M={}));var fe;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(fe||(fe={}));var xt=M.Start,kt=M.Stop,Ne=M.Raise,De=M.Send,wr=M.Cancel,Pn=M.NullEvent,It=M.Assign,Ws=M.After,Ys=M.DoneState,Rt=M.Log,Nn=M.Init,Pt=M.Invoke,Qs=M.ErrorExecution,Tr=M.ErrorPlatform,br=M.ErrorCustom,Nt=M.Update,Dn=M.Choose,Un=M.Pure;const Xs=Object.freeze(Object.defineProperty({__proto__:null,after:Ws,assign:It,cancel:wr,choose:Dn,doneState:Ys,error:br,errorExecution:Qs,errorPlatform:Tr,init:Nn,invoke:Pt,log:Rt,nullEvent:Pn,pure:Un,raise:Ne,send:De,start:xt,stop:kt,update:Nt},Symbol.toStringTag,{value:"Module"}));var _n=".",Cn={},Or="xstate.guard",Zs="",B=process.env.NODE_ENV==="production",Dt;function Ar(t,e,r){r===void 0&&(r=_n);var n=st(t,r),i=st(e,r);return L(i)?L(n)?i===n:!1:L(n)?n in i:Object.keys(n).every(function(s){return s in i?Ar(n[s],i[s]):!1})}function Ln(t){try{return L(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function xr(t,e){try{return Be(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function eo(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function st(t,e){if(eo(t))return t.value;if(Be(t))return Ut(t);if(typeof t!="string")return t;var r=xr(t,e);return Ut(r)}function Ut(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function ot(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var s=n[i];r[s]=e(t[s],s,t,i)}return r}function jn(t,e,r){var n,i,s={};try{for(var o=C(Object.keys(t)),a=o.next();!a.done;a=o.next()){var u=a.value,c=t[u];!r(c)||(s[u]=e(c,u,t))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var to=function(t){return function(e){var r,n,i=e;try{for(var s=C(t),o=s.next();!o.done;o=s.next()){var a=o.value;i=i[a]}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}};function ro(t,e){return function(r){var n,i,s=r;try{for(var o=C(t),a=o.next();!a.done;a=o.next()){var u=a.value;s=s[e][u]}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}}function _t(t){if(!t)return[[]];if(L(t))return[[t]];var e=z(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:_t(t[r]).map(function(i){return[r].concat(i)})}));return e}function z(t){var e;return(e=[]).concat.apply(e,$([],U(t),!1))}function Mn(t){return Be(t)?t:[t]}function oe(t){return t===void 0?[]:Mn(t)}function Ct(t,e,r){var n,i;if(F(t))return t(e,r.data);var s={};try{for(var o=C(Object.keys(t)),a=o.next();!a.done;a=o.next()){var u=a.value,c=t[u];F(c)?s[u]=c(e,r.data):s[u]=c}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function no(t){return/^(done|error)\./.test(t)}function Fn(t){return!!(t instanceof Promise||t!==null&&(F(t)||typeof t=="object")&&F(t.then))}function io(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function so(t,e){var r,n,i=U([[],[]],2),s=i[0],o=i[1];try{for(var a=C(t),u=a.next();!u.done;u=a.next()){var c=u.value;e(c)?s.push(c):o.push(c)}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return[s,o]}function Vn(t,e){return ot(t.states,function(r,n){if(!!r){var i=(L(e)?void 0:e[n])||(r?r.current:void 0);if(!!i)return{current:i,states:Vn(r,i)}}})}function oo(t,e){return{current:e,states:Vn(t,e)}}function $n(t,e,r,n){B||J(!!t,"Attempting to update undefined context");var i=t&&r.reduce(function(s,o){var a,u,c=o.assignment,l={state:n,action:o,_event:e},v={};if(F(c))v=c(s,e.data,l);else try{for(var d=C(Object.keys(c)),p=d.next();!p.done;p=d.next()){var f=p.value,h=c[f];v[f]=F(h)?h(s,e.data,l):h}}catch(m){a={error:m}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}return Object.assign({},s,v)},t);return i}var J=function(){};B||(J=function(t,e){var r=t instanceof Error?t:void 0;if(!(!r&&t)&&console!==void 0){var n=["Warning: ".concat(e)];r&&n.push(r),console.warn.apply(console,n)}});function Be(t){return Array.isArray(t)}function F(t){return typeof t=="function"}function L(t){return typeof t=="string"}function Bn(t,e){if(!!t)return L(t)?{type:Or,name:t,predicate:e?e[t]:void 0}:F(t)?{type:Or,name:t.name,predicate:t}:t}function ao(t){try{return"subscribe"in t&&F(t.subscribe)}catch{return!1}}var Te=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Dt={},Dt[Te]=function(){return this},Dt[Symbol.observable]=function(){return this};function ve(t){return!!t&&"__xstatenode"in t}function co(t){return!!t&&typeof t.send=="function"}var uo=function(){var t=0;return function(){return t++,t.toString(16)}}();function kr(t,e){return L(t)||typeof t=="number"?w({type:t},e):t}function Y(t,e){if(!L(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=kr(t);return w({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function ze(t,e){var r=Mn(e).map(function(n){return typeof n>"u"||typeof n=="string"||ve(n)?{target:n,event:t}:w(w({},n),{event:t})});return r}function lo(t){if(!(t===void 0||t===Zs))return oe(t)}function fo(t,e,r){if(!B){var n=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(t,"'.").concat(n));else{var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(t,"'. ").concat(n," Current error is '").concat(e,"'.").concat(i))}}}function zn(t,e,r,n,i){var s=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===Or)return((s==null?void 0:s[e.name])||e.predicate)(r,n.data,o);var a=s==null?void 0:s[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(r,n.data,o)}function Kn(t){return typeof t=="string"?{type:t}:t}function at(t,e,r){var n=function(){},i=typeof t=="object",s=i?t:null;return{next:((i?t.next:t)||n).bind(s),error:((i?t.error:e)||n).bind(s),complete:((i?t.complete:r)||n).bind(s)}}function Lt(t,e){return"".concat(t,":invocation[").concat(e,"]")}var Ue=Y({type:Nn});function jt(t,e){return e&&e[t]||void 0}function Ke(t,e){var r;if(L(t)||typeof t=="number"){var n=jt(t,e);F(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(F(t))r={type:t.name||t.toString(),exec:t};else{var n=jt(t.type,e);if(F(n))r=w(w({},t),{exec:n});else if(n){var i=n.type||t.type;r=w(w(w({},n),t),{type:i})}else r=t}return r}var me=function(t,e){if(!t)return[];var r=Be(t)?t:[t];return r.map(function(n){return Ke(n,e)})};function Mt(t){var e=Ke(t);return w(w({id:L(t)?t:e.id},e),{type:e.type})}function Gn(t){return L(t)?{type:Ne,event:t}:be(t,{to:fe.Internal})}function Hn(t){return{type:Ne,_event:Y(t.event)}}function be(t,e){return{to:e?e.to:void 0,type:De,event:F(t)?t:kr(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:F(t)?t.name:Ln(t)}}function qn(t,e,r,n){var i={_event:r},s=Y(F(t.event)?t.event(e,r.data,i):t.event),o;if(L(t.delay)){var a=n&&n[t.delay];o=F(a)?a(e,r.data,i):a}else o=F(t.delay)?t.delay(e,r.data,i):t.delay;var u=F(t.to)?t.to(e,r.data,i):t.to;return w(w({},t),{to:u,_event:s,event:s.data,delay:o})}function Ir(t,e){return be(t,w(w({},e),{to:fe.Parent}))}function ho(t,e,r){return be(e,w(w({},r),{to:t}))}function po(){return Ir(Nt)}function vo(t,e){return be(t,w(w({},e),{to:function(r,n,i){var s=i._event;return s.origin}}))}var mo=function(t,e){return{context:t,event:e}};function yo(t,e){return t===void 0&&(t=mo),{type:Rt,label:e,expr:t}}var Jn=function(t,e,r){return w(w({},t),{value:L(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},Wn=function(t){return{type:wr,sendId:t}};function Yn(t){var e=Mt(t);return{type:M.Start,activity:e,exec:void 0}}function Qn(t){var e=F(t)?t:Mt(t);return{type:M.Stop,activity:e,exec:void 0}}function Xn(t,e,r){var n=F(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,s={type:M.Stop,activity:i};return s}var Zn=function(t){return{type:It,assignment:t}};function go(t){return typeof t=="object"&&"type"in t}function ei(t,e){var r=e?"#".concat(e):"";return"".concat(M.After,"(").concat(t,")").concat(r)}function ct(t,e){var r="".concat(M.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function ut(t,e){var r="".concat(M.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Ge(t,e){var r="".concat(M.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function So(t){return{type:M.Pure,get:t}}function Eo(t,e){if(!B&&(!t||typeof t=="function")){var r=t;t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=typeof r=="function"?r.apply(void 0,$([],U(n),!1)):r;if(!s)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return s}}return be(function(n,i){return i},w(w({},e),{to:t}))}function wo(t,e){return Ir(function(r,n,i){return{type:br,data:F(t)?t(r,n,i):t}},w(w({},e),{to:fe.Parent}))}function To(t){return{type:M.Choose,conds:t}}var bo=function(t){var e,r,n=[];try{for(var i=C(t),s=i.next();!s.done;s=i.next())for(var o=s.value,a=0;a<o.length;){if(o[a].type===It){n.push(o[a]),o.splice(a,1);continue}a++}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function lt(t,e,r,n,i,s,o){o===void 0&&(o=!1);var a=o?[]:bo(i),u=a.length?$n(r,n,a,e):r,c=o?[r]:void 0,l=[];function v(f){var h;switch(f.type){case Ne:return Hn(f);case De:var m=qn(f,u,n,t.options.delays);return B||J(!L(f.delay)||typeof m.delay=="number","No delay reference for delay expression '".concat(f.delay,"' was found on machine '").concat(t.id,"'")),s&&m.to!==fe.Internal&&l.push(m),m;case Rt:{var E=Jn(f,u,n);return s==null||s(E,u,n),E}case Dn:{var T=f,S=(h=T.conds.find(function(ee){var se=Bn(ee.cond,t.options.guards);return!se||zn(t,se,u,n,s?void 0:e)}))===null||h===void 0?void 0:h.actions;if(!S)return[];var b=U(lt(t,e,u,n,[me(oe(S),t.options.actions)],s,o),2),x=b[0],k=b[1];return u=k,c==null||c.push(u),x}case Un:{var S=f.get(u,n.data);if(!S)return[];var R=U(lt(t,e,u,n,[me(oe(S),t.options.actions)],s,o),2),P=R[0],N=R[1];return u=N,c==null||c.push(u),P}case kt:{var E=Xn(f,u,n);return s==null||s(E,r,n),E}case It:{u=$n(u,n,[f],s?void 0:e),c==null||c.push(u);break}default:var A=Ke(f,t.options.actions),V=A.exec;if(s)s(A,u,n);else if(V&&c){var H=c.length-1;A=w(w({},A),{exec:function(ee){for(var se=[],Re=1;Re<arguments.length;Re++)se[Re-1]=arguments[Re];V.apply(void 0,$([c[H]],U(se),!1))}})}return A}}function d(f){var h,m,E=[];try{for(var T=C(f),S=T.next();!S.done;S=T.next()){var b=S.value,x=v(b);x&&(E=E.concat(x))}}catch(k){h={error:k}}finally{try{S&&!S.done&&(m=T.return)&&m.call(T)}finally{if(h)throw h.error}}return l.forEach(function(k){s(k,u,n)}),l.length=0,E}var p=z(i.map(d));return[p,u]}const Oo=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:Xs,after:ei,assign:Zn,cancel:Wn,choose:To,done:ct,doneInvoke:ut,error:Ge,escalate:wo,forwardTo:Eo,getActionFunction:jt,initEvent:Ue,isActionObject:go,log:yo,pure:So,raise:Gn,resolveActions:lt,resolveLog:Jn,resolveRaise:Hn,resolveSend:qn,resolveStop:Xn,respond:vo,send:be,sendParent:Ir,sendTo:ho,sendUpdate:po,start:Yn,stop:Qn,toActionObject:Ke,toActionObjects:me,toActivityDefinition:Mt},Symbol.toStringTag,{value:"Module"}));var Ft=[],He=function(t,e){Ft.push(t);var r=e(t);return Ft.pop(),r},Ao=function(t){return t(Ft[Ft.length-1])};function ti(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Te]=function(){return this},e}function xo(t,e,r,n){var i,s=Kn(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],a=t.data?Ct(t.data,r,n):void 0,u=o?Rr(o,t.id,a):ti(t.id);return u.meta=t,u}function Rr(t,e,r){var n=ti(e);if(n.deferred=!0,ve(t)){var i=n.state=He(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function ko(t){try{return typeof t.send=="function"}catch{return!1}}function Io(t){return ko(t)&&"id"in t}function Ro(t){var e;return w((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Te]=function(){return this},e),t)}var Vt=function(t){return t.type==="atomic"||t.type==="final"};function ri(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function dt(t){return ri(t).filter(function(e){return e.type!=="history"})}function ni(t){var e=[t];return Vt(t)?e:e.concat(z(dt(t).map(ni)))}function ft(t,e){var r,n,i,s,o,a,u,c,l=new Set(t),v=Pr(l),d=new Set(e);try{for(var p=C(d),f=p.next();!f.done;f=p.next())for(var h=f.value,m=h.parent;m&&!d.has(m);)d.add(m),m=m.parent}catch(N){r={error:N}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var E=Pr(d);try{for(var T=C(d),S=T.next();!S.done;S=T.next()){var h=S.value;if(h.type==="compound"&&(!E.get(h)||!E.get(h).length))v.get(h)?v.get(h).forEach(function(A){return d.add(A)}):h.initialStateNodes.forEach(function(A){return d.add(A)});else if(h.type==="parallel")try{for(var b=(o=void 0,C(dt(h))),x=b.next();!x.done;x=b.next()){var k=x.value;d.has(k)||(d.add(k),v.get(k)?v.get(k).forEach(function(A){return d.add(A)}):k.initialStateNodes.forEach(function(A){return d.add(A)}))}}catch(A){o={error:A}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(s=T.return)&&s.call(T)}finally{if(i)throw i.error}}try{for(var R=C(d),P=R.next();!P.done;P=R.next())for(var h=P.value,m=h.parent;m&&!d.has(m);)d.add(m),m=m.parent}catch(N){u={error:N}}finally{try{P&&!P.done&&(c=R.return)&&c.call(R)}finally{if(u)throw u.error}}return d}function ii(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(Vt(n))return n.key}else return{}}var i={};return r.forEach(function(s){i[s.key]=ii(s,e)}),i}function Pr(t){var e,r,n=new Map;try{for(var i=C(t),s=i.next();!s.done;s=i.next()){var o=s.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Po(t,e){var r=ft([t],e);return ii(t,Pr(r))}function ht(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function No(t){return $([],U(new Set(z($([],U(t.map(function(e){return e.ownEvents})),!1)))),!1)}function $t(t,e){return e.type==="compound"?dt(e).some(function(r){return r.type==="final"&&ht(t,r)}):e.type==="parallel"?dt(e).every(function(r){return $t(t,r)}):!1}function Do(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function si(t){return new Set(z(t.map(function(e){return e.tags})))}function oi(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(L(t)||L(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return oi(t[i],e[i])})}function Uo(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function _o(t,e){var r=t.exec,n=w(w({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var ae=function(){function t(e){var r=this,n;this.actions=[],this.activities=Cn,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Cn,this.meta=Do(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return No(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=Ue;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=Ue;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),L(e))return[e];var i=Object.keys(e);return i.concat.apply(i,$([],U(i.map(function(s){return n.toStrings(e[s],r).map(function(o){return s+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=Er(e,["configuration","transitions","tags","machine"]);return w(w({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return Ar(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;B&&J(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),Co={deferEvents:!1},ai=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=w(w({},Co),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),Nr=new Map,Lo=0,Bt={bookId:function(){return"x:".concat(Lo++)},register:function(t,e){return Nr.set(t,e),t},get:function(t){return Nr.get(t)},free:function(t){Nr.delete(t)}};function Dr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;B||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function jo(){var t=Dr();if(t&&"__xstate__"in t)return t.__xstate__}function Mo(t){if(!!Dr()){var e=jo();e&&e.register(t)}}function Fo(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var c=i.shift();r=t.transition(r,c,u),n.forEach(function(l){return l.next(r)})}s=!1}},a=Ro({id:e.id,send:function(c){i.push(c),o()},getSnapshot:function(){return r},subscribe:function(c,l,v){var d=at(c,l,v);return n.add(d),d.next(r),{unsubscribe:function(){n.delete(d)}}}}),u={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return r=t.start?t.start(u):r,a}var Ur={sync:!1,autoForward:!1},q;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(q||(q={}));var Vo=function(){function t(e,r){r===void 0&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=q.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(l,v){if(Be(l))return n.batch(l),n.state;var d=Y(kr(l,v));if(n.status===q.Stopped)return B||J(!1,'Event "'.concat(d.name,'" was sent to stopped service "').concat(n.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(d.data))),n.state;if(n.status!==q.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(d.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(d.data)));return n.scheduler.schedule(function(){n.forward(d);var p=n._nextState(d);n.update(p,d)}),n._state},this.sendTo=function(l,v,d){var p=n.parent&&(v===fe.Parent||n.parent.id===v),f=p?n.parent:L(v)?n.children.get(v)||Bt.get(v):co(v)?v:void 0;if(!f){if(!p)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(n.id,"'."));B||J(!1,"Service '".concat(n.id,"' has no parent: unable to send event ").concat(l.type));return}if("machine"in f){if(n.status!==q.Stopped||n.parent!==f||n.state.done){var h=w(w({},l),{name:l.name===br?"".concat(Ge(n.id)):l.name,origin:n.sessionId});!d&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([f,h]):f.send(h)}}else!d&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([f,l.data]):f.send(l.data)},this._exec=function(l,v,d,p){p===void 0&&(p=n.machine.options.actions);var f=l.exec||jt(l.type,p),h=F(f)?f:f?f.exec:l.exec;if(h)try{return h(v,d.data,n.machine.config.predictableActionArguments?{action:l,_event:d}:{action:l,state:n.state,_event:d})}catch(H){throw n.parent&&n.parent.send({type:"xstate.error",data:H}),H}switch(l.type){case De:var m=l;if(typeof m.delay=="number"){n.defer(m);return}else m.to?n.sendTo(m._event,m.to,d===Ue):n.send(m._event);break;case wr:n.cancel(l.sendId);break;case xt:{if(n.status!==q.Running)return;var E=l.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[E.id||E.type])break;if(E.type===M.Invoke){var T=Kn(E.src),S=n.machine.options.services?n.machine.options.services[T.type]:void 0,b=E.id,x=E.data;B||J(!("forward"in E),"`forward` property is deprecated (found in invocation of '".concat(E.src,"' in in machine '").concat(n.machine.id,"'). ")+"Please use `autoForward` instead.");var k="autoForward"in E?E.autoForward:!!E.forward;if(!S){B||J(!1,"No service found for invocation '".concat(E.src,"' in machine '").concat(n.machine.id,"'."));return}var R=x?Ct(x,v,d):void 0;if(typeof S=="string")return;var P=F(S)?S(v,d.data,{data:R,src:T,meta:E.meta}):S;if(!P)return;var N=void 0;ve(P)&&(P=R?P.withContext(R):P,N={autoForward:k}),n.spawn(P,b,N)}else n.spawnActivity(E);break}case kt:{n.stopChild(l.activity.id);break}case Rt:var A=l.label,V=l.value;A?n.logger(A,V):n.logger(V);break;default:B||J(!1,"No implementation found for action type '".concat(l.type,"'"));break}};var i=w(w({},t.defaultOptions),r),s=i.clock,o=i.logger,a=i.parent,u=i.id,c=u!==void 0?u:e.id;this.id=c,this.logger=o,this.clock=s,this.parent=a,this.options=i,this.scheduler=new ai({deferEvents:this.options.deferEvents}),this.sessionId=Bt.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:He(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return B||J(this.status!==q.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var s=C(e.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,e,r)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,s,o,a,u,c,l,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===Ue)&&this.options.execute)this.execute(this.state);else for(var d=void 0;d=this._outgoingQueue.shift();)d[0].send(d[1]);if(this.children.forEach(function(N){v.state.children[N.id]=N}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var p=C(this.eventListeners),f=p.next();!f.done;f=p.next()){var h=f.value;h(e.event)}}catch(N){n={error:N}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var m=C(this.listeners),E=m.next();!E.done;E=m.next()){var h=E.value;h(e,e.event)}}catch(N){s={error:N}}finally{try{E&&!E.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}try{for(var T=C(this.contextListeners),S=T.next();!S.done;S=T.next()){var b=S.value;b(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){a={error:N}}finally{try{S&&!S.done&&(u=T.return)&&u.call(T)}finally{if(a)throw a.error}}if(this.state.done){var x=e.configuration.find(function(N){return N.type==="final"&&N.parent===v.machine}),k=x&&x.doneData?Ct(x.doneData,e.context,r):void 0;try{for(var R=C(this.doneListeners),P=R.next();!P.done;P=R.next()){var h=P.value;h(ut(this.id,k))}}catch(N){c={error:N}}finally{try{P&&!P.done&&(l=R.return)&&l.call(R)}finally{if(c)throw c.error}}this._stop(),this._stopChildren()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===q.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this,s=at(e,r,n);this.listeners.add(s.next),this.status!==q.NotStarted&&s.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),s.complete()};return this.status===q.Stopped?s.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(s.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===q.Running)return this;this.machine._init(),Bt.register(this.sessionId,this),this.initialized=!0,this.status=q.Running;var n=e===void 0?this.initialState:He(this,function(){return Uo(e)?r.machine.resolveState(e):r.machine.resolveState(ae.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,Ue)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){F(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,i,s,o,a,u,c,l;try{for(var v=C(this.listeners),d=v.next();!d.done;d=v.next()){var p=d.value;this.listeners.delete(p)}}catch(R){e={error:R}}finally{try{d&&!d.done&&(r=v.return)&&r.call(v)}finally{if(e)throw e.error}}try{for(var f=C(this.stopListeners),h=f.next();!h.done;h=f.next()){var p=h.value;p(),this.stopListeners.delete(p)}}catch(R){n={error:R}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}try{for(var m=C(this.contextListeners),E=m.next();!E.done;E=m.next()){var p=E.value;this.contextListeners.delete(p)}}catch(R){s={error:R}}finally{try{E&&!E.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}try{for(var T=C(this.doneListeners),S=T.next();!S.done;S=T.next()){var p=S.value;this.doneListeners.delete(p)}}catch(R){a={error:R}}finally{try{S&&!S.done&&(u=T.return)&&u.call(T)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=q.Stopped,this._initialState=void 0;try{for(var b=C(Object.keys(this.delayedEventsMap)),x=b.next();!x.done;x=b.next()){var k=x.value;this.clock.clearTimeout(this.delayedEventsMap[k])}}catch(R){c={error:R}}finally{try{x&&!x.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new ai({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=Y({type:"xstate.stop"}),i=He(e,function(){var s=z($([],U(e.state.configuration),!1).sort(function(l,v){return v.order-l.order}).map(function(l){return me(l.onExit,e.machine.options.actions)})),o=U(lt(e.machine,e.state,e.state.context,n,[s],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=o[0],u=o[1],c=new ae({value:e.state.value,context:u,_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter(function(l){return l.type!==Ne&&(l.type!==De||!!l.to&&l.to!==fe.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return c.changed=!0,c});e.update(i,n),e._stopChildren(),Bt.free(e.sessionId)}),this},t.prototype.batch=function(e){var r=this;if(this.status===q.NotStarted&&this.options.deferEvents)B||J(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==q.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(!!e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,s,o=r.state,a=!1,u=[],c=function(p){var f=Y(p);r.forward(f),o=He(r,function(){return r.machine.transition(o,f,void 0,n||void 0)}),u.push.apply(u,$([],U(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(h){return _o(h,o)})),!1)),a=a||!!o.changed};try{for(var l=C(e),v=l.next();!v.done;v=l.next()){var d=v.value;c(d)}}catch(p){i={error:p}}finally{try{v&&!v.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}o.changed=a,o.actions=u,r.update(o,Y(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=Y(e);if(i.name.indexOf(Tr)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Tr)===0}))throw i.data.data;var s=He(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return s},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var i=C(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);!r||(this.removeChild(e),F(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==q.Running)return Rr(e,r);if(Fn(e))return this.spawnPromise(Promise.resolve(e),r);if(F(e))return this.spawnCallback(e,r);if(Io(e))return this.spawnActor(e,r);if(ao(e))return this.spawnObservable(e,r);if(ve(e))return this.spawnMachine(e,w(w({},n),{id:r}));if(io(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,w(w({},this.options),{parent:this,id:r.id||e.id})),s=w(w({},Ur),r);s.sync&&i.onTransition(function(a){n.send(Nt,{state:a,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(a){n.removeChild(i.id),n.send(Y(a,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=Fo(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,s=!1,o;e.then(function(u){s||(o=u,i.removeChild(r),i.send(Y(ut(r,u),{origin:r})))},function(u){if(!s){i.removeChild(r);var c=Ge(r,u);try{i.send(Y(c,{origin:r}))}catch(l){fo(u,l,r),i.devTools&&i.devTools.send(c,i.state),i.machine.strict&&i.stop()}}});var a=(n={id:r,send:function(){},subscribe:function(u,c,l){var v=at(u,c,l),d=!1;return e.then(function(p){d||(v.next(p),!d&&v.complete())},function(p){d||v.error(p)}),{unsubscribe:function(){return d=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[Te]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnCallback=function(e,r){var n,i=this,s=!1,o=new Set,a=new Set,u,c=function(d){u=d,a.forEach(function(p){return p(d)}),!s&&i.send(Y(d,{origin:r}))},l;try{l=e(c,function(d){o.add(d)})}catch(d){this.send(Ge(r,d))}if(Fn(l))return this.spawnPromise(l,r);var v=(n={id:r,send:function(d){return o.forEach(function(p){return p(d)})},subscribe:function(d){var p=at(d);return a.add(p.next),{unsubscribe:function(){a.delete(p.next)}}},stop:function(){s=!0,F(l)&&l()},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},n[Te]=function(){return this},n);return this.children.set(r,v),v},t.prototype.spawnObservable=function(e,r){var n,i=this,s,o=e.subscribe(function(u){s=u,i.send(Y(u,{origin:r}))},function(u){i.removeChild(r),i.send(Y(Ge(r,u),{origin:r}))},function(){i.removeChild(r),i.send(Y(ut(r),{origin:r}))}),a=(n={id:r,send:function(){},subscribe:function(u,c,l){return e.subscribe(u,c,l)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},n[Te]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!r){B||J(!1,"No implementation found for activity '".concat(e.type,"'"));return}var n=r(this.state.context,e);this.spawnEffect(e.id,n)},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[Te]=function(){return this},n))},t.prototype.attachDev=function(){var e=Dr();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(w(w({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:w({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}Mo(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Te]=function(){return this},t.prototype.getSnapshot=function(){return this.status===q.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=_e,t}(),$o=function(t){return L(t)?w(w({},Ur),{name:t}):w(w(w({},Ur),{name:uo()}),t)};function Bo(t,e){var r=$o(e);return Ao(function(n){if(!B){var i=ve(t)||F(t);J(!!n||i,'Attempted to spawn an Actor (ID: "'.concat(ve(t)?t.id:"undefined",'") outside of a service. This will have no effect.'))}return n?n.spawn(t,r.name,r):Rr(t,r.name)})}function _e(t,e){var r=new Vo(t,e);return r}function zo(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function zt(t){return w(w({type:Pt},t),{toJSON:function(){t.onDone,t.onError;var e=Er(t,["onDone","onError"]);return w(w({},e),{type:Pt,src:zo(t.src)})}})}var qe="",_r="#",pt="*",Je={},We=function(t){return t[0]===_r},Ko=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Go=function(t,e,r){var n=r.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(L(s.target)||ve(s.target))}),i=e===qe?"the transient event":"event '".concat(e,"'");J(!n,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Ho=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var s=this,o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Ko(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:_n),this.id=this.config.id||$([this.machine.key],U(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,B||J(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?ot(this.config.states,function(c,l){var v,d=new t(c,{},void 0,{parent:s,key:l});return Object.assign(s.idMap,w((v={},v[d.id]=d,v),d.idMap)),d}):Je;var a=0;function u(c){var l,v;c.order=a++;try{for(var d=C(ri(c)),p=d.next();!p.done;p=d.next()){var f=p.value;u(f)}}catch(h){l={error:h}}finally{try{p&&!p.done&&(v=d.return)&&v.call(d)}finally{if(l)throw l.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var l=c.event;return l===qe}):qe in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=oe(this.config.entry||this.config.onEntry).map(function(c){return Ke(c)}),this.onExit=oe(this.config.exit||this.config.onExit).map(function(c){return Ke(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=oe(this.config.invoke).map(function(c,l){var v,d;if(ve(c)){var p=Lt(s.id,l);return s.machine.options.services=w((v={},v[p]=c,v),s.machine.options.services),zt({src:p,id:p})}else if(L(c.src)){var p=c.id||Lt(s.id,l);return zt(w(w({},c),{id:p,src:c.src}))}else if(ve(c.src)||F(c.src)){var p=c.id||Lt(s.id,l);return s.machine.options.services=w((d={},d[p]=c.src,d),s.machine.options.services),zt(w(w({id:p},c),{src:p}))}else{var f=c.src;return zt(w(w({id:Lt(s.id,l)},c),{src:f}))}}),this.activities=oe(this.config.activities).concat(this.invoke).map(function(c){return Mt(c)}),this.transition=this.transition.bind(this),this.tags=oe(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||ni(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,s=n.activities,o=n.guards,a=n.services,u=n.delays;return new t(this.config,{actions:w(w({},i),e.actions),activities:w(w({},s),e.activities),guards:w(w({},o),e.guards),services:w(w({},a),e.services),delays:w(w({},u),e.delays)},r!=null?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return F(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:ot(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===qe,n=this.transitions.filter(function(i){var s=i.eventType===e;return r?s:s||i.eventType===pt});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(s,o){var a=F(s)?"".concat(e.id,":delay[").concat(o,"]"):s,u=ei(a,e.id);return e.onEntry.push(be(u,{delay:s})),e.onExit.push(Wn(u)),u},i=Be(r)?r.map(function(s,o){var a=n(s.delay,o);return w(w({},s),{event:a})}):z(Object.keys(r).map(function(s,o){var a=r[s],u=L(a)?{target:a}:a,c=isNaN(+s)?s:+s,l=n(c,o);return oe(u).map(function(v){return w(w({},v),{event:l,delay:c})})}));return i.map(function(s){var o=s.delay;return w(w({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof ae?e.value:st(e,this.delimiter);if(L(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((r={},r[i]=s,r)):[this,this.states[i]]}var o=Object.keys(i),a=[this];return a.push.apply(a,$([],U(z(o.map(function(u){return n.getStateNode(u).getStateNodes(i[u])}))),!1)),a},t.prototype.handles=function(e){var r=Ln(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof ae?e:ae.create(e),n=Array.from(ft([],this.getStateNodes(r.value)));return new ae(w(w({},r),{value:this.resolve(r.value),configuration:n,done:$t(n,this),tags:si(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),s=i.next(r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,s,o={};try{for(var a=C(Object.keys(e)),u=a.next();!u.done;u=a.next()){var c=u.value,l=e[c];if(!!l){var v=this.getStateNode(c),d=v._transition(l,r,n);d&&(o[c]=d)}}}catch(T){i={error:T}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}var p=Object.keys(o).map(function(T){return o[T]}),f=z(p.map(function(T){return T.transitions})),h=p.some(function(T){return T.transitions.length>0});if(!h)return this.next(r,n);var m=z(p.map(function(T){return T.entrySet})),E=z(Object.keys(o).map(function(T){return o[T].configuration}));return{transitions:f,entrySet:m,exitSet:z(p.map(function(T){return T.exitSet})),configuration:E,source:r,actions:z(Object.keys(o).map(function(T){return o[T].actions}))}},t.prototype._transition=function(e,r,n){return L(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,Y(r))},t.prototype.next=function(e,r){var n,i,s=this,o=r.name,a=[],u=[],c;try{for(var l=C(this.getCandidates(o)),v=l.next();!v.done;v=l.next()){var d=v.value,p=d.cond,f=d.in,h=e.context,m=f?L(f)&&We(f)?e.matches(st(this.getStateNodeById(f).path,this.delimiter)):Ar(st(f,this.delimiter),to(this.path.slice(0,-2))(e.value)):!0,E=!1;try{E=!p||zn(this.machine,p,h,r,e)}catch(x){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(x.message))}if(E&&m){d.target!==void 0&&(u=d.target),a.push.apply(a,$([],U(d.actions),!1)),c=d;break}}}catch(x){n={error:x}}finally{try{v&&!v.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}if(!!c){if(!u.length)return{transitions:[c],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var T=z(u.map(function(x){return s.getRelativeStateNodes(x,e.historyValue)})),S=!!c.internal,b=[];return S||u.forEach(function(x){b.push.apply(b,$([],U(s.getExternalReentryNodes(x)),!1))}),{transitions:[c],entrySet:b,exitSet:S?[]:[this],configuration:T,source:e,actions:a}}},t.prototype.getExternalReentryNodes=function(e){for(var r=[],n=U(e.order>this.order?[e,this]:[this,e],2),i=n[0],s=n[1];i&&i!==s;)r.push(i),i=i.parent;return i!==s?[]:(r.push(s),r)},t.prototype.getActions=function(e,r,n,i,s,o,a){var u,c,l,v,d=this,p=ft([],o?this.getStateNodes(o.value):[this]);try{for(var f=C(e),h=f.next();!h.done;h=f.next()){var m=h.value;(!ht(p,m)||ht(n.entrySet,m.parent))&&n.entrySet.push(m)}}catch(A){u={error:A}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}try{for(var E=C(p),T=E.next();!T.done;T=E.next()){var m=T.value;(!ht(e,m)||ht(n.exitSet,m.parent))&&n.exitSet.push(m)}}catch(A){l={error:A}}finally{try{T&&!T.done&&(v=E.return)&&v.call(E)}finally{if(l)throw l.error}}var S=z(n.entrySet.map(function(A){var V=[];if(A.type!=="final")return V;var H=A.parent;if(!H.parent)return V;V.push(ct(A.id,A.doneData),ct(H.id,A.doneData?Ct(A.doneData,i,s):void 0));var ee=H.parent;return ee.type==="parallel"&&dt(ee).every(function(se){return $t(n.configuration,se)})&&V.push(ct(ee.id)),V}));n.exitSet.sort(function(A,V){return V.order-A.order}),n.entrySet.sort(function(A,V){return A.order-V.order});var b=new Set(n.entrySet),x=new Set(n.exitSet),k=Array.from(b).map(function(A){var V=A.onEntry,H=A.activities.map(function(ee){return Yn(ee)});return me(a?$($([],U(V),!1),U(H),!1):$($([],U(H),!1),U(V),!1),d.machine.options.actions)}).concat([S.map(Gn)]),R=Array.from(x).map(function(A){return me($($([],U(A.onExit),!1),U(A.activities.map(function(V){return Qn(V)})),!1),d.machine.options.actions)}),P=R.concat([me(n.actions,this.machine.options.actions)]).concat(k);if(r){var N=me(z($([],U(e),!1).sort(function(A,V){return V.order-A.order}).map(function(A){return A.onExit})),this.machine.options.actions).filter(function(A){return A.type!==Ne&&(A.type!==De||!!A.to&&A.to!==fe.Internal)});return P.concat([N])}return P},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var s=Y(r),o;if(e instanceof ae)o=n===void 0?e:this.resolveState(ae.from(e,n));else{var a=L(e)?this.resolve(Ut(this.getResolvedPath(e))):this.resolve(e),u=n!=null?n:this.machine.context;o=this.resolveState(ae.from(a,u))}if(!B&&s.name===pt)throw new Error("An event cannot have the wildcard type ('".concat(pt,"')"));if(this.strict&&!this.events.includes(s.name)&&!no(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var c=this._transition(o.value,o,s)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:o,actions:[]},l=ft([],this.getStateNodes(o.value)),v=c.configuration.length?ft(l,c.configuration):l;return c.configuration=$([],U(v),!1),this.resolveTransition(c,o,o.context,i,s)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var s,o=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(s=e.actions).unshift.apply(s,$([],U(o),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,s){var o,a,u,c,l=this;s===void 0&&(s=Ue);var v=e.configuration,d=!r||e.transitions.length>0,p=d?e.configuration:r?r.configuration:[],f=$t(p,this),h=d?Po(this.machine,v):void 0,m=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,E=this.getActions(new Set(p),f,e,n,s,r,i),T=r?w({},r.activities):{};try{for(var S=C(E),b=S.next();!b.done;b=S.next()){var x=b.value;try{for(var k=(u=void 0,C(x)),R=k.next();!R.done;R=k.next()){var P=R.value;P.type===xt?T[P.activity.id||P.activity.type]=P:P.type===kt&&(T[P.activity.id||P.activity.type]=!1)}}catch(te){u={error:te}}finally{try{R&&!R.done&&(c=k.return)&&c.call(k)}finally{if(u)throw u.error}}}}catch(te){o={error:te}}finally{try{b&&!b.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}var N=U(lt(this,r,n,s,E,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),A=N[0],V=N[1],H=U(so(A,function(te){return te.type===Ne||te.type===De&&te.to===fe.Internal}),2),ee=H[0],se=H[1],Re=A.filter(function(te){var nt;return te.type===xt&&((nt=te.activity)===null||nt===void 0?void 0:nt.type)===Pt}),bt=Re.reduce(function(te,nt){return te[nt.activity.id]=xo(nt.activity,l.machine,V,s),te},r?w({},r.children):{}),Pe=new ae({value:h||r.value,context:V,_event:s,_sessionid:r?r._sessionid:null,historyValue:h?m?oo(m,h):void 0:r?r.historyValue:void 0,history:!h||e.source?r:void 0,actions:h?se:[],activities:h?T:r?r.activities:{},events:[],configuration:p,transitions:e.transitions,children:bt,done:f,tags:si(p),machine:this}),zs=n!==V;Pe.changed=s.name===Nt||zs;var rt=Pe.history;rt&&delete rt.history;var Ks=!f&&(this._transient||v.some(function(te){return te._transient}));if(!d&&(!Ks||s.name===qe))return Pe;var de=Pe;if(!f)for(Ks&&(de=this.resolveRaisedTransition(de,{type:Pn},s,i));ee.length;){var Ol=ee.shift();de=this.resolveRaisedTransition(de,Ol._event,s,i)}var Al=de.changed||(rt?!!de.actions.length||zs||typeof rt.value!=typeof de.value||!oi(de.value,rt.value):void 0);return de.changed=Al,de.history=rt,de},t.prototype.getStateNode=function(e){if(We(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=We(e)?e.slice(_r.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&We(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=xr(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||Je;switch(this.type){case"parallel":return ot(this.initialStateValue,function(s,o){return s?n.getStateNode(o).resolve(e[o]||s):Je});case"compound":if(L(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?ot(e,function(s,o){return s?n.getStateNode(o).resolve(s):Je}):this.initialStateValue||{};default:return e||Je}},t.prototype.getResolvedPath=function(e){if(We(e)){var r=this.machine.idMap[e.slice(_r.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return xr(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=jn(this.states,function(n){return n.initialStateValue||Je},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=Vt(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:$([],U(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;L(r.target)?e=We(r.target)?Ut(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Vt(this))return[this];if(this.type==="compound"&&!this.initial)return B||J(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=_t(this.initialStateValue);return z(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=U(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var s=this.getStateNode(n);if(s.type==="history")return s.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:jn(this.states,function(r,n){if(!e)return r.historyValue();var i=L(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?z(_t(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var s=ro(n.path,"states")(e).current;return L(s)?[n.getStateNode(s)]:z(_t(s).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=z(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var a=C(Object.keys(s)),u=a.next();!u.done;u=a.next()){var c=u.value,l=s[c];if(l.states)try{for(var v=(n=void 0,C(l.events)),d=v.next();!d.done;d=v.next()){var p=d.value;o.add("".concat(p))}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!L(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var s=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(s);return o}catch(a){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(a.message))}else return r.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var r=this,n=lo(e.target),i="internal"in e?e.internal:n?n.some(function(u){return L(u)&&u[0]===r.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(n),a=w(w({},e),{actions:me(oe(e.actions)),cond:Bn(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return w(w({},a),{target:a.target?a.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(r.id)})}});return a},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=pt,a=s[o],u=a===void 0?[]:a,c=Er(s,[typeof o=="symbol"?o:o+""]);i=z(Object.keys(c).map(function(T){!B&&T===qe&&J(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var S=ze(T,c[T]);return B||Go(n,T,S),S}).concat(ze(pt,u)))}var l=this.config.always?ze("",this.config.always):[],v=this.config.onDone?ze(String(ct(this.id)),this.config.onDone):[];B||J(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var d=z(this.invoke.map(function(T){var S=[];return T.onDone&&S.push.apply(S,$([],U(ze(String(ut(T.id)),T.onDone)),!1)),T.onError&&S.push.apply(S,$([],U(ze(String(Ge(T.id)),T.onError)),!1)),S})),p=this.after,f=z($($($($([],U(v),!1),U(d),!1),U(i),!1),U(l),!1).map(function(T){return oe(T).map(function(S){return n.formatTransition(S)})}));try{for(var h=C(p),m=h.next();!m.done;m=h.next()){var E=m.value;f.push(E)}}catch(T){e={error:T}}finally{try{m&&!m.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}return f},t}(),ci=!1;function Oe(t,e){return!B&&!t.predictableActionArguments&&!ci&&(ci=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new Ho(t,e)}var _=Zn,W=be;function ui(t,e){return function(){return t.apply(e,arguments)}}const{toString:li}=Object.prototype,{getPrototypeOf:Cr}=Object,Lr=(t=>e=>{const r=li.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ye=t=>(t=t.toLowerCase(),e=>Lr(e)===t),Kt=t=>e=>typeof e===t,{isArray:Ye}=Array,vt=Kt("undefined");function qo(t){return t!==null&&!vt(t)&&t.constructor!==null&&!vt(t.constructor)&&Ce(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const di=ye("ArrayBuffer");function Jo(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&di(t.buffer),e}const Wo=Kt("string"),Ce=Kt("function"),fi=Kt("number"),jr=t=>t!==null&&typeof t=="object",Yo=t=>t===!0||t===!1,Gt=t=>{if(Lr(t)!=="object")return!1;const e=Cr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qo=ye("Date"),Xo=ye("File"),Zo=ye("Blob"),ea=ye("FileList"),ta=t=>jr(t)&&Ce(t.pipe),ra=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||li.call(t)===e||Ce(t.toString)&&t.toString()===e)},na=ye("URLSearchParams"),ia=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mt(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Ye(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,t[a],a,t)}}function hi(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const pi=typeof self>"u"?typeof global>"u"?globalThis:global:self,vi=t=>!vt(t)&&t!==pi;function Mr(){const{caseless:t}=vi(this)&&this||{},e={},r=(n,i)=>{const s=t&&hi(e,i)||i;Gt(e[s])&&Gt(n)?e[s]=Mr(e[s],n):Gt(n)?e[s]=Mr({},n):Ye(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&mt(arguments[n],r);return e}const sa=(t,e,r,{allOwnKeys:n}={})=>(mt(e,(i,s)=>{r&&Ce(i)?t[s]=ui(i,r):t[s]=i},{allOwnKeys:n}),t),oa=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),aa=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},ca=(t,e,r,n)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&Cr(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},ua=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},la=t=>{if(!t)return null;if(Ye(t))return t;let e=t.length;if(!fi(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},da=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cr(Uint8Array)),fa=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},ha=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},pa=ye("HTMLFormElement"),va=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),mi=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ma=ye("RegExp"),yi=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};mt(r,(i,s)=>{e(i,s,t)!==!1&&(n[s]=i)}),Object.defineProperties(t,n)},y={isArray:Ye,isArrayBuffer:di,isBuffer:qo,isFormData:ra,isArrayBufferView:Jo,isString:Wo,isNumber:fi,isBoolean:Yo,isObject:jr,isPlainObject:Gt,isUndefined:vt,isDate:Qo,isFile:Xo,isBlob:Zo,isRegExp:ma,isFunction:Ce,isStream:ta,isURLSearchParams:na,isTypedArray:da,isFileList:ea,forEach:mt,merge:Mr,extend:sa,trim:ia,stripBOM:oa,inherits:aa,toFlatObject:ca,kindOf:Lr,kindOfTest:ye,endsWith:ua,toArray:la,forEachEntry:fa,matchAll:ha,isHTMLForm:pa,hasOwnProperty:mi,hasOwnProp:mi,reduceDescriptors:yi,freezeMethods:t=>{yi(t,(e,r)=>{if(Ce(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!Ce(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Ye(t)?n(t):n(String(t).split(e)),r},toCamelCase:va,noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:hi,global:pi,isContextDefined:vi,toJSONObject:t=>{const e=new Array(10),r=(n,i)=>{if(jr(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Ye(n)?[]:{};return mt(n,(o,a)=>{const u=r(o,i+1);!vt(u)&&(s[a]=u)}),e[i]=void 0,s}}return n};return r(t,0)}};function j(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}y.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const gi=j.prototype,Si={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Si[t]={value:t}}),Object.defineProperties(j,Si),Object.defineProperty(gi,"isAxiosError",{value:!0}),j.from=(t,e,r,n,i,s)=>{const o=Object.create(gi);return y.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),j.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var Ei=typeof self=="object"?self.FormData:window.FormData;function Fr(t){return y.isPlainObject(t)||y.isArray(t)}function wi(t){return y.endsWith(t,"[]")?t.slice(0,-2):t}function Ti(t,e,r){return t?t.concat(e).map(function(i,s){return i=wi(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function ya(t){return y.isArray(t)&&!t.some(Fr)}const ga=y.toFlatObject(y,{},null,function(e){return/^is[A-Z]/.test(e)});function Sa(t){return t&&y.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function Ht(t,e,r){if(!y.isObject(t))throw new TypeError("target must be an object");e=e||new(Ei||FormData),r=y.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,m){return!y.isUndefined(m[h])});const n=r.metaTokens,i=r.visitor||l,s=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Sa(e);if(!y.isFunction(i))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(y.isDate(f))return f.toISOString();if(!u&&y.isBlob(f))throw new j("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(f)||y.isTypedArray(f)?u&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,h,m){let E=f;if(f&&!m&&typeof f=="object"){if(y.endsWith(h,"{}"))h=n?h:h.slice(0,-2),f=JSON.stringify(f);else if(y.isArray(f)&&ya(f)||y.isFileList(f)||y.endsWith(h,"[]")&&(E=y.toArray(f)))return h=wi(h),E.forEach(function(S,b){!(y.isUndefined(S)||S===null)&&e.append(o===!0?Ti([h],b,s):o===null?h:h+"[]",c(S))}),!1}return Fr(f)?!0:(e.append(Ti(m,h,s),c(f)),!1)}const v=[],d=Object.assign(ga,{defaultVisitor:l,convertValue:c,isVisitable:Fr});function p(f,h){if(!y.isUndefined(f)){if(v.indexOf(f)!==-1)throw Error("Circular reference detected in "+h.join("."));v.push(f),y.forEach(f,function(E,T){(!(y.isUndefined(E)||E===null)&&i.call(e,E,y.isString(T)?T.trim():T,h,d))===!0&&p(E,h?h.concat(T):[T])}),v.pop()}}if(!y.isObject(t))throw new TypeError("data must be an object");return p(t),e}function bi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Vr(t,e){this._pairs=[],t&&Ht(t,this,e)}const Oi=Vr.prototype;Oi.append=function(e,r){this._pairs.push([e,r])},Oi.toString=function(e){const r=e?function(n){return e.call(this,n,bi)}:bi;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Ea(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ai(t,e,r){if(!e)return t;const n=r&&r.encode||Ea,i=r&&r.serialize;let s;if(i?s=i(e,r):s=y.isURLSearchParams(e)?e.toString():new Vr(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class wa{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){y.forEach(this.handlers,function(n){n!==null&&e(n)})}}const xi=wa,ki={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ta=typeof URLSearchParams<"u"?URLSearchParams:Vr,ba=FormData,Oa=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),ge={isBrowser:!0,classes:{URLSearchParams:Ta,FormData:ba,Blob},isStandardBrowserEnv:Oa,protocols:["http","https","file","blob","url","data"]};function Aa(t,e){return Ht(t,new ge.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return ge.isNode&&y.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function xa(t){return y.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ka(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Ii(t){function e(r,n,i,s){let o=r[s++];const a=Number.isFinite(+o),u=s>=r.length;return o=!o&&y.isArray(i)?i.length:o,u?(y.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!y.isObject(i[o]))&&(i[o]=[]),e(r,n,i[o],s)&&y.isArray(i[o])&&(i[o]=ka(i[o])),!a)}if(y.isFormData(t)&&y.isFunction(t.entries)){const r={};return y.forEachEntry(t,(n,i)=>{e(xa(n),i,r,0)}),r}return null}const Ia={"Content-Type":void 0};function Ra(t,e,r){if(y.isString(t))try{return(e||JSON.parse)(t),y.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const qt={transitional:ki,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=y.isObject(e);if(s&&y.isHTMLForm(e)&&(e=new FormData(e)),y.isFormData(e))return i&&i?JSON.stringify(Ii(e)):e;if(y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e))return e;if(y.isArrayBufferView(e))return e.buffer;if(y.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Aa(e,this.formSerializer).toString();if((a=y.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ht(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Ra(e)):e}],transformResponse:[function(e){const r=this.transitional||qt.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&y.isString(e)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?j.from(a,j.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};y.forEach(["delete","get","head"],function(e){qt.headers[e]={}}),y.forEach(["post","put","patch"],function(e){qt.headers[e]=y.merge(Ia)});const $r=qt,Pa=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Na=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||e[r]&&Pa[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},Ri=Symbol("internals");function yt(t){return t&&String(t).trim().toLowerCase()}function Jt(t){return t===!1||t==null?t:y.isArray(t)?t.map(Jt):String(t)}function Da(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}function Ua(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function Pi(t,e,r,n){if(y.isFunction(n))return n.call(this,e,r);if(!!y.isString(e)){if(y.isString(n))return e.indexOf(n)!==-1;if(y.isRegExp(n))return n.test(e)}}function _a(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Ca(t,e){const r=y.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}class Wt{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(a,u,c){const l=yt(u);if(!l)throw new Error("header name must be a non-empty string");const v=y.findKey(i,l);(!v||i[v]===void 0||c===!0||c===void 0&&i[v]!==!1)&&(i[v||u]=Jt(a))}const o=(a,u)=>y.forEach(a,(c,l)=>s(c,l,u));return y.isPlainObject(e)||e instanceof this.constructor?o(e,r):y.isString(e)&&(e=e.trim())&&!Ua(e)?o(Na(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=yt(e),e){const n=y.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Da(i);if(y.isFunction(r))return r.call(this,i,n);if(y.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=yt(e),e){const n=y.findKey(this,e);return!!(n&&(!r||Pi(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(o){if(o=yt(o),o){const a=y.findKey(n,o);a&&(!r||Pi(n,n[a],a,r))&&(delete n[a],i=!0)}}return y.isArray(e)?e.forEach(s):s(e),i}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,n={};return y.forEach(this,(i,s)=>{const o=y.findKey(n,s);if(o){r[o]=Jt(i),delete r[s];return}const a=e?_a(s):String(s).trim();a!==s&&delete r[s],r[a]=Jt(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return y.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&y.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Ri]=this[Ri]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=yt(o);n[a]||(Ca(i,o),n[a]=!0)}return y.isArray(e)?e.forEach(s):s(e),this}}Wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),y.freezeMethods(Wt.prototype),y.freezeMethods(Wt);const Se=Wt;function Br(t,e){const r=this||$r,n=e||r,i=Se.from(n.headers);let s=n.data;return y.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ni(t){return!!(t&&t.__CANCEL__)}function gt(t,e,r){j.call(this,t==null?"canceled":t,j.ERR_CANCELED,e,r),this.name="CanceledError"}y.inherits(gt,j,{__CANCEL__:!0});const La=null;function ja(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new j("Request failed with status code "+r.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Ma=ge.isStandardBrowserEnv?function(){return{write:function(r,n,i,s,o,a){const u=[];u.push(r+"="+encodeURIComponent(n)),y.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),y.isString(s)&&u.push("path="+s),y.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Fa(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Va(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Di(t,e){return t&&!Fa(e)?Va(t,e):e}const $a=ge.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const a=y.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function Ba(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function za(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),l=n[s];o||(o=c),r[i]=u,n[i]=c;let v=s,d=0;for(;v!==i;)d+=r[v++],v=v%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=l&&c-l;return p?Math.round(d*1e3/p):void 0}}function Ui(t,e){let r=0;const n=za(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-r,u=n(a),c=s<=o;r=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&c?(o-s)/u:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const Yt={http:La,xhr:typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){let i=t.data;const s=Se.from(t.headers).normalize(),o=t.responseType;let a;function u(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}y.isFormData(i)&&ge.isStandardBrowserEnv&&s.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",f=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+f))}const l=Di(t.baseURL,t.url);c.open(t.method.toUpperCase(),Ai(l,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function v(){if(!c)return;const p=Se.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),h={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};ja(function(E){r(E),u()},function(E){n(E),u()},h),c=null}if("onloadend"in c?c.onloadend=v:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(v)},c.onabort=function(){!c||(n(new j("Request aborted",j.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new j("Network Error",j.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let f=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const h=t.transitional||ki;t.timeoutErrorMessage&&(f=t.timeoutErrorMessage),n(new j(f,h.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,c)),c=null},ge.isStandardBrowserEnv){const p=(t.withCredentials||$a(l))&&t.xsrfCookieName&&Ma.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&y.forEach(s.toJSON(),function(f,h){c.setRequestHeader(h,f)}),y.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",Ui(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Ui(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{!c||(n(!p||p.type?new gt(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=Ba(l);if(d&&ge.protocols.indexOf(d)===-1){n(new j("Unsupported protocol "+d+":",j.ERR_BAD_REQUEST,t));return}c.send(i||null)})}};y.forEach(Yt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ka={getAdapter:t=>{t=y.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=y.isString(r)?Yt[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new j(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(y.hasOwnProp(Yt,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!y.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Yt};function zr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gt}function _i(t){return zr(t),t.headers=Se.from(t.headers),t.data=Br.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ka.getAdapter(t.adapter||$r.adapter)(t).then(function(n){return zr(t),n.data=Br.call(t,t.transformResponse,n),n.headers=Se.from(n.headers),n},function(n){return Ni(n)||(zr(t),n&&n.response&&(n.response.data=Br.call(t,t.transformResponse,n.response),n.response.headers=Se.from(n.response.headers))),Promise.reject(n)})}const Ci=t=>t instanceof Se?t.toJSON():t;function St(t,e){e=e||{};const r={};function n(c,l,v){return y.isPlainObject(c)&&y.isPlainObject(l)?y.merge.call({caseless:v},c,l):y.isPlainObject(l)?y.merge({},l):y.isArray(l)?l.slice():l}function i(c,l,v){if(y.isUndefined(l)){if(!y.isUndefined(c))return n(void 0,c,v)}else return n(c,l,v)}function s(c,l){if(!y.isUndefined(l))return n(void 0,l)}function o(c,l){if(y.isUndefined(l)){if(!y.isUndefined(c))return n(void 0,c)}else return n(void 0,l)}function a(c,l,v){if(v in e)return n(c,l);if(v in t)return n(void 0,c)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,l)=>i(Ci(c),Ci(l),!0)};return y.forEach(Object.keys(t).concat(Object.keys(e)),function(l){const v=u[l]||i,d=v(t[l],e[l],l);y.isUndefined(d)&&v!==a||(r[l]=d)}),r}const Li="1.2.0",Kr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Kr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ji={};Kr.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Li+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new j(i(o," has been removed"+(r?" in "+r:"")),j.ERR_DEPRECATED);return r&&!ji[o]&&(ji[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Ga(t,e,r){if(typeof t!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new j("option "+s+" must be "+u,j.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new j("Unknown option "+s,j.ERR_BAD_OPTION)}}const Gr={assertOptions:Ga,validators:Kr},Ae=Gr.validators;class Qt{constructor(e){this.defaults=e,this.interceptors={request:new xi,response:new xi}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=St(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Gr.assertOptions(n,{silentJSONParsing:Ae.transitional(Ae.boolean),forcedJSONParsing:Ae.transitional(Ae.boolean),clarifyTimeoutError:Ae.transitional(Ae.boolean)},!1),i!==void 0&&Gr.assertOptions(i,{encode:Ae.function,serialize:Ae.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o;o=s&&y.merge(s.common,s[r.method]),o&&y.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),r.headers=Se.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(u=u&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});const c=[];this.interceptors.response.forEach(function(h){c.push(h.fulfilled,h.rejected)});let l,v=0,d;if(!u){const f=[_i.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,c),d=f.length,l=Promise.resolve(r);v<d;)l=l.then(f[v++],f[v++]);return l}d=a.length;let p=r;for(v=0;v<d;){const f=a[v++],h=a[v++];try{p=f(p)}catch(m){h.call(this,m);break}}try{l=_i.call(this,p)}catch(f){return Promise.reject(f)}for(v=0,d=c.length;v<d;)l=l.then(c[v++],c[v++]);return l}getUri(e){e=St(this.defaults,e);const r=Di(e.baseURL,e.url);return Ai(r,e.params,e.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(e){Qt.prototype[e]=function(r,n){return this.request(St(n||{},{method:e,url:r,data:(n||{}).data}))}}),y.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(St(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Qt.prototype[e]=r(),Qt.prototype[e+"Form"]=r(!0)});const Xt=Qt;class Hr{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new gt(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Hr(function(i){e=i}),cancel:e}}}const Ha=Hr;function qa(t){return function(r){return t.apply(null,r)}}function Ja(t){return y.isObject(t)&&t.isAxiosError===!0}function Mi(t){const e=new Xt(t),r=ui(Xt.prototype.request,e);return y.extend(r,Xt.prototype,e,{allOwnKeys:!0}),y.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Mi(St(t,i))},r}const Q=Mi($r);Q.Axios=Xt,Q.CanceledError=gt,Q.CancelToken=Ha,Q.isCancel=Ni,Q.VERSION=Li,Q.toFormData=Ht,Q.AxiosError=j,Q.Cancel=Q.CanceledError,Q.all=function(e){return Promise.all(e)},Q.spread=qa,Q.isAxiosError=Ja,Q.AxiosHeaders=Se,Q.formToJSON=t=>Ii(y.isHTMLForm(t)?new FormData(t):t),Q.default=Q;const Et=Q;/*! js-cookie v3.0.1 | MIT */function Zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var Wa={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function qr(t,e){function r(i,s,o){if(!(typeof document>"u")){o=Zt({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var u in o)!o[u]||(a+="; "+u,o[u]!==!0&&(a+="="+o[u].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var u=s[a].split("="),c=u.slice(1).join("=");try{var l=decodeURIComponent(u[0]);if(o[l]=t.read(c,l),i===l)break}catch{}}return i?o[i]:o}}return Object.create({set:r,get:n,remove:function(i,s){r(i,"",Zt({},s,{expires:-1}))},withAttributes:function(i){return qr(this.converter,Zt({},this.attributes,i))},withConverter:function(i){return qr(Zt({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Jr=qr(Wa,{path:"/"}),Ya=Object.defineProperty,Qa=(t,e,r)=>e in t?Ya(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Le=(t,e,r)=>(Qa(t,typeof e!="symbol"?e+"":e,r),r);function Xa(t){return new TextEncoder().encode(t)}function je(t){const e=new Uint8Array(t);let r="";for(const n of e)r+=String.fromCharCode(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Wr(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n=e.padEnd(e.length+r,"="),i=atob(n),s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return s}function Fi(){return(window==null?void 0:window.PublicKeyCredential)!==void 0&&typeof window.PublicKeyCredential=="function"}function Vi(t){const{id:e}=t;return{...t,id:Wr(e),transports:t.transports}}function $i(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}class X extends Error{constructor(e,r="WebAuthnError"){super(e),this.name=r}}function Za({error:t,options:e}){var r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new X("Registration ceremony was sent an abort signal","AbortError")}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new X("Discoverable credentials were required but no available authenticator supported it","ConstraintError");if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new X("User verification was required but no available authenticator supported it","ConstraintError")}else{if(t.name==="InvalidStateError")return new X("The authenticator was previously registered","InvalidStateError");if(t.name==="NotAllowedError")return new X("User clicked cancel, or the registration ceremony timed out","NotAllowedError");if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new X('No entry in pubKeyCredParams was of type "public-key"',"NotSupportedError"):new X("No available authenticator supported any of the specified pubKeyCredParams algorithms","NotSupportedError");if(t.name==="SecurityError"){const s=window.location.hostname;if($i(s)){if(i.rp.id!==s)return new X(`The RP ID "${i.rp.id}" is invalid for this domain`,"SecurityError")}else return new X(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new X("User ID was not between 1 and 64 characters","TypeError")}else if(t.name==="UnknownError")return new X("The authenticator was unable to process the specified options, or could not create a new credential","UnknownError")}return t}class ec{createNewAbortSignal(){return this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal}reset(){this.controller=void 0}}const er=new ec;async function Bi(t){if(!Fi())throw new Error("WebAuthn is not supported in this browser");const e={publicKey:{...t,challenge:Wr(t.challenge),user:{...t.user,id:Xa(t.user.id)},excludeCredentials:t.excludeCredentials.map(Vi)}};e.signal=er.createNewAbortSignal();let r;try{r=await navigator.credentials.create(e)}catch(u){throw Za({error:u,options:e})}finally{er.reset()}if(!r)throw new Error("Registration was not completed");const{id:n,rawId:i,response:s,type:o}=r,a={id:n,rawId:je(i),response:{attestationObject:je(s.attestationObject),clientDataJSON:je(s.clientDataJSON)},type:o,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:r.authenticatorAttachment};return typeof s.getTransports=="function"&&(a.transports=s.getTransports()),a}function tc(t){return new TextDecoder("utf-8").decode(t)}async function rc(){if(navigator.credentials.conditionalMediationSupported)return!0;const t=window.PublicKeyCredential;return t.isConditionalMediationAvailable!==void 0&&t.isConditionalMediationAvailable()}function nc({error:t,options:e}){var r;const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new X("Authentication ceremony was sent an abort signal","AbortError")}else{if(t.name==="NotAllowedError")return!((r=n.allowCredentials)===null||r===void 0)&&r.length?new X("No available authenticator recognized any of the allowed credentials","NotAllowedError"):new X("User clicked cancel, or the authentication ceremony timed out","NotAllowedError");if(t.name==="SecurityError"){const i=window.location.hostname;if($i(i)){if(n.rpId!==i)return new X(`The RP ID "${n.rpId}" is invalid for this domain`,"SecurityError")}else return new X(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="UnknownError")return new X("The authenticator was unable to process the specified options, or could not create a new assertion signature","UnknownError")}return t}async function ic(t,e=!1){var r,n;if(!Fi())throw new Error("WebAuthn is not supported in this browser");let i;((r=t.allowCredentials)===null||r===void 0?void 0:r.length)!==0&&(i=(n=t.allowCredentials)===null||n===void 0?void 0:n.map(Vi));const s={...t,challenge:Wr(t.challenge),allowCredentials:i},o={};if(e){if(!await rc())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)throw Error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected');o.mediation="conditional",s.allowCredentials=[]}o.publicKey=s,o.signal=er.createNewAbortSignal();let a;try{a=await navigator.credentials.get(o)}catch(p){throw nc({error:p,options:o})}finally{er.reset()}if(!a)throw new Error("Authentication was not completed");const{id:u,rawId:c,response:l,type:v}=a;let d;return l.userHandle&&(d=tc(l.userHandle)),{id:u,rawId:je(c),response:{authenticatorData:je(l.authenticatorData),clientDataJSON:je(l.clientDataJSON),signature:je(l.signature),userHandle:d},type:v,clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:a.authenticatorAttachment}}const tr="nhostRefreshToken",rr="nhostRefreshTokenExpiresAt",sc=3,oc=300,ac=5,zi=0,Ki=1,he=10,nr=20;class ir extends Error{constructor(e){super(e.message),Le(this,"error"),Error.captureStackTrace(this,this.constructor),e instanceof Error?(this.name=e.name,this.error={error:e.name,status:Ki,message:e.message}):(this.name=e.error,this.error=e)}}const xe={status:he,error:"invalid-email",message:"Email is incorrectly formatted"},cc={status:he,error:"invalid-mfa-type",message:"MFA type is invalid"},uc={status:he,error:"invalid-mfa-code",message:"MFA code is invalid"},Yr={status:he,error:"invalid-password",message:"Password is incorrectly formatted"},Gi={status:he,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},lc={status:he,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},dc={status:he,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},fc={status:he,error:"no-refresh-token",message:"No refresh token has been provided"},hc={status:nr,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},Ee={status:nr,error:"already-signed-in",message:"User is already signed in"},pc={status:nr,error:"unauthenticated-user",message:"User is not authenticated"},vc={status:nr,error:"unverified-user",message:"Email needs verification"},mc={status:he,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},yc={status:Ki,error:"invalid-sign-in-method",message:"Invalid sign-in method"},Me=t=>{const e=Et.create({baseURL:t});return e.interceptors.response.use(r=>r,r=>{var n,i,s,o,a,u,c,l,v,d,p,f;return Promise.reject({error:{message:(a=(o=(s=(i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)!=null?s:r.message)!=null?o:r.request.responseText)!=null?a:JSON.stringify(r),status:(d=(v=(u=r.response)==null?void 0:u.status)!=null?v:(l=(c=r.response)==null?void 0:c.data)==null?void 0:l.statusCode)!=null?d:zi,error:((f=(p=r.response)==null?void 0:p.data)==null?void 0:f.error)||r.request.statusText||"network"}})}),e},sr=typeof window<"u",or=new Map,gc=t=>{var e;return sr&&typeof localStorage<"u"?localStorage.getItem(t):(e=or.get(t))!=null?e:null},Sc=(t,e)=>{sr&&typeof localStorage<"u"?e?localStorage.setItem(t,e):localStorage.removeItem(t):e?or.set(t,e):or.has(t)&&or.delete(t)},Ec=(t,e)=>{if(t==="localStorage"||t==="web")return gc;if(t==="cookie")return r=>{var n;return sr&&(n=Jr.get(r))!=null?n:null};if(!e)throw Error(`clientStorageType is set to '${t}' but no clientStorage has been given`);if(t==="react-native")return r=>{var n;return(n=e.getItem)==null?void 0:n.call(e,r)};if(t==="capacitor")return r=>{var n;return(n=e.get)==null?void 0:n.call(e,{key:r})};if(t==="expo-secure-storage")return r=>{var n;return(n=e.getItemAsync)==null?void 0:n.call(e,r)};if(t==="custom"){if(e.getItem&&e.removeItem)return e.getItem;if(e.getItemAsync)return e.getItemAsync;throw Error(`clientStorageType is set to 'custom' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property`)}throw Error(`Unknown storage type: ${t}`)},wc=(t,e)=>{if(t==="localStorage"||t==="web")return Sc;if(t==="cookie")return(r,n)=>{sr&&(n?Jr.set(r,n,{expires:30,sameSite:"lax",httpOnly:!1}):Jr.remove(r))};if(!e)throw Error(`clientStorageType is set to '${t}' but no clienStorage has been given`);if(t==="react-native")return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(t==="capacitor")return(r,n)=>{var i,s;return n?(i=e.set)==null?void 0:i.call(e,{key:r,value:n}):(s=e.remove)==null?void 0:s.call(e,{key:r})};if(t==="expo-secure-storage")return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.deleteItemAsync)==null?void 0:s.call(e,r)};if(t==="custom"){if(!e.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(e.setItem)return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(e.setItemAsync)return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${t}`)},Qr=(t,e)=>{const r=e&&Object.entries(e).map(([n,i])=>{const s=Array.isArray(i)?i.join(","):typeof i=="object"?JSON.stringify(i):i;return`${n}=${encodeURIComponent(s)}`}).join("&");return r?`${t}?${r}`:t},ce=(t,e)=>{if(!(e!=null&&e.redirectTo))return e;const{redirectTo:r,...n}=e;if(!t)return r.startsWith("/")?n:e;const i=new URL(t),s=Object.fromEntries(new URLSearchParams(i.search)),o=new URL(r.startsWith("/")?i.origin+r:r),a=new URLSearchParams(o.search);let u=Object.fromEntries(a);r.startsWith("/")&&(u={...s,...u});let c=i.pathname;return o.pathname.length>1&&(c+=o.pathname.slice(1)),{...n,redirectTo:Qr(o.origin+c,u)}};function ar(t,e){var r;if(!e){if(typeof window>"u")return;e=((r=window.location)==null?void 0:r.href)||""}t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function Hi(t){var e;if(typeof window>"u")return;const r=window==null?void 0:window.location;if(!!r&&r){const n=new URLSearchParams(r.search),i=new URLSearchParams((e=r.hash)==null?void 0:e.slice(1));n.delete(t),i.delete(t);let s=window.location.pathname;Array.from(n).length&&(s+=`?${n.toString()}`),Array.from(i).length&&(s+=`#${i.toString()}`),window.history.pushState({},"",s)}}const ke=t=>!!t&&typeof t=="string"&&!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),Xr=t=>!!t&&typeof t=="string"&&t.length>=sc,qi=t=>!!t&&typeof t=="string",Tc=t=>t&&typeof t=="string"&&t.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),Zr={user:null,mfa:null,accessToken:{value:null,expiresAt:null},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},importTokenAttempts:0,errors:{}},Ji=({backendUrl:t,clientUrl:e,interpreter:r})=>{const n=Me(t);return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:_({error:i=>xe}),saveRequestError:_({error:(i,{data:{error:s}})=>s}),reportError:W(i=>({type:"ERROR",error:i.error})),reportSuccess:W("SUCCESS")},guards:{invalidEmail:(i,{email:s})=>!ke(s)},services:{requestChange:async(i,{email:s,options:o})=>(await n.post("/user/email/change",{newEmail:s,options:ce(e,o)},{headers:{authorization:`Bearer ${r==null?void 0:r.getSnapshot().context.accessToken.value}`}})).data}})},Wi=({backendUrl:t,interpreter:e})=>{const r=Me(t);return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:_({error:n=>Yr}),saveRequestError:_({error:(n,{data:{error:i}})=>i}),reportError:W(n=>({type:"ERROR",error:n.error})),reportSuccess:W("SUCCESS")},guards:{invalidPassword:(n,{password:i})=>!Xr(i)},services:{requestChange:(n,{password:i,ticket:s})=>r.post("/user/password",{newPassword:i,ticket:s},{headers:{authorization:`Bearer ${e==null?void 0:e.getSnapshot().context.accessToken.value}`}})}})},bc=({backendUrl:t,interpreter:e})=>{const r=Me(t);return Oe({schema:{context:{},events:{}},tsTypes:{},predictableActionArguments:!0,id:"enableMfa",initial:"idle",context:{error:null,imageUrl:null,secret:null},states:{idle:{initial:"initial",on:{GENERATE:"generating"},states:{initial:{},error:{}}},generating:{invoke:{src:"generate",id:"generate",onDone:{target:"generated",actions:["reportGeneratedSuccess","saveGeneration"]},onError:{actions:["saveError","reportGeneratedError"],target:"idle.error"}}},generated:{initial:"idle",states:{idle:{initial:"idle",on:{ACTIVATE:[{cond:"invalidMfaType",actions:"saveInvalidMfaTypeError",target:".error"},{cond:"invalidMfaCode",actions:"saveInvalidMfaCodeError",target:".error"},{target:"activating"}]},states:{idle:{},error:{}}},activating:{invoke:{src:"activate",id:"activate",onDone:{target:"activated",actions:"reportSuccess"},onError:{actions:["saveError","reportError"],target:"idle.error"}}},activated:{type:"final"}}}}},{actions:{saveInvalidMfaTypeError:_({error:n=>cc}),saveInvalidMfaCodeError:_({error:n=>uc}),saveError:_({error:(n,{data:{error:i}})=>i}),saveGeneration:_({imageUrl:(n,{data:{imageUrl:i}})=>i,secret:(n,{data:{totpSecret:i}})=>i}),reportError:W(n=>({type:"ERROR",error:n.error})),reportSuccess:W("SUCCESS"),reportGeneratedSuccess:W("GENERATED"),reportGeneratedError:W(n=>({type:"GENERATED_ERROR",error:n.error}))},guards:{invalidMfaCode:(n,{code:i})=>!i,invalidMfaType:(n,{activeMfaType:i})=>!i||i!=="totp"},services:{generate:async n=>{const{data:i}=await r.get("/mfa/totp/generate",{headers:{authorization:`Bearer ${e==null?void 0:e.getSnapshot().context.accessToken.value}`}});return i},activate:(n,{code:i,activeMfaType:s})=>r.post("/user/mfa",{code:i,activeMfaType:s},{headers:{authorization:`Bearer ${e==null?void 0:e.getSnapshot().context.accessToken.value}`}})}})},Yi=({backendUrl:t,clientUrl:e})=>{const r=Me(t);return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:_({error:n=>xe}),saveRequestError:_({error:(n,{data:{error:i}})=>i}),reportError:W(n=>({type:"ERROR",error:n.error})),reportSuccess:W("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!ke(i)},services:{requestChange:(n,{email:i,options:s})=>r.post("/user/password/reset",{email:i,options:ce(e,s)})}})},Qi=({backendUrl:t,clientUrl:e})=>{const r=Me(t);return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:_({error:n=>xe}),saveRequestError:_({error:(n,{data:{error:i}})=>i}),reportError:W(n=>({type:"ERROR",error:n.error})),reportSuccess:W("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!ke(i)},services:{request:async(n,{email:i,options:s})=>(await r.post("/user/email/send-verification-email",{email:i,options:ce(e,s)})).data}})},Oc=({backendUrl:t,clientUrl:e,clientStorageGetter:r,clientStorageSetter:n,clientStorageType:i="web",clientStorage:s,refreshIntervalTime:o,autoRefreshToken:a=!0,autoSignIn:u=!0})=>{const c=r||Ec(i,s),l=n||wc(i,s),v=Me(t),d=async(p,f,h)=>(await v.post(p,f,h)).data;return Oe({schema:{context:{},events:{},services:{}},tsTypes:{},context:Zr,predictableActionArguments:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"signedIn"},{target:"signedOut"}],onError:[{cond:"shouldRetryImportToken",actions:"incrementTokenImportAttempts",target:"retryTokenImport"},{actions:["saveAuthenticationError"],target:"signedOut"}]}},retryTokenImport:{tags:["loading"],after:{RETRY_IMPORT_TOKEN_DELAY:"starting"}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptRefreshToken"],exit:["destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_MFA_TOTP:"authenticating.mfa.totp"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{1e3:{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged"],target:"pending"},onError:[{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",SIGNUP_SECURITY_KEY:"securityKey",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},securityKey:{entry:["resetErrors"],invoke:{src:"signUpSecurityKey",id:"signUpSecurityKey",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:W("SIGNED_IN"),reportSignedOut:W("SIGNED_OUT"),reportTokenChanged:W("TOKEN_CHANGED"),incrementTokenImportAttempts:_({importTokenAttempts:({importTokenAttempts:p})=>p+1}),clearContext:_(()=>(l(rr,null),l(tr,null),{...Zr})),clearContextExceptRefreshToken:_(({refreshToken:{value:p}})=>(l(rr,null),{...Zr,refreshToken:{value:p}})),saveSession:_({user:(p,{data:f})=>{var h;return((h=f==null?void 0:f.session)==null?void 0:h.user)||null},accessToken:(p,{data:f})=>{if(f.session){const{accessTokenExpiresIn:h,accessToken:m}=f.session,E=new Date(Date.now()+h*1e3);return l(rr,E.toISOString()),{value:m,expiresAt:E}}return l(rr,null),{value:null,expiresAt:null}},refreshToken:(p,{data:f})=>{var h;const m=((h=f.session)==null?void 0:h.refreshToken)||null;return m&&l(tr,m),{value:m}}}),saveMfaTicket:_({mfa:(p,f)=>{var h;return(h=f.data)==null?void 0:h.mfa}}),resetTimer:_({refreshTimer:p=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:_({refreshTimer:(p,f)=>({startedAt:p.refreshTimer.startedAt,attempts:p.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:_({errors:({errors:p},{data:{error:f}})=>({...p,authentication:f})}),resetErrors:_({errors:p=>({}),importTokenAttempts:p=>0}),saveRegistrationError:_({errors:({errors:p},{data:{error:f}})=>({...p,registration:f})}),destroyRefreshToken:_({refreshToken:p=>(l(tr,null),{value:null})}),cleanUrl:()=>{u&&ar("refreshToken")&&(Hi("refreshToken"),Hi("type"))},broadcastToken:p=>{if(u)try{new BroadcastChannel("nhost").postMessage(p.refreshToken.value)}catch{}}},guards:{isAnonymous:(p,f)=>{var h;return!!((h=p.user)!=null&&h.isAnonymous)},isSignedIn:p=>!!p.user&&!!p.refreshToken.value&&!!p.accessToken.value,noToken:p=>!p.refreshToken.value,hasRefreshToken:p=>!!p.refreshToken.value,isAutoRefreshDisabled:()=>!a,refreshTimerShouldRefresh:p=>{const{expiresAt:f}=p.accessToken;return f?p.refreshTimer.lastAttempt?Date.now()-p.refreshTimer.lastAttempt.getTime()>ac*1e3:o&&Date.now()-p.refreshTimer.startedAt.getTime()>o*1e3?!0:f.getTime()-Date.now()-1e3*oc<=0:!1},shouldRetryImportToken:(p,f)=>f.data.error.status===zi||f.data.error.status>=500,unverified:(p,{data:{error:f}})=>f.status===401&&(f.message==="Email is not verified"||f.error==="unverified-user"),hasSession:(p,f)=>{var h;return!!((h=f.data)!=null&&h.session)},hasMfaTicket:(p,f)=>{var h;return!!((h=f.data)!=null&&h.mfa)}},services:{signInPassword:(p,{email:f,password:h})=>ke(f)?Xr(h)?d("/signin/email-password",{email:f,password:h}):Promise.reject({error:Yr}):Promise.reject({error:xe}),passwordlessSms:(p,{phoneNumber:f,options:h})=>{var m;return qi(f)?(m=p.user)!=null&&m.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),d("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:f,options:ce(e,h)},{headers:{authorization:`Bearer ${p.accessToken.value}`}})):d("/signin/passwordless/sms",{phoneNumber:f,options:ce(e,h)}):Promise.reject({error:Gi})},passwordlessSmsOtp:(p,{phoneNumber:f,otp:h})=>qi(f)?d("/signin/passwordless/sms/otp",{phoneNumber:f,otp:h}):Promise.reject({error:Gi}),passwordlessEmail:(p,{email:f,options:h})=>{var m;return ke(f)?(m=p.user)!=null&&m.isAnonymous?d("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:f,options:ce(e,h)},{headers:{authorization:`Bearer ${p.accessToken.value}`}}):d("/signin/passwordless/email",{email:f,options:ce(e,h)}):Promise.reject({error:xe})},signInAnonymous:p=>d("/signin/anonymous"),signInMfaTotp:(p,f)=>{var h;const m=f.ticket||((h=p.mfa)==null?void 0:h.ticket);return m?Tc(m)?d("/signin/mfa/totp",{ticket:m,otp:f.otp}):Promise.reject({error:lc}):Promise.reject({error:dc})},signInSecurityKeyEmail:async(p,{email:f})=>{if(!ke(f))throw new ir(xe);const h=await d("/signin/webauthn",{email:f});let m;try{m=await ic(h)}catch(E){throw new ir(E)}return d("/signin/webauthn/verify",{email:f,credential:m})},refreshToken:async(p,f)=>{const h=f.type==="TRY_TOKEN"?f.token:p.refreshToken.value;return{session:await d("/token",{refreshToken:h}),error:null}},signout:(p,f)=>d("/signout",{refreshToken:p.refreshToken.value,all:!!f.all}),signUpEmailPassword:async(p,{email:f,password:h,options:m})=>{var E;return ke(f)?Xr(h)?(E=p.user)!=null&&E.isAnonymous?d("/user/deanonymize",{signInMethod:"email-password",email:f,password:h,options:ce(e,m)},{headers:{authorization:`Bearer ${p.accessToken.value}`}}):d("/signup/email-password",{email:f,password:h,options:ce(e,m)}):Promise.reject({error:Yr}):Promise.reject({error:xe})},signUpSecurityKey:async(p,{email:f,options:h})=>{if(!ke(f))return Promise.reject({error:xe});const m=h==null?void 0:h.nickname;m&&delete h.nickname;const E=await d("/signup/webauthn",{email:f,options:h});let T;try{T=await Bi(E)}catch(S){throw new ir(S)}return d("/signup/webauthn/verify",{credential:T,options:{redirectTo:h==null?void 0:h.redirectTo,nickname:m}})},importRefreshToken:async()=>{let p=null;if(u){const h=ar("refreshToken")||null;if(h)try{return{session:await d("/token",{refreshToken:h}),error:null}}catch(m){p=m.error}else{const m=ar("error");if(m)return Promise.reject({session:null,error:{status:he,error:m,message:ar("errorDescription")||m}})}}const f=await c(tr);if(f)try{return{session:await d("/token",{refreshToken:f}),error:null}}catch(h){p=h.error}return p?Promise.reject({error:p,session:null}):{error:null,session:null}}},delays:{RETRY_IMPORT_TOKEN_DELAY:({importTokenAttempts:p})=>p<5?1e3:5e3}})};class Ac{constructor({clientStorageType:e="web",autoSignIn:r=!0,autoRefreshToken:n=!0,start:i=!0,backendUrl:s,clientUrl:o,devTools:a,...u}){if(Le(this,"backendUrl"),Le(this,"clientUrl"),Le(this,"machine"),Le(this,"_interpreter"),Le(this,"_channel"),Le(this,"_subscriptions",new Set),this.backendUrl=s,this.clientUrl=o,this.machine=Oc({...u,backendUrl:s,clientUrl:o,clientStorageType:e,autoSignIn:r,autoRefreshToken:n}),i&&(this.interpreter=_e(this.machine,{devTools:a}),this.interpreter.start()),typeof window<"u"&&r)try{this._channel=new BroadcastChannel("nhost"),this._channel.addEventListener("message",c=>{var l;const v=(l=this.interpreter)==null?void 0:l.getSnapshot().context.refreshToken.value;this.interpreter&&c.data!==v&&this.interpreter.send("TRY_TOKEN",{token:c.data})})}catch{}}get interpreter(){return this._interpreter}set interpreter(e){this._interpreter=e,e&&this._subscriptions.forEach(r=>r(this))}onStart(e){this.interpreter?e(this):this._subscriptions.add(e)}}const Xi=async({backendUrl:t,interpreter:e},r)=>{const n=Me(t);try{const{data:i}=await n.post("/user/webauthn/add",{},{headers:{authorization:`Bearer ${e==null?void 0:e.getSnapshot().context.accessToken.value}`}});let s;try{s=await Bi(i)}catch(a){throw new ir(a)}const{data:o}=await n.post("/user/webauthn/verify",{credential:s,nickname:r},{headers:{authorization:`Bearer ${e==null?void 0:e.getSnapshot().context.accessToken.value}`}});return{key:o,isError:!1,error:null,isSuccess:!0}}catch(i){const{error:s}=i;return{isError:!0,error:s,isSuccess:!1}}},Zi=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,needsEmailVerification:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,needsEmailVerification:!0})})}),es=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{password:e,ticket:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSuccess:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSuccess:!0})})}),xc=t=>new Promise(e=>{t.send("GENERATE"),t.onTransition(r=>{r.matches("generated")?e({error:null,isError:!1,isGenerated:!0,qrCodeDataUrl:r.context.imageUrl||""}):r.matches({idle:"error"})&&e({error:r.context.error||null,isError:!0,isGenerated:!1,qrCodeDataUrl:""})})}),kc=(t,e)=>new Promise(r=>{t.send("ACTIVATE",{activeMfaType:"totp",code:e}),t.onTransition(n=>{n.matches({generated:"activated"})?r({error:null,isActivated:!0,isError:!1}):n.matches({generated:{idle:"error"}})&&r({error:n.context.error,isActivated:!1,isError:!0})})}),ts=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),rs=(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),ns=t=>new Promise(e=>{const{changed:r}=t.send("SIGNIN_ANONYMOUS");r||e({isSuccess:!1,isError:!0,error:Ee,user:null,accessToken:null}),t.onTransition(n=>{n.matches({authentication:"signedIn"})&&e({isSuccess:!0,isError:!1,error:null,user:n.context.user,accessToken:n.context.accessToken.value}),n.matches({authentication:{signedOut:"failed"}})&&e({isSuccess:!1,isError:!0,error:n.context.errors.authentication||null,user:null,accessToken:null})})}),is=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_PASSWORD",{email:e,password:r});if(!i)return n({accessToken:s.accessToken.value,error:Ee,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:{signedOut:"needsMfa"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:o.context.mfa,user:null}):o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:o.context.user})})}),en=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_EMAIL",{email:e,options:r});if(!i)return n({error:Ee,isError:!0,isSuccess:!1});t.onTransition(s=>{s.matches("registration.incomplete.failed")?n({error:s.context.errors.registration||null,isError:!0,isSuccess:!1}):s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&n({error:null,isError:!1,isSuccess:!0})})}),ss=(t,e)=>new Promise(r=>{const{changed:n,context:i}=t.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:e});if(!n)return r({accessToken:i.accessToken.value,error:Ee,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:i.user});t.onTransition(s=>{s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):s.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):s.matches({authentication:"signedIn"})&&r({accessToken:s.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:s.context.user})})}),os=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_MFA_TOTP",{otp:e,ticket:r});if(!i)return n({accessToken:s.accessToken.value,error:Ee,isError:!0,isSuccess:!1,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,user:o.context.user})})}),tn=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_SMS",{phoneNumber:e,options:r});if(!i)return n({error:Ee,isError:!0,isSuccess:!1,needsOtp:!1});t.onTransition(s=>{s.matches("registration.incomplete.needsOtp")?n({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):s.matches("registration.incomplete.failed")&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),rn=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:e,otp:r});if(!i)return n({error:Ee,isError:!0,isSuccess:!1,user:null,accessToken:null});t.onTransition(s=>{s.matches({authentication:"signedIn"})?n({error:null,isError:!1,isSuccess:!0,user:s.context.user,accessToken:s.context.accessToken.value}):s.matches({registration:{incomplete:"failed"}})&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null})})}),as=async(t,e)=>new Promise(r=>{const{event:n}=t.send("SIGNOUT",{all:e});if(n.type!=="SIGNED_OUT")return r({isSuccess:!1,isError:!0,error:pc});t.onTransition(i=>{i.matches({authentication:{signedOut:"success"}})?r({isSuccess:!0,isError:!1,error:null}):i.matches("authentication.signedOut.failed")&&r({isSuccess:!1,isError:!0,error:i.context.errors.signout||null})})}),nn=(t,e,r,n)=>new Promise(i=>{const{changed:s,context:o}=t.send("SIGNUP_EMAIL_PASSWORD",{email:e,password:r,options:n});if(!s)return i({error:Ee,accessToken:o.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:o.user});t.onTransition(a=>{a.matches("registration.incomplete.failed")?i({accessToken:null,error:a.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?i({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):a.matches({authentication:"signedIn",registration:"complete"})&&i({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:a.context.user})})}),cs=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNUP_SECURITY_KEY",{email:e,options:r});if(!i)return n({error:Ee,accessToken:s.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:s.user});t.onTransition(o=>{o.matches("registration.incomplete.failed")?n({accessToken:null,error:o.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):o.matches({authentication:"signedIn",registration:"complete"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:o.context.user})})});var Ic=Object.defineProperty,Rc=(t,e,r)=>e in t?Ic(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,us=(t,e,r)=>(Rc(t,typeof e!="symbol"?e+"":e,r),r);const Pc=()=>typeof window<"u",cr=t=>!t||!t.accessToken.value||!t.refreshToken.value||!t.accessToken.expiresAt||!t.user?null:{accessToken:t.accessToken.value,accessTokenExpiresIn:(t.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:t.refreshToken.value,user:t.user},Fe=({accessToken:t,isError:e,user:r,error:n})=>e?{session:null,error:n}:r&&t?{session:{accessToken:t,accessTokenExpiresIn:0,refreshToken:"",user:r},error:null}:{session:null,error:null};class Nc{constructor({url:e,autoRefreshToken:r=!0,autoSignIn:n=!0,autoLogin:i,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:u,refreshIntervalTime:c,start:l=!0}){us(this,"_client"),us(this,"url");var v;this.url=e,this._client=new Ac({backendUrl:e,clientUrl:typeof window<"u"&&((v=window.location)==null?void 0:v.origin)||"",autoRefreshToken:r,autoSignIn:typeof i=="boolean"?i:n,start:l,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:u,refreshIntervalTime:c})}async signUp(e){const r=await this.waitUntilReady(),{email:n,options:i}=e;return"securityKey"in e?Fe(await cs(r,n,i)):Fe(await nn(r,n,e.password,i))}async signIn(e){const r=await this.waitUntilReady();if(!e){const n=await ns(r);return{...Fe(n),mfa:null}}if("provider"in e){const{provider:n,options:i}=e,s=Qr(`${this._client.backendUrl}/signin/provider/${n}`,ce(this._client.clientUrl,i));return Pc()&&(window.location.href=s),{providerUrl:s,provider:n,session:null,mfa:null,error:null}}if("email"in e&&"password"in e){const n=await is(r,e.email,e.password);return n.needsEmailVerification?{session:null,mfa:null,error:vc}:n.needsMfaOtp?{session:null,mfa:n.mfa,error:null}:{...Fe(n),mfa:null}}if("email"in e&&"securityKey"in e){if(e.securityKey!==!0)throw Error("securityKey must be true");const n=await ss(r,e.email);return{...Fe(n),mfa:null}}if("email"in e){const{email:n,options:i}=e,{error:s}=await en(r,n,i);return{session:null,mfa:null,error:s}}if("phoneNumber"in e&&"otp"in e){const n=await rn(r,e.phoneNumber,e.otp);return{...Fe(n),mfa:null}}if("phoneNumber"in e){const{error:n}=await tn(r,e.phoneNumber,e.options);return{error:n,mfa:null,session:null}}if("otp"in e){const n=await os(r,e.otp,e.ticket);return{...Fe(n),mfa:null}}return{error:yc,mfa:null,session:null}}async signOut(e){const r=await this.waitUntilReady(),{error:n}=await as(r,e==null?void 0:e.all);return{error:n}}async resetPassword({email:e,options:r}){const n=_e(Yi(this._client)).start(),{error:i}=await ts(n,e,r);return{error:i}}async changePassword({newPassword:e,ticket:r}){const n=_e(Wi(this._client)).start(),{error:i}=await es(n,e,r);return{error:i}}async sendVerificationEmail({email:e,options:r}){const n=_e(Qi(this._client)).start(),{error:i}=await rs(n,e,r);return{error:i}}async changeEmail({newEmail:e,options:r}){const n=_e(Ji(this._client)).start(),{error:i}=await Zi(n,e,r);return{error:i}}async deanonymize(e){const r=await this.waitUntilReady();if(e.signInMethod==="passwordless"){if(e.connection==="email"){const{error:n}=await en(r,e.email,e.options);return{error:n}}if(e.connection==="sms"){const{error:n}=await tn(r,e.phoneNumber,e.options);return{error:n}}}if(e.signInMethod==="email-password"){const{error:n}=await nn(r,e.email,e.password,e.options);return{error:n}}throw Error("Unknown deanonymization method")}async addSecurityKey(e){const{error:r,key:n}=await Xi(this._client,e);return{error:r,key:n}}onTokenChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{i.type==="TOKEN_CHANGED"&&e(cr(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}onAuthStateChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{(i.type==="SIGNED_IN"||i.type==="SIGNED_OUT")&&e(i.type,cr(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onAuthStateChanged was added before the interpreter started. Cannot unsubscribe listener.")}}isAuthenticated(){var e;return!!((e=this._client.interpreter)!=null&&e.getSnapshot().matches({authentication:"signedIn"}))}async isAuthenticatedAsync(){return(await this.waitUntilReady()).getSnapshot().matches({authentication:"signedIn"})}getAuthenticationStatus(){var e;const r=((e=this.client.interpreter)==null?void 0:e.getSnapshot().context.importTokenAttempts)||0;return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1,connectionAttempts:r}:{isAuthenticated:!1,isLoading:!0,connectionAttempts:r}}getJWTToken(){return this.getAccessToken()}getAccessToken(){var e,r;return(r=(e=this._client.interpreter)==null?void 0:e.getSnapshot().context.accessToken.value)!=null?r:void 0}getDecodedAccessToken(){const e=this.getAccessToken();return e?Rn(e):null}getHasuraClaims(){var e;return((e=this.getDecodedAccessToken())==null?void 0:e["https://hasura.io/jwt/claims"])||null}getHasuraClaim(e){var r;return((r=this.getHasuraClaims())==null?void 0:r[e.startsWith("x-hasura-")?e:`x-hasura-${e}`])||null}async refreshSession(e){try{const r=await this.waitUntilReady();return new Promise(n=>{const i=e||r.getSnapshot().context.refreshToken.value;if(!i)return n({session:null,error:fc});const{changed:s}=r.send("TRY_TOKEN",{token:i});if(!s)return n({session:null,error:hc});r.onTransition(o=>{o.matches({token:{idle:"error"}})?n({session:null,error:mc}):o.event.type==="TOKEN_CHANGED"&&n({session:cr(o.context),error:null})})})}catch(r){return{session:null,error:r.message}}}getSession(){var e,r;return cr((r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())==null?void 0:r.context)}getUser(){var e,r,n;return((n=(r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())==null?void 0:r.context)==null?void 0:n.user)||null}waitUntilReady(){const e=this._client.interpreter;if(!e)throw Error("Auth interpreter not set");return e.getSnapshot().hasTag("loading")?new Promise((r,n)=>{let i=setTimeout(()=>n(`The state machine is not yet ready after ${15} seconds.`),15e3);e.onTransition(s=>{if(!s.hasTag("loading"))return clearTimeout(i),r(e)})}):Promise.resolve(e)}isReady(){var e,r;return!((r=(e=this._client.interpreter)==null?void 0:e.getSnapshot())!=null&&r.hasTag("loading"))}get client(){return this._client}}function Dc(t,e){var r=Boolean(t);if(!r)throw new Error(e!=null?e:"Unexpected invariant triggered.")}var Uc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const sn=Uc;function ls(t){var e=t.prototype.toJSON;typeof e=="function"||Dc(0),t.prototype.inspect=e,sn&&(t.prototype[sn]=e)}var _c=function(){function t(r,n,i){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=i}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();ls(_c);var Cc=function(){function t(r,n,i,s,o,a,u){this.kind=r,this.start=n,this.end=i,this.line=s,this.column=o,this.value=u,this.prev=a,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();ls(Cc);function ds(t){return t!=null&&typeof t.kind=="string"}function ur(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ur=function(r){return typeof r}:ur=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ur(t)}var Lc=10,fs=2;function jc(t){return lr(t,[])}function lr(t,e){switch(ur(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":Mc(t,e);default:return String(t)}}function Mc(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=$c(t);if(n!==void 0){var i=n.call(t);if(i!==t)return typeof i=="string"?i:lr(i,r)}else if(Array.isArray(t))return Vc(t,r);return Fc(t,r)}function Fc(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>fs)return"["+Bc(t)+"]";var n=r.map(function(i){var s=lr(t[i],e);return i+": "+s});return"{ "+n.join(", ")+" }"}function Vc(t,e){if(t.length===0)return"[]";if(e.length>fs)return"[Array]";for(var r=Math.min(Lc,t.length),n=t.length-r,i=[],s=0;s<r;++s)i.push(lr(t[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}function $c(t){var e=t[String(sn)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function Bc(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function zc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,i=t[0]===" "||t[0]==="	",s=t[t.length-1]==='"',o=t[t.length-1]==="\\",a=!n||s||o||r,u="";return a&&!(n&&i)&&(u+=`
`+e),u+=e?t.replace(/\n/g,`
`+e):t,a&&(u+=`
`),'"""'+u.replace(/"""/g,'\\"""')+'"""'}var Kc={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Gc=Object.freeze({});function Hc(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kc,n=void 0,i=Array.isArray(t),s=[t],o=-1,a=[],u=void 0,c=void 0,l=void 0,v=[],d=[],p=t;do{o++;var f=o===s.length,h=f&&a.length!==0;if(f){if(c=d.length===0?void 0:v[v.length-1],u=l,l=d.pop(),h){if(i)u=u.slice();else{for(var m={},E=0,T=Object.keys(u);E<T.length;E++){var S=T[E];m[S]=u[S]}u=m}for(var b=0,x=0;x<a.length;x++){var k=a[x][0],R=a[x][1];i&&(k-=b),i&&R===null?(u.splice(k,1),b++):u[k]=R}}o=n.index,s=n.keys,a=n.edits,i=n.inArray,n=n.prev}else{if(c=l?i?o:s[o]:void 0,u=l?l[c]:p,u==null)continue;l&&v.push(c)}var P=void 0;if(!Array.isArray(u)){if(!ds(u))throw new Error("Invalid AST Node: ".concat(jc(u),"."));var N=qc(e,u.kind,f);if(N){if(P=N.call(e,u,c,l,v,d),P===Gc)break;if(P===!1){if(!f){v.pop();continue}}else if(P!==void 0&&(a.push([c,P]),!f))if(ds(P))u=P;else{v.pop();continue}}}if(P===void 0&&h&&a.push([c,u]),f)v.pop();else{var A;n={inArray:i,index:o,keys:s,edits:a,prev:n},i=Array.isArray(u),s=i?u:(A=r[u.kind])!==null&&A!==void 0?A:[],o=-1,a=[],l&&d.push(l),l=u}}while(n!==void 0);return a.length!==0&&(p=a[a.length-1][1]),p}function qc(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var i=r?n.leave:n.enter;if(typeof i=="function")return i}else{var s=r?t.leave:t.enter;if(s){if(typeof s=="function")return s;var o=s[e];if(typeof o=="function")return o}}}function Jc(t){return Hc(t,{leave:Yc})}var Wc=80,Yc={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return O(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,i=K("(",O(e.variableDefinitions,", "),")"),s=O(e.directives," "),o=e.selectionSet;return!n&&!s&&!i&&r==="query"?o:O([r,O([n,i]),s,o]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,i=e.defaultValue,s=e.directives;return r+": "+n+K(" = ",i)+K(" ",O(s," "))},SelectionSet:function(e){var r=e.selections;return le(r)},Field:function(e){var r=e.alias,n=e.name,i=e.arguments,s=e.directives,o=e.selectionSet,a=K("",r,": ")+n,u=a+K("(",O(i,", "),")");return u.length>Wc&&(u=a+K(`(
`,dr(O(i,`
`)),`
)`)),O([u,O(s," "),o]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+K(" ",O(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,i=e.selectionSet;return O(["...",K("on ",r),O(n," "),i]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,i=e.variableDefinitions,s=e.directives,o=e.selectionSet;return"fragment ".concat(r).concat(K("(",O(i,", "),")")," ")+"on ".concat(n," ").concat(K("",O(s," ")," "))+o},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,i=e.block;return i?zc(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+O(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+O(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+K("(",O(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:ue(function(t){var e=t.directives,r=t.operationTypes;return O(["schema",O(e," "),le(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:ue(function(t){var e=t.name,r=t.directives;return O(["scalar",e,O(r," ")]," ")}),ObjectTypeDefinition:ue(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return O(["type",e,K("implements ",O(r," & ")),O(n," "),le(i)]," ")}),FieldDefinition:ue(function(t){var e=t.name,r=t.arguments,n=t.type,i=t.directives;return e+(hs(r)?K(`(
`,dr(O(r,`
`)),`
)`):K("(",O(r,", "),")"))+": "+n+K(" ",O(i," "))}),InputValueDefinition:ue(function(t){var e=t.name,r=t.type,n=t.defaultValue,i=t.directives;return O([e+": "+r,K("= ",n),O(i," ")]," ")}),InterfaceTypeDefinition:ue(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return O(["interface",e,K("implements ",O(r," & ")),O(n," "),le(i)]," ")}),UnionTypeDefinition:ue(function(t){var e=t.name,r=t.directives,n=t.types;return O(["union",e,O(r," "),n&&n.length!==0?"= "+O(n," | "):""]," ")}),EnumTypeDefinition:ue(function(t){var e=t.name,r=t.directives,n=t.values;return O(["enum",e,O(r," "),le(n)]," ")}),EnumValueDefinition:ue(function(t){var e=t.name,r=t.directives;return O([e,O(r," ")]," ")}),InputObjectTypeDefinition:ue(function(t){var e=t.name,r=t.directives,n=t.fields;return O(["input",e,O(r," "),le(n)]," ")}),DirectiveDefinition:ue(function(t){var e=t.name,r=t.arguments,n=t.repeatable,i=t.locations;return"directive @"+e+(hs(r)?K(`(
`,dr(O(r,`
`)),`
)`):K("(",O(r,", "),")"))+(n?" repeatable":"")+" on "+O(i," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return O(["extend schema",O(r," "),le(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return O(["extend scalar",r,O(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,s=e.fields;return O(["extend type",r,K("implements ",O(n," & ")),O(i," "),le(s)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,s=e.fields;return O(["extend interface",r,K("implements ",O(n," & ")),O(i," "),le(s)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,i=e.types;return O(["extend union",r,O(n," "),i&&i.length!==0?"= "+O(i," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,i=e.values;return O(["extend enum",r,O(n," "),le(i)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,i=e.fields;return O(["extend input",r,O(n," "),le(i)]," ")}};function ue(t){return function(e){return O([e.description,t(e)],`
`)}}function O(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function le(t){return K(`{
`,dr(O(t,`
`)),`
}`)}function K(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function dr(t){return K("  ",t.replace(/\n/g,`
  `))}function Qc(t){return t.indexOf(`
`)!==-1}function hs(t){return t!=null&&t.some(Qc)}var Xc=Object.defineProperty,Zc=(t,e,r)=>e in t?Xc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qe=(t,e,r)=>(Zc(t,typeof e!="symbol"?e+"":e,r),r);class eu{constructor({url:e}){Qe(this,"url"),Qe(this,"httpClient"),Qe(this,"accessToken"),Qe(this,"adminSecret"),this.url=e,this.httpClient=Et.create({baseURL:this.url})}async upload(e){const{formData:r}=e;try{return{fileMetadata:(await this.httpClient.post("/files",r,{headers:{...this.generateUploadHeaders(e),...this.generateAuthHeaders(),"Content-Type":"multipart/form-data"}})).data,error:null}}catch(n){return{fileMetadata:null,error:n}}}async getPresignedUrl(e){try{const{fileId:r}=e;return{presignedUrl:(await this.httpClient.get(`/files/${r}/presignedurl`,{headers:{...this.generateAuthHeaders()}})).data,error:null}}catch(r){return{presignedUrl:null,error:r}}}async delete(e){try{const{fileId:r}=e;return await this.httpClient.delete(`/files/${r}`,{headers:{...this.generateAuthHeaders()}}),{error:null}}catch(r){return{error:r}}}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateUploadHeaders(e){const{bucketId:r,name:n,id:i}=e,s={};return r&&(s["x-nhost-bucket-id"]=r),i&&(s["x-nhost-file-id"]=i),n&&(s["x-nhost-file-name"]=n),s}generateAuthHeaders(){return!this.adminSecret&&!this.accessToken?null:this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}}class tu{constructor({url:e,adminSecret:r}){Qe(this,"url"),Qe(this,"api"),this.url=e,this.api=new eu({url:e}),this.setAdminSecret(r)}async upload(e){let r;"file"in e?(r=new Ei,r.append("file",e.file)):r=e.formData;const{fileMetadata:n,error:i}=await this.api.upload({...e,formData:r});return i?{fileMetadata:null,error:i}:n?{fileMetadata:n,error:null}:{fileMetadata:null,error:new Error("Invalid file returned")}}getUrl(e){return this.getPublicUrl(e)}getPublicUrl(e){const{fileId:r}=e;return`${this.url}/files/${r}`}async getPresignedUrl(e){const{presignedUrl:r,error:n}=await this.api.getPresignedUrl(e);return n?{presignedUrl:null,error:n}:r?{presignedUrl:r,error:null}:{presignedUrl:null,error:new Error("Invalid file id")}}async delete(e){const{error:r}=await this.api.delete(e);return r?{error:r}:{error:null}}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}const ps={progress:null,loaded:0,error:null},vs=()=>Oe({predictableActionArguments:!0,schema:{context:{},events:{}},tsTypes:{},context:{...ps},initial:"idle",on:{DESTROY:{actions:"sendDestroy",target:"stopped"}},states:{idle:{on:{ADD:{actions:"addFile"},UPLOAD:{cond:"hasFile",target:"uploading"}}},uploading:{entry:"resetProgress",on:{UPLOAD_PROGRESS:{actions:["incrementProgress","sendProgress"]},UPLOAD_DONE:"uploaded",UPLOAD_ERROR:"error",CANCEL:"idle"},invoke:{src:"uploadFile"}},uploaded:{entry:["setFileMetadata","sendDone"]},error:{entry:["setError","sendError"]},stopped:{type:"final"}}},{guards:{hasFile:(t,e)=>!!t.file||!!e.file},actions:{incrementProgress:_({loaded:(t,{loaded:e})=>e,progress:(t,{progress:e})=>e}),setFileMetadata:_({id:(t,{id:e})=>e,bucketId:(t,{bucketId:e})=>e,progress:t=>100}),setError:_({error:(t,{error:e})=>e}),sendProgress:()=>{},sendError:()=>{},sendDestroy:()=>{},sendDone:()=>{},resetProgress:_({progress:t=>null,loaded:t=>0}),addFile:_({file:(t,{file:e})=>e,bucketId:(t,{bucketId:e})=>e,id:(t,{id:e})=>e})},services:{uploadFile:(t,e)=>r=>{const n={"Content-Type":"multipart/form-data"},i=e.id||t.id;i&&(n["x-nhost-file-id"]=i);const s=e.bucketId||t.bucketId;s&&(n["x-nhost-bucket-id"]=s);const o=e.file||t.file;n["x-nhost-file-name"]=e.name||o.name;const a=new FormData;a.append("file",o),e.adminSecret&&(n["x-hasura-admin-secret"]=e.adminSecret),e.accessToken&&(n.Authorization=`Bearer ${e.accessToken}`);let u=0;const c=new AbortController;return Et.post(e.url+"/files",a,{headers:n,signal:c.signal,onUploadProgress:l=>{const v=l.total?Math.round(l.loaded*o.size/l.total):0,d=v-u;u=v,r({type:"UPLOAD_PROGRESS",progress:l.total?Math.round(v*100/l.total):0,loaded:v,additions:d})}}).then(({data:{id:l,bucketId:v}})=>{r({type:"UPLOAD_DONE",id:l,bucketId:v})}).catch(({response:l,message:v})=>{var d,p,f,h,m;r({type:"UPLOAD_ERROR",error:{status:(d=l==null?void 0:l.status)!=null?d:0,message:((f=(p=l==null?void 0:l.data)==null?void 0:p.error)==null?void 0:f.message)||v,error:((m=(h=l==null?void 0:l.data)==null?void 0:h.error)==null?void 0:m.message)||v}})}),()=>{c.abort()}}}}),{pure:on,sendParent:fr}=Oo,ru=()=>Oe({id:"files-list",schema:{context:{},events:{}},tsTypes:{},predictableActionArguments:!0,context:{progress:null,files:[],loaded:0,total:0},initial:"idle",on:{UPLOAD:{cond:"hasFileToDownload",actions:"addItem",target:"uploading"},ADD:{actions:"addItem"},REMOVE:{actions:"removeItem"}},states:{idle:{entry:["resetProgress","resetLoaded","resetTotal"],on:{CLEAR:{actions:"clearList",target:"idle"}}},uploading:{entry:["upload","startProgress","resetLoaded","resetTotal"],on:{UPLOAD_PROGRESS:{actions:["incrementProgress"]},UPLOAD_DONE:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],UPLOAD_ERROR:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],CANCEL:{actions:"cancel",target:"idle"}}},uploaded:{entry:"setUploaded",on:{CLEAR:{actions:"clearList",target:"idle"}}},error:{on:{CLEAR:{actions:"clearList",target:"idle"}}}}},{guards:{hasFileToDownload:(t,e)=>t.files.some(r=>r.getSnapshot().matches("idle"))||!!e.files,isAllUploaded:t=>t.files.every(e=>{var r;return(r=e.getSnapshot())==null?void 0:r.matches("uploaded")}),isAllUploadedOrError:t=>t.files.every(e=>{const r=e.getSnapshot();return(r==null?void 0:r.matches("error"))||(r==null?void 0:r.matches("uploaded"))})},actions:{incrementProgress:_((t,e)=>{const r=t.loaded+e.additions,n=Math.round(r*100/t.total);return{...t,loaded:r,progress:n}}),setUploaded:_({progress:t=>100,loaded:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetTotal:_({total:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>!e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetLoaded:_({loaded:t=>0}),startProgress:_({progress:t=>0}),resetProgress:_({progress:t=>null}),addItem:_((t,{files:e,bucketId:r})=>{const n=e?Array.isArray(e)?e:"length"in e?Array.from(e):[e]:[],i=t.total+n.reduce((o,a)=>o+a.size,0),s=Math.round(t.loaded*100/i);return{files:[...t.files,...n.map(o=>Bo(vs().withConfig({actions:{sendProgress:fr((a,{additions:u})=>({type:"UPLOAD_PROGRESS",additions:u})),sendDone:fr("UPLOAD_DONE"),sendError:fr("UPLOAD_ERROR"),sendDestroy:fr("REMOVE")}}).withContext({...ps,file:o,bucketId:r}),{sync:!0}))],total:i,loaded:t.loaded,progress:s}}),removeItem:_({files:t=>t.files.filter(e=>{var r,n;const i=(r=e.getSnapshot())==null?void 0:r.matches("stopped");return i&&((n=e.stop)==null||n.call(e)),!i})}),clearList:on(t=>t.files.map(e=>W({type:"DESTROY"},{to:e.id}))),upload:on((t,e)=>t.files.map(r=>W(e,{to:r.id}))),cancel:on(t=>t.files.map(e=>W({type:"CANCEL"},{to:e.id})))}}),nu=async(t,e,r)=>new Promise(n=>{e.send({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,...r}),e.subscribe(i=>{var s;i.matches("error")?n({error:i.context.error,isError:!0,isUploaded:!1}):i.matches("uploaded")&&n({error:null,isError:!1,isUploaded:!0,id:i.context.id,bucketId:i.context.id,name:(s=i.context.file)==null?void 0:s.name})})}),iu=async(t,e,r)=>new Promise(n=>{e.send({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,bucketId:r==null?void 0:r.bucketId,files:r==null?void 0:r.files}),e.onTransition(i=>{i.matches("error")?n({errors:i.context.files.filter(s=>{var o;return(o=s.getSnapshot())==null?void 0:o.context.error}),isError:!0,files:[]}):i.matches("uploaded")&&n({errors:[],isError:!1,files:i.context.files})})});var su=Object.defineProperty,ou=(t,e,r)=>e in t?su(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,re=(t,e,r)=>(ou(t,typeof e!="symbol"?e+"":e,r),r);const au=/^((?<protocol>http[s]?):\/\/)?(?<host>localhost)(:(?<port>(\d+|__\w+__)))?$/;function hr(t,e){const{backendUrl:r,subdomain:n,region:i}=t;if(r)return`${r}/v1/${e}`;if(!n)throw new Error("Either `backendUrl` or `subdomain` must be set.");const s=n.match(au);if(s!=null&&s.groups){const{protocol:o="http",host:a,port:u=1337}=s.groups;return lu(e)||`${o}://${a}:${u}/v1/${e}`}if(!i)throw new Error('`region` must be set when using a `subdomain` other than "localhost".');return`https://${n}.${e}.${i}.nhost.run/v1`}function cu(){return typeof window<"u"}function uu(){return typeof process<"u"&&process.env}function lu(t){return cu()||!uu()?null:process.env[`NHOST_${t.toUpperCase()}_URL`]}function du(t){const e="subdomain"in t||"backendUrl"in t?hr(t,"auth"):t.authUrl;if(!e)throw new Error("Please provide `subdomain` or `authUrl`.");return new Nc({url:e,...t})}function fu(t){const e="subdomain"in t||"backendUrl"in t?hr(t,"functions"):t.functionsUrl;if(!e)throw new Error("Please provide `subdomain` or `functionsUrl`.");return new hu({url:e,...t})}class hu{constructor(e){re(this,"url"),re(this,"instance"),re(this,"accessToken"),re(this,"adminSecret");const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=Et.create({baseURL:r})}async call(e,r,n){const i={...this.generateAccessTokenHeaders(),...n==null?void 0:n.headers};let s;try{s=await this.instance.post(e,r,{...n,headers:i})}catch(o){if(o instanceof Error)return{res:null,error:o}}return s?{res:s,error:null}:{res:null,error:new Error("Unable to make post request to funtion")}}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}function pu(t){const e="subdomain"in t||"backendUrl"in t?hr(t,"graphql"):t.graphqlUrl;if(!e)throw new Error("Please provide `subdomain` or `graphqlUrl`.");return new vu({url:e,...t})}class vu{constructor(e){re(this,"url"),re(this,"instance"),re(this,"accessToken"),re(this,"adminSecret");const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=Et.create({baseURL:r})}async request(e,r,n){const i={...this.generateAccessTokenHeaders(),...n==null?void 0:n.headers,"Accept-Encoding":"*"};try{const s="",o=(await this.instance.post("",{operationName:s||void 0,query:typeof e=="string"?e:Jc(e),variables:r},{...n,headers:i})).data,{data:a}=o;return o.errors?{data:null,error:o.errors}:typeof a!="object"||Array.isArray(a)||a===null?{data:null,error:new Error("incorrect response data from GraphQL server")}:{data:a,error:null}}catch(s){return s instanceof Error?{data:null,error:s}:(console.error(s),{data:null,error:new Error("Unable to get do GraphQL request")})}}getUrl(){return this.url}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}function mu(t){const e="subdomain"in t||"backendUrl"in t?hr(t,"storage"):t.storageUrl;if(!e)throw new Error("Please provide `subdomain` or `storageUrl`.");return new tu({url:e,...t})}class yu{constructor({refreshIntervalTime:e,clientStorageGetter:r,clientStorageSetter:n,clientStorage:i,clientStorageType:s,autoRefreshToken:o,autoSignIn:a,adminSecret:u,devTools:c,start:l=!0,...v}){re(this,"auth"),re(this,"storage"),re(this,"functions"),re(this,"graphql"),re(this,"_adminSecret"),re(this,"devTools"),this.auth=du({refreshIntervalTime:e,clientStorageGetter:r,clientStorageSetter:n,clientStorage:i,clientStorageType:s,autoRefreshToken:o,autoSignIn:a,start:l,...v}),this.storage=mu({adminSecret:u,...v}),this.functions=fu({adminSecret:u,...v}),this.graphql=pu({adminSecret:u,...v}),this.auth.client.onStart(()=>{const d=this.auth.getAccessToken();this.storage.setAccessToken(d),this.functions.setAccessToken(d),this.graphql.setAccessToken(d),this.auth.onAuthStateChanged((p,f)=>{p==="SIGNED_OUT"&&(this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0))}),this.auth.onTokenChanged(p=>{const f=p==null?void 0:p.accessToken;this.storage.setAccessToken(f),this.functions.setAccessToken(f),this.graphql.setAccessToken(f)})}),this._adminSecret=u,this.devTools=c}get adminSecret(){return this._adminSecret}set adminSecret(e){this._adminSecret=e,this.storage.setAdminSecret(e)}}class gu extends yu{constructor(e){super({...e,start:!1})}}var ms={exports:{}},an={},cn={exports:{}},un={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys;function Su(){if(ys)return un;ys=1;var t=Ot.default;function e(v,d){return v===d&&(v!==0||1/v===1/d)||v!==v&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(v,d){var p=d(),f=n({inst:{value:p,getSnapshot:d}}),h=f[0].inst,m=f[1];return s(function(){h.value=p,h.getSnapshot=d,u(h)&&m({inst:h})},[v,p,d]),i(function(){return u(h)&&m({inst:h}),v(function(){u(h)&&m({inst:h})})},[v]),o(p),p}function u(v){var d=v.getSnapshot;v=v.value;try{var p=d();return!r(v,p)}catch{return!0}}function c(v,d){return d()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return un.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,un}var ln={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs;function Eu(){return gs||(gs=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Ot.default,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(S){{for(var b=arguments.length,x=new Array(b>1?b-1:0),k=1;k<b;k++)x[k-1]=arguments[k];n("error",S,x)}}function n(S,b,x){{var k=e.ReactDebugCurrentFrame,R=k.getStackAddendum();R!==""&&(b+="%s",x=x.concat([R]));var P=x.map(function(N){return String(N)});P.unshift("Warning: "+b),Function.prototype.apply.call(console[S],console,P)}}function i(S,b){return S===b&&(S!==0||1/S===1/b)||S!==S&&b!==b}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,u=t.useLayoutEffect,c=t.useDebugValue,l=!1,v=!1;function d(S,b,x){l||t.startTransition!==void 0&&(l=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var k=b();if(!v){var R=b();s(k,R)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),v=!0)}var P=o({inst:{value:k,getSnapshot:b}}),N=P[0].inst,A=P[1];return u(function(){N.value=k,N.getSnapshot=b,p(N)&&A({inst:N})},[S,k,b]),a(function(){p(N)&&A({inst:N});var V=function(){p(N)&&A({inst:N})};return S(V)},[S]),c(k),k}function p(S){var b=S.getSnapshot,x=S.value;try{var k=b();return!s(x,k)}catch{return!0}}function f(S,b,x){return b()}var h=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m=!h,E=m?f:d,T=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:E;ln.useSyncExternalStore=T,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ln}(function(t){process.env.NODE_ENV==="production"?t.exports=Su():t.exports=Eu()})(cn);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss;function wu(){if(Ss)return an;Ss=1;var t=Ot.default,e=cn.exports;function r(c,l){return c===l&&(c!==0||1/c===1/l)||c!==c&&l!==l}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,u=t.useDebugValue;return an.useSyncExternalStoreWithSelector=function(c,l,v,d,p){var f=s(null);if(f.current===null){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=a(function(){function E(k){if(!T){if(T=!0,S=k,k=d(k),p!==void 0&&h.hasValue){var R=h.value;if(p(R,k))return b=R}return b=k}if(R=b,n(S,k))return R;var P=d(k);return p!==void 0&&p(R,P)?R:(S=k,b=P)}var T=!1,S,b,x=v===void 0?null:v;return[function(){return E(l())},x===null?void 0:function(){return E(x())}]},[l,v,d,p]);var m=i(c,f[0],f[1]);return o(function(){h.hasValue=!0,h.value=m},[m]),u(m),m},an}var dn={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es;function Tu(){return Es||(Es=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Ot.default,e=cn.exports;function r(l,v){return l===v&&(l!==0||1/l===1/v)||l!==l&&v!==v}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,u=t.useDebugValue;function c(l,v,d,p,f){var h=s(null),m;h.current===null?(m={hasValue:!1,value:null},h.current=m):m=h.current;var E=a(function(){var x=!1,k,R,P=function(H){if(!x){x=!0,k=H;var ee=p(H);if(f!==void 0&&m.hasValue){var se=m.value;if(f(se,ee))return R=se,se}return R=ee,ee}var Re=k,bt=R;if(n(Re,H))return bt;var Pe=p(H);return f!==void 0&&f(bt,Pe)?bt:(k=H,R=Pe,Pe)},N=d===void 0?null:d,A=function(){return P(v())},V=N===null?void 0:function(){return P(N())};return[A,V]},[v,d,p,f]),T=E[0],S=E[1],b=i(l,T,S);return o(function(){m.hasValue=!0,m.value=b},[b]),u(b),b}dn.useSyncExternalStoreWithSelector=c,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),dn}(function(t){process.env.NODE_ENV==="production"?t.exports=wu():t.exports=Tu()})(ms);var bu=D.useLayoutEffect;function ws(t){var e=qs.useRef();return e.current||(e.current={v:t()}),e.current.v}var pr=globalThis&&globalThis.__assign||function(){return pr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pr.apply(this,arguments)},Ou=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Ts=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s};function Au(t,e){var r=ws(function(){return typeof t=="function"?t():t});if(process.env.NODE_ENV!=="production"&&typeof t!="function"){var n=Ts(D.useState(r),1),i=n[0];t!==i&&console.warn("Machine given to `useMachine` has changed between renders. This is not supported and might lead to unexpected results.\nPlease make sure that you pass the same Machine as argument each time.")}var s=e.context,o=e.guards,a=e.actions,u=e.activities,c=e.services,l=e.delays;e.state;var v=Ou(e,["context","guards","actions","activities","services","delays","state"]),d=ws(function(){var p={context:s,guards:o,actions:a,activities:u,services:c,delays:l},f=r.withConfig(p,function(){return pr(pr({},r.context),s)});return _e(f,v)});return bu(function(){Object.assign(d.machine.options.actions,a),Object.assign(d.machine.options.guards,o),Object.assign(d.machine.options.activities,u),Object.assign(d.machine.options.services,c),Object.assign(d.machine.options.delays,l)},[a,o,u,c,l]),d}function Ie(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Ts(e,2),i=n[0],s=i===void 0?{}:i,o=n[1],a=Au(t,s);return D.useEffect(function(){if(!!o){var u=a.subscribe(at(o));return function(){u.unsubscribe()}}},[o]),D.useEffect(function(){var u=s.state;return a.start(u?ae.create(u):void 0),function(){a.stop(),a.status=q.NotStarted}},[]),a}function xu(t){return"state"in t}globalThis&&globalThis.__read,globalThis&&globalThis.__values;function ku(t){return t.status!==0?t.state:t.machine.initialState}function Iu(t){return"state"in t&&"machine"in t}var Ru=function(t,e){return t===e},Pu=function(t,e){if(Iu(t)){if(t.status===0&&e.current)return e.current;var r=ku(t);return e.current=t.status===0?r:null,r}return xu(t)?t.state:void 0};function g(t,e,r,n){r===void 0&&(r=Ru);var i=D.useRef(null),s=D.useCallback(function(u){var c=t.subscribe(u).unsubscribe;return c},[t]),o=D.useCallback(function(){return n?n(t):Pu(t,i)},[t,n]),a=ms.exports.useSyncExternalStoreWithSelector(s,o,o,e,r);return a}function Z(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=Mu[t],s=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+t;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Xe(t){return!!t&&!!t[ne]}function Ve(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var r=Object.getPrototypeOf(e);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Fu}(t)||Array.isArray(t)||!!t[Ds]||!!t.constructor[Ds]||hn(t)||pn(t))}function wt(t,e,r){r===void 0&&(r=!1),Ze(t)===0?(r?Object.keys:xn)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Ze(t){var e=t[ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:hn(t)?2:pn(t)?3:0}function fn(t,e){return Ze(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Nu(t,e){return Ze(t)===2?t.get(e):t[e]}function bs(t,e,r){var n=Ze(t);n===2?t.set(e,r):n===3?(t.delete(e),t.add(r)):t[e]=r}function Du(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function hn(t){return Lu&&t instanceof Map}function pn(t){return ju&&t instanceof Set}function $e(t){return t.o||t.t}function vn(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Vu(t);delete e[ne];for(var r=xn(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function mn(t,e){return e===void 0&&(e=!1),yn(t)||Xe(t)||!Ve(t)||(Ze(t)>1&&(t.set=t.add=t.clear=t.delete=Uu),Object.freeze(t),e&&wt(t,function(r,n){return mn(n,!0)},!0)),t}function Uu(){Z(2)}function yn(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function pe(t){var e=$u[t];return e||Z(18,t),e}function Os(){return process.env.NODE_ENV==="production"||et||Z(0),et}function gn(t,e){e&&(pe("Patches"),t.u=[],t.s=[],t.v=e)}function vr(t){Sn(t),t.p.forEach(_u),t.p=null}function Sn(t){t===et&&(et=t.l)}function As(t){return et={p:[],l:et,h:t,m:!0,_:0}}function _u(t){var e=t[ne];e.i===0||e.i===1?e.j():e.O=!0}function En(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||pe("ES5").S(e,t,n),n?(r[ne].P&&(vr(e),Z(4)),Ve(t)&&(t=mr(e,t),e.l||yr(e,t)),e.u&&pe("Patches").M(r[ne].t,t,e.u,e.s)):t=mr(e,r,[]),vr(e),e.u&&e.v(e.u,e.s),t!==Ns?t:void 0}function mr(t,e,r){if(yn(e))return e;var n=e[ne];if(!n)return wt(e,function(s,o){return xs(t,n,e,s,o,r)},!0),e;if(n.A!==t)return e;if(!n.P)return yr(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=vn(n.k):n.o;wt(n.i===3?new Set(i):i,function(s,o){return xs(t,n,i,s,o,r)}),yr(t,i,!1),r&&t.u&&pe("Patches").R(n,r,t.u,t.s)}return n.o}function xs(t,e,r,n,i,s){if(process.env.NODE_ENV!=="production"&&i===r&&Z(5),Xe(i)){var o=mr(t,i,s&&e&&e.i!==3&&!fn(e.D,n)?s.concat(n):void 0);if(bs(r,n,o),!Xe(o))return;t.m=!1}if(Ve(i)&&!yn(i)){if(!t.h.F&&t._<1)return;mr(t,i),e&&e.A.l||yr(t,i)}}function yr(t,e,r){r===void 0&&(r=!1),t.h.F&&t.m&&mn(e,r)}function wn(t,e){var r=t[ne];return(r?$e(r):t)[e]}function ks(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Tn(t){t.P||(t.P=!0,t.l&&Tn(t.l))}function bn(t){t.o||(t.o=vn(t.t))}function On(t,e,r){var n=hn(e)?pe("MapSet").N(e,r):pn(e)?pe("MapSet").T(e,r):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Os(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,c=kn;o&&(u=[a],c=Tt);var l=Proxy.revocable(u,c),v=l.revoke,d=l.proxy;return a.k=d,a.j=v,d}(e,r):pe("ES5").J(e,r);return(r?r.A:Os()).p.push(n),n}function Cu(t){return Xe(t)||Z(22,t),function e(r){if(!Ve(r))return r;var n,i=r[ne],s=Ze(r);if(i){if(!i.P&&(i.i<4||!pe("ES5").K(i)))return i.t;i.I=!0,n=Is(r,s),i.I=!1}else n=Is(r,s);return wt(n,function(o,a){i&&Nu(i.t,o)===a||bs(n,o,e(a))}),s===3?new Set(n):n}(t)}function Is(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return vn(t)}var Rs,et,An=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Lu=typeof Map<"u",ju=typeof Set<"u",Ps=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ns=An?Symbol.for("immer-nothing"):((Rs={})["immer-nothing"]=!0,Rs),Ds=An?Symbol.for("immer-draftable"):"__$immer_draftable",ne=An?Symbol.for("immer-state"):"__$immer_state",Mu={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Fu=""+Object.prototype.constructor,xn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Vu=Object.getOwnPropertyDescriptors||function(t){var e={};return xn(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},$u={},kn={get:function(t,e){if(e===ne)return t;var r=$e(t);if(!fn(r,e))return function(i,s,o){var a,u=ks(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Ve(n)?n:n===wn(t.t,e)?(bn(t),t.o[e]=On(t.A.h,n,t)):n},has:function(t,e){return e in $e(t)},ownKeys:function(t){return Reflect.ownKeys($e(t))},set:function(t,e,r){var n=ks($e(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=wn($e(t),e),s=i==null?void 0:i[ne];if(s&&s.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(Du(r,i)&&(r!==void 0||fn(t.t,e)))return!0;bn(t),Tn(t)}return t.o[e]===r&&typeof r!="number"&&(r!==void 0||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return wn(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,bn(t),Tn(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=$e(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Z(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Z(12)}},Tt={};wt(kn,function(t,e){Tt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Tt.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Z(13),Tt.set.call(this,t,e,void 0)},Tt.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Z(14),kn.set.call(this,t[0],e,r,t[0])};var Bu=function(){function t(r){var n=this;this.g=Ps,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=n;return function(h){var m=this;h===void 0&&(h=a);for(var E=arguments.length,T=Array(E>1?E-1:0),S=1;S<E;S++)T[S-1]=arguments[S];return u.produce(h,function(b){var x;return(x=s).call.apply(x,[m,b].concat(T))})}}var c;if(typeof s!="function"&&Z(6),o!==void 0&&typeof o!="function"&&Z(7),Ve(i)){var l=As(n),v=On(n,i,void 0),d=!0;try{c=s(v),d=!1}finally{d?vr(l):Sn(l)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(h){return gn(l,o),En(h,l)},function(h){throw vr(l),h}):(gn(l,o),En(c,l))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===Ns&&(c=void 0),n.F&&mn(c,!0),o){var p=[],f=[];pe("Patches").M(i,c,p,f),o(p,f)}return c}Z(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var l=arguments.length,v=Array(l>1?l-1:0),d=1;d<l;d++)v[d-1]=arguments[d];return n.produceWithPatches(c,function(p){return i.apply(void 0,[p].concat(v))})};var o,a,u=n.produce(i,s,function(c,l){o=c,a=l});return typeof Promise<"u"&&u instanceof Promise?u.then(function(c){return[c,o,a]}):[u,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Ve(r)||Z(8),Xe(r)&&(r=Cu(r));var n=As(this),i=On(this,r,void 0);return i[ne].C=!0,Sn(n),i},e.finishDraft=function(r,n){var i=r&&r[ne];process.env.NODE_ENV!=="production"&&(i&&i.C||Z(9),i.I&&Z(10));var s=i.A;return gn(s,n),En(void 0,s)},e.setAutoFreeze=function(r){this.F=r},e.setUseProxies=function(r){r&&!Ps&&Z(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=pe("Patches").$;return Xe(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),ie=new Bu,zu=ie.produce;ie.produceWithPatches.bind(ie),ie.setAutoFreeze.bind(ie),ie.setUseProxies.bind(ie),ie.applyPatches.bind(ie),ie.createDraft.bind(ie),ie.finishDraft.bind(ie);const Ku=zu,tt=D.createContext({}),Gu=({nhost:t,initial:e,...r})=>{const n=t.auth.client.machine,i=Ie(n,{devTools:t.devTools,context:Ku(n.context,o=>{var a,u;e&&(o.user=e.user,o.refreshToken.value=(a=e.refreshToken)!=null?a:null,o.accessToken.value=(u=e.accessToken)!=null?u:null,o.accessToken.expiresAt=new Date(Date.now()+e.accessTokenExpiresIn*1e3))})}).start(),s=D.useRef(!0);return D.useEffect(()=>{s.current?s.current=!1:e&&i.send("SESSION_UPDATE",{data:{session:e}})},[e,i]),t.auth.client.interpreter=i,it.jsx(tt.Provider,{value:t,children:r.children})},G=()=>{var r;const e=(r=D.useContext(tt).auth)==null?void 0:r.client.interpreter;if(!e)throw Error("No interpreter");return e},gr=()=>{const t=G();return g(t,e=>({isAuthenticated:e.matches({authentication:"signedIn"}),isLoading:e.hasTag("loading"),error:e.context.errors.authentication||null,isError:e.matches({authentication:{signedOut:"failed"}}),connectionAttempts:e.context.importTokenAttempts}),(e,r)=>e.isAuthenticated===r.isAuthenticated&&e.isLoading===r.isLoading&&e.connectionAttempts===r.connectionAttempts)};function Hu({children:t}){const{isAuthenticated:e}=gr();return e?it.jsx(it.Fragment,{children:t}):null}function qu({children:t}){const{isAuthenticated:e}=gr();return e?null:it.jsx(it.Fragment,{children:t})}const Us=()=>{const t=G();return g(t,e=>e.context.accessToken.value)},we=()=>D.useContext(tt),Ju=()=>{const t=we(),[e,r]=D.useState(null),n=!e,i=!!e,[s,o]=D.useState(!1);return{add:async u=>{o(!0);const c=await Xi(t.auth.client,u),{error:l}=c;return l&&r(l),o(!1),c},isLoading:s,isSuccess:n,isError:i,error:e}},Wu=()=>{const t=G(),[e,r]=D.useState(!!t.status&&t.getSnapshot().matches({authentication:"signedIn"}));return D.useEffect(()=>t.subscribe(i=>{const s=i.matches({authentication:"signedIn"});r(s)}).unsubscribe,[t]),e},Yu=()=>{const t=G();return g(t,e=>e.hasTag("loading"))};function Qu(t,e){const r=D.useMemo(()=>typeof t=="string"?t:void 0,[t]),n=D.useMemo(()=>typeof t!="string"?t:e,[t,e]),i=we(),s=D.useMemo(()=>Ji(i.auth.client),[i]),o=Ie(s),a=g(o,d=>d.matches("requesting")),u=g(o,d=>d.context.error),c=g(o,d=>d.matches("idle.error")),l=g(o,d=>d.matches("idle.success"));return{changeEmail:D.useCallback(async(d,p=n)=>Zi(o,typeof d=="string"?d:r,p),[o,r,n]),isLoading:a,needsEmailVerification:l,isError:c,error:u}}const Xu=t=>{const e=we(),r=D.useMemo(()=>Wi(e.auth.client),[e]),n=Ie(r),i=g(n,c=>c.matches({idle:"error"})),s=g(n,c=>c.matches({idle:"success"})),o=g(n,c=>c.context.error),a=g(n,c=>c.matches("requesting"));return{changePassword:c=>es(n,typeof c=="string"?c:t),isLoading:a,isSuccess:s,isError:i,error:o}},Zu=()=>{const t=we(),e=D.useMemo(()=>bc(t.auth.client),[t]),r=Ie(e),n=g(r,d=>d.matches({idle:"error"})||d.matches({generated:{idle:"error"}})),i=g(r,d=>d.matches("generating")),s=g(r,d=>d.matches("generated")),o=g(r,d=>d.matches({generated:"activating"})),a=g(r,d=>d.matches({generated:"activated"})),u=g(r,d=>d.context.error),c=g(r,d=>d.context.imageUrl||"");return{generateQrCode:()=>xc(r),isGenerating:i,qrCodeDataUrl:c,isGenerated:s,activateMfa:d=>kc(r,d),isActivating:o,isActivated:a,isError:n,error:u}},_s=()=>{const t=Us();return t?Rn(t):null},Cs=t=>{const e=we(),r=f=>{t.send({type:"ADD",file:f.file,bucketId:f.bucketId||d})},n=f=>nu(e,t,{file:f.file,bucketId:f.bucketId||d,id:v,name:p}),i=()=>{t.send("CANCEL")},s=()=>{t.send("DESTROY")},o=g(t,f=>f.matches("uploading")),a=g(t,f=>f.matches("uploaded")),u=g(t,f=>f.matches("error")),c=g(t,f=>f.context.error||null),l=g(t,f=>f.context.progress),v=g(t,f=>f.context.id),d=g(t,f=>f.context.bucketId),p=g(t,f=>{var h;return(h=f.context.file)==null?void 0:h.name});return{add:r,upload:n,cancel:i,destroy:s,isUploaded:a,isUploading:o,isError:u,error:c,progress:l,id:v,bucketId:d,name:p}},el=()=>{const t=Ie(vs);return Cs(t)},Ls=()=>{const t=_s();return(t==null?void 0:t["https://hasura.io/jwt/claims"])||null},tl=t=>{const e=Ls();return(e==null?void 0:e[t.startsWith("x-hasura-")?t:`x-hasura-${t}`])||null},rl=()=>{const t=we(),[e,r]=D.useState([]),n=Ie(ru,{},p=>{p.event.type==="UPLOAD_ERROR"?r(p.context.files.filter(f=>{var h;return(h=f.getSnapshot())==null?void 0:h.context.error})):(p.matches("uploaded")||p.event.type==="CLEAR")&&e.length>0&&r([])}),i=p=>{n.send({type:"ADD",...p})},s=p=>iu(t,n,p),o=()=>{n.send("CANCEL")},a=()=>{n.send("CLEAR")},u=g(n,p=>p.matches("uploading")),c=g(n,p=>p.matches("uploaded")),l=g(n,p=>p.matches("error")),v=g(n,p=>p.context.progress),d=g(n,p=>p.context.files);return{upload:s,add:i,clear:a,cancel:o,progress:v,isUploaded:c,isUploading:u,files:d,isError:l,errors:e}},js=()=>{const t=G();return g(t,e=>e.context.user,(e,r)=>(e&&JSON.stringify(e))===(r&&JSON.stringify(r)))},nl=()=>{const{isLoading:t,isAuthenticated:e}=gr(),r=js();return D.useMemo(()=>({isLoading:t,isAuthenticated:e,user:r}),[t,e,r])},il=()=>D.useContext(tt).auth.client.backendUrl.replace("/v1/auth",""),sl=t=>{const[e,r]=D.useState(!0);D.useEffect(()=>{r(!1)},[]);const n=D.useContext(tt);return new Proxy({},{get(i,s){return Qr(`${n.auth.client.backendUrl}/signin/provider/${s}`,ce(e?void 0:n.auth.client.clientUrl,t))}})},ol=(t,e)=>{const r=typeof t=="string"?t:void 0,n=typeof t!="string"?t:e,i=we(),s=D.useMemo(()=>Yi(i.auth.client),[i]),o=Ie(s),a=g(o,d=>d.matches("requesting")),u=g(o,d=>d.context.error),c=g(o,d=>d.matches("idle.error")),l=g(o,d=>d.matches("idle.success"));return{resetPassword:(d,p=n)=>ts(o,typeof d=="string"?d:r,p),isLoading:a,isSent:l,isError:c,error:u}},al=(t,e)=>{const r=typeof t=="string"?t:void 0,n=typeof t!="string"?t:e,i=we(),s=D.useMemo(()=>Qi(i.auth.client),[i]),o=Ie(s),a=g(o,d=>d.matches({idle:"error"})),u=g(o,d=>d.matches({idle:"success"})),c=g(o,d=>d.context.error),l=g(o,d=>d.matches("requesting"));return{sendEmail:(d,p=n)=>rs(o,typeof d=="string"?d:r,p),isLoading:l,isSent:u,isError:a,error:c}},cl=()=>{const t=G(),e=()=>ns(t),r=g(t,u=>u.context.errors.authentication||null,(u,c)=>(u==null?void 0:u.error)===(c==null?void 0:c.error)),n=g(t,u=>u.matches({authentication:{authenticating:"anonymous"}})),i=g(t,u=>u.matches({authentication:"signedIn"})),s=g(t,u=>u.matches({authentication:{signedOut:"failed"}})),o=g(t,u=>u.context.user,(u,c)=>(u==null?void 0:u.id)===(c==null?void 0:c.id));return{accessToken:g(t,u=>u.context.accessToken.value),error:r,isError:s,isLoading:n,isSuccess:i,signInAnonymous:e,user:o}},ul=(t,e,r)=>{const n=G(),i=(h,m)=>is(n,typeof h=="string"?h:t,typeof m=="string"?m:e),s=h=>os(n,typeof h=="string"?h:r),o=g(n,h=>h.context.user,(h,m)=>(h==null?void 0:h.id)===(m==null?void 0:m.id)),a=g(n,h=>h.context.accessToken.value),u=g(n,h=>h.context.errors.authentication||null,(h,m)=>(h==null?void 0:h.error)===(m==null?void 0:m.error)),c=g(n,h=>h.matches({authentication:"signedIn"})),l=g(n,h=>h.matches({authentication:{authenticating:"password"}}),(h,m)=>h===m),v=g(n,h=>h.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(h,m)=>h===m),d=g(n,h=>h.matches({authentication:{signedOut:"needsMfa"}}),(h,m)=>h===m),p=g(n,h=>h.matches({authentication:{signedOut:"failed"}}),(h,m)=>h===m),f=g(n,h=>h.context.mfa);return{accessToken:a,error:u,isError:p,isLoading:l,isSuccess:c,needsEmailVerification:v,needsMfaOtp:d,mfa:f,sendMfaOtp:s,signInEmailPassword:i,user:o}};function ll(t,e){const r=typeof t=="string"?t:void 0,n=typeof t=="string"?e:t,i=G(),s=(l,v=n)=>en(i,typeof l=="string"?l:r,v),o=g(i,l=>l.context.errors.registration||null,(l,v)=>(l==null?void 0:l.error)===(v==null?void 0:v.error)),a=g(i,l=>l.matches("registration.passwordlessEmail")),u=g(i,l=>l.matches("registration.incomplete.needsEmailVerification")),c=g(i,l=>l.matches("registration.incomplete.failed"));return{signInEmailPasswordless:s,isLoading:a,isSuccess:u,isError:c,error:o}}const dl=()=>{const t=G(),e=c=>ss(t,c),r=g(t,c=>c.context.user,(c,l)=>(c==null?void 0:c.id)===(l==null?void 0:l.id)),n=g(t,c=>c.context.accessToken.value),i=g(t,c=>c.context.errors.authentication||null,(c,l)=>(c==null?void 0:c.error)===(l==null?void 0:l.error)),s=g(t,c=>c.matches({authentication:"signedIn"})),o=g(t,c=>c.matches({authentication:{authenticating:"securityKeyEmail"}}),(c,l)=>c===l),a=g(t,c=>c.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(c,l)=>c===l),u=g(t,c=>c.matches({authentication:{signedOut:"failed"}}),(c,l)=>c===l);return{accessToken:n,error:i,isError:u,isLoading:o,isSuccess:s,needsEmailVerification:a,signInEmailSecurityKey:e,user:r}};function fl(t){const e=G(),[r,n]=D.useState(""),i=(v,d=t)=>(n(v),tn(e,v,d)),s=async(...v)=>{if(v.length===2){const[p,f]=v;return rn(e,p,f)}const[d]=v;return rn(e,r,d)},o=g(e,v=>v.context.errors.registration||null,(v,d)=>(v==null?void 0:v.error)===(d==null?void 0:d.error)),a=g(e,v=>v.matches("registration.passwordlessSms")||v.matches("registration.passwordlessSmsOtp")),u=g(e,v=>v.matches("authentication.signedIn")),c=g(e,v=>v.matches("registration.incomplete.needsOtp")),l=g(e,v=>v.matches("registration.incomplete.failed"));return{signInSmsPasswordless:i,sendOtp:s,isLoading:a,isSuccess:u,needsOtp:c,isError:l,error:o}}const hl=(t=!1)=>{const e=G(),r=s=>as(e,typeof s=="boolean"?s:t),n=g(e,s=>s.matches({authentication:{signedOut:"success"}}),(s,o)=>s===o),i=g(e,s=>s.context.errors.signout||null,(s,o)=>(s==null?void 0:s.error)===(o==null?void 0:o.error));return{signOut:r,isSuccess:n,error:i}},pl=(t,e,r)=>{const n=typeof t=="string"?t:void 0,i=typeof e=="string"?e:void 0,s=r||(typeof t!="string"?t:void 0),o=G(),a=g(o,h=>!!h.context.errors.registration),u=g(o,h=>h.context.errors.registration||null,(h,m)=>(h==null?void 0:h.error)===(m==null?void 0:m.error)),c=g(o,h=>h.matches("registration.emailPassword")),l=g(o,h=>h.matches("registration.incomplete.needsEmailVerification")),v=g(o,h=>h.matches({authentication:"signedIn",registration:"complete"})),d=(h,m=i,E=s)=>nn(o,typeof h=="string"?h:n,m,E),p=g(o,h=>h.context.user,(h,m)=>(h==null?void 0:h.id)===(m==null?void 0:m.id));return{accessToken:g(o,h=>h.context.accessToken.value),error:u,isError:a,isLoading:c,isSuccess:v,needsEmailVerification:l,signUpEmailPassword:d,user:p}},vl=t=>{const e=G(),r=g(e,l=>!!l.context.errors.registration),n=g(e,l=>l.context.errors.registration||null,(l,v)=>(l==null?void 0:l.error)===(v==null?void 0:v.error)),i=g(e,l=>l.matches("registration.securityKey")),s=g(e,l=>l.matches("registration.incomplete.needsEmailVerification")),o=g(e,l=>l.matches({authentication:"signedIn",registration:"complete"})),a=(l,v=t)=>cs(e,l,v),u=g(e,l=>l.context.user,(l,v)=>(l==null?void 0:l.id)===(v==null?void 0:v.id));return{accessToken:g(e,l=>l.context.accessToken.value),error:n,isError:r,isLoading:i,isSuccess:o,needsEmailVerification:s,signUpEmailSecurityKey:a,user:u}},Ms=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.avatarUrl},(e,r)=>e===r)},ml=Ms,Fs=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.defaultRole},(e,r)=>e===r)},yl=Fs,Vs=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.displayName},(e,r)=>e===r)},gl=Vs,$s=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.email},(e,r)=>e===r)},Sl=$s,El=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.id},(e,r)=>e===r)},Bs=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.isAnonymous},(e,r)=>e===r)},wl=Bs,Tl=()=>{const t=G();return g(t,e=>{var r;return(r=e.context.user)==null?void 0:r.locale},(e,r)=>e===r)},bl=()=>{const t=G();return g(t,e=>{var r;return e.matches("authentication.signedIn")?((r=e.context.user)==null?void 0:r.roles)||[]:[]})};I.NhostClient=gu,I.NhostReactContext=tt,I.NhostReactProvider=Gu,I.SignedIn=Hu,I.SignedOut=qu,I.useAccessToken=Us,I.useAddSecurityKey=Ju,I.useAuthInterpreter=G,I.useAuthLoading=Yu,I.useAuthenticated=Wu,I.useAuthenticationStatus=gr,I.useAvatarUrl=ml,I.useChangeEmail=Qu,I.useChangePassword=Xu,I.useConfigMfa=Zu,I.useDecodedAccessToken=_s,I.useDefaultRole=yl,I.useDisplayName=gl,I.useEmail=Sl,I.useFileUpload=el,I.useFileUploadItem=Cs,I.useHasuraClaim=tl,I.useHasuraClaims=Ls,I.useIsAnonymous=wl,I.useMultipleFilesUpload=rl,I.useNhostAuth=nl,I.useNhostBackendUrl=il,I.useNhostClient=we,I.useProviderLink=sl,I.useResetPassword=ol,I.useSendVerificationEmail=al,I.useSignInAnonymous=cl,I.useSignInEmailPassword=ul,I.useSignInEmailPasswordless=ll,I.useSignInEmailSecurityKey=dl,I.useSignInSmsPasswordless=fl,I.useSignOut=hl,I.useSignUpEmailPassword=pl,I.useSignUpEmailSecurityKeyEmail=vl,I.useUserAvatarUrl=Ms,I.useUserData=js,I.useUserDefaultRole=Fs,I.useUserDisplayName=Vs,I.useUserEmail=$s,I.useUserId=El,I.useUserIsAnonymous=Bs,I.useUserLocale=Tl,I.useUserRoles=bl,Object.defineProperties(I,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=react.umd.js.map
